import{D as h,l as d,u as n,A as g,y as f,z as i,m as e,J as T,o as c,K as w,P as A,W as U,E as k,G as L,F as D,t as j,Z as ge,f as F,H as me,p as he,X as be,C as fe,R as O}from"./vendor-LkufkiF7.js";import{I as ke}from"./LogoutButton-C42r2dkh.js";import{L as xe}from"./Layout-B-7SKJ8y.js";import{L as _e}from"./LoadingButton-DNgtCulM.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{ChevronDown as pe,LucideX as Z,Edit as J,Clock as W,LucideRefreshCw as ye,Check as $,AlertCircle as ee,Loader2 as te,LucideSparkles as se,AlertTriangle as ve,LucideUser as we,LucideTag as Ce,LucideZap as Ie,LucideTrendingUp as Se,Globe as Te,Calendar as Ae,LucidePrinter as Le,ChevronRight as Ee,LucideStar as Ve,Copy as Ue,File as De,Download as je,LucideUpload as Me,LucideTrash2 as Fe,Eye as Be}from"./ui-DZ0wy3Ge.js";import{v as Ne,h as P,a as Y}from"./utils-Cv2kkzzw.js";import{_ as Re}from"./RichEditor-DpxhyXX8.js";import{_ as Oe}from"./DeleteConfirmation-CLnw7UU1.js";import"./app-DgNNGg9T.js";import"./Logo-CwTRbPbO.js";import"./FlashMessages-Bge5XBye.js";const Pe={name:"SelectEditInput",components:{Edit:J,X:Z,ChevronDown:pe},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Boolean,Object],default:null},items:{type:Array,default:()=>[]},placeholder:{type:String,default:""},label:{type:String,default:""},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},itemKey:{type:String,default:"id"},itemLabel:{type:String,default:"name"},itemDescription:{type:String,default:"description"},itemBadge:{type:String,default:"badge"},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)},variant:{type:String,default:"default",validator:t=>["default","filled","outlined"].includes(t)},noResultsText:{type:String,default:"No results found"},helpText:{type:String,default:""},error:{type:String,default:""},searchable:{type:Boolean,default:!0},filterMethod:{type:Function,default:null},debounceDelay:{type:Number,default:300}},emits:["update:modelValue","change","focus","blur","search","clear"],data(){return{isEditing:!1,isListVisible:!1,searchQuery:"",highlightedIndex:-1,selectedItem:null,debounceTimer:null}},computed:{inputId(){return`select-edit-input-${Ne()}`},containerClasses(){return["relative",{"opacity-50 pointer-events-none":this.disabled,"has-error":this.error}]},inputClasses(){return[{"border-red-300 focus:border-red-500 focus:ring-red-500":this.error,"border-slate-300 focus:border-blue-500 focus:ring-blue-500":!this.error,"text-sm":this.size==="sm","text-base":this.size==="md","text-lg":this.size==="lg"}]},displayValue(){return this.selectedItem?this.getItemDisplayName(this.selectedItem):this.searchQuery||""},filteredItems(){return!this.searchable||!this.searchQuery?this.items:this.filterMethod?this.filterMethod(this.items,this.searchQuery):this.items.filter(t=>{const s=this.searchQuery.toLowerCase(),r=this.getItemDisplayName(t).toLowerCase(),u=(t[this.itemDescription]||"").toLowerCase();return r.includes(s)||u.includes(s)})}},watch:{modelValue:{handler(t){this.updateSelectedItem(t)},immediate:!0},items:{handler(){this.updateSelectedItem(this.modelValue)},deep:!0}},mounted(){document.addEventListener("click",this.handleOutsideClick),this.updateSelectedItem(this.modelValue)},beforeUnmount(){document.removeEventListener("click",this.handleOutsideClick),this.debounceTimer&&clearTimeout(this.debounceTimer)},methods:{safeTranslate(t){try{return!t||typeof t!="string"?t||"":this.$t(t)}catch(s){return console.warn("Translation error for key:",t,s),t||""}},getItemKey(t,s){return t[this.itemKey]||t.id||s},getItemDisplayName(t){return t&&(t[this.itemLabel]||t.name||t.label||t.text||String(t.id))||""},getItemClasses(t,s){return[{"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":s===this.highlightedIndex,"bg-slate-50 dark:bg-slate-700":s!==this.highlightedIndex,"hover:bg-slate-100 dark:hover:bg-slate-600":s!==this.highlightedIndex}]},getBadgeClasses(t){return typeof t=="object"&&t.class||"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300"},handleInput(t){this.searchQuery=t.target.value,this.isListVisible=!0,this.highlightedIndex=-1,this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.$emit("search",this.searchQuery)},this.debounceDelay)},handleFocus(){this.isListVisible=!0,this.$emit("focus")},handleBlur(){setTimeout(()=>{this.isListVisible||this.finishEditing()},150),this.$emit("blur")},handleOutsideClick(t){this.$el&&!this.$el.contains(t.target)&&(this.isListVisible=!1,this.finishEditing())},handleTab(){this.highlightedIndex>=0&&this.filteredItems[this.highlightedIndex]?this.selectItem(this.filteredItems[this.highlightedIndex]):this.finishEditing()},navigateDown(){this.filteredItems.length!==0&&(this.highlightedIndex=Math.min(this.highlightedIndex+1,this.filteredItems.length-1))},navigateUp(){this.filteredItems.length!==0&&(this.highlightedIndex=Math.max(this.highlightedIndex-1,-1))},selectHighlightedItem(){this.highlightedIndex>=0&&this.filteredItems[this.highlightedIndex]&&this.selectItem(this.filteredItems[this.highlightedIndex])},selectItem(t){t&&(this.selectedItem=t,this.searchQuery=this.getItemDisplayName(t),this.isListVisible=!1,this.highlightedIndex=-1,this.$emit("update:modelValue",t[this.itemKey]||t.id),this.$emit("change",t),this.finishEditing())},clearSelection(){this.selectedItem=null,this.searchQuery="",this.$emit("update:modelValue",null),this.$emit("change",null),this.$emit("clear")},clearSearch(){this.searchQuery="",this.highlightedIndex=-1,this.$nextTick(()=>{var t;(t=this.$refs.input)==null||t.focus()})},handleContainerClick(t){t.target.closest("button")||this.startEditing()},startEditing(){if(console.log("startEditing called",{editable:this.editable,disabled:this.disabled,readonly:this.readonly,displayValue:this.displayValue}),!this.editable||this.disabled||this.readonly){console.log("startEditing blocked due to conditions");return}this.isEditing=!0,this.searchQuery=this.displayValue,console.log("startEditing - isEditing set to true, searchQuery:",this.searchQuery),this.$nextTick(()=>{var t,s;(t=this.$refs.input)==null||t.focus(),(s=this.$refs.input)==null||s.select()})},finishEditing(){this.isEditing=!1,this.isListVisible=!1,this.highlightedIndex=-1},cancelEditing(){this.searchQuery=this.displayValue,this.finishEditing()},updateSelectedItem(t){if(!t){this.selectedItem=null;return}this.selectedItem=this.items.find(s=>(s[this.itemKey]||s.id)===t)||null}}},Ye=["for"],He={key:0,class:"text-red-500 ml-1"},Qe={key:1,class:"display-mode"},ze={class:"flex items-center gap-3"},Ke={class:"flex-1"},Xe={class:"text-sm font-medium text-slate-900 dark:text-white"},qe={key:0,class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},Ge={class:"flex items-center gap-2"},Ze=["title"],Je=["title"],We={key:2,class:"edit-mode"},$e={class:"relative"},et=["id","placeholder","disabled","readonly"],tt={class:"absolute inset-y-0 right-0 flex items-center pr-3"},st={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-auto"},lt={class:"py-1"},it=["onClick","onMouseenter"],rt={class:"flex items-center gap-3"},ot={class:"flex-1"},at={class:"text-sm font-medium text-slate-900 dark:text-white"},dt={key:0,class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},nt={key:0,class:"flex-shrink-0"},ct={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg shadow-lg"},ut={class:"px-3 py-2 text-sm text-slate-500 dark:text-slate-400 text-center"},gt={key:3,class:"mt-2 text-sm text-red-600 dark:text-red-400"},mt={key:4,class:"mt-2 text-sm text-slate-500 dark:text-slate-400"};function ht(t,s,r,u,l,a){const v=h("Edit"),y=h("X"),C=h("ChevronDown");return n(),d("div",{class:k(["select-edit-input",a.containerClasses]),ref:"container"},[r.label?(n(),d("label",{key:0,for:a.inputId,class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[f(i(a.safeTranslate(r.label))+" ",1),r.required?(n(),d("span",He,"*")):g("",!0)],8,Ye)):g("",!0),!l.isEditing&&a.displayValue?(n(),d("div",Qe,[e("div",{class:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors",onClick:s[2]||(s[2]=(...m)=>a.handleContainerClick&&a.handleContainerClick(...m))},[e("div",ze,[e("div",Ke,[e("div",Xe,i(a.displayValue),1),l.selectedItem&&l.selectedItem.description?(n(),d("div",qe,i(l.selectedItem.description),1)):g("",!0)])]),e("div",Ge,[r.editable?(n(),d("button",{key:0,onClick:s[0]||(s[0]=T((...m)=>a.startEditing&&a.startEditing(...m),["stop"])),type:"button",class:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:t.$t("Edit")},[c(v,{class:"w-4 h-4"})],8,Ze)):g("",!0),r.clearable&&t.selected?(n(),d("button",{key:1,onClick:s[1]||(s[1]=T((...m)=>a.clearSelection&&a.clearSelection(...m),["stop"])),type:"button",class:"p-1 text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:t.$t("Clear")},[c(y,{class:"w-4 h-4"})],8,Je)):g("",!0)])])])):g("",!0),l.isEditing||!a.displayValue?(n(),d("div",We,[e("div",$e,[w(e("input",{id:a.inputId,ref:"input","onUpdate:modelValue":s[3]||(s[3]=m=>l.searchQuery=m),class:k(["form-input w-full pr-10",a.inputClasses]),type:"text",placeholder:r.placeholder,disabled:r.disabled,readonly:r.readonly,autocomplete:"off",onInput:s[4]||(s[4]=(...m)=>a.handleInput&&a.handleInput(...m)),onFocus:s[5]||(s[5]=(...m)=>a.handleFocus&&a.handleFocus(...m)),onBlur:s[6]||(s[6]=(...m)=>a.handleBlur&&a.handleBlur(...m)),onKeydown:[s[7]||(s[7]=U(T((...m)=>a.navigateDown&&a.navigateDown(...m),["prevent"]),["down"])),s[8]||(s[8]=U(T((...m)=>a.navigateUp&&a.navigateUp(...m),["prevent"]),["up"])),s[9]||(s[9]=U(T((...m)=>a.selectHighlightedItem&&a.selectHighlightedItem(...m),["prevent"]),["enter"])),s[10]||(s[10]=U(T((...m)=>a.cancelEditing&&a.cancelEditing(...m),["prevent"]),["escape"])),s[11]||(s[11]=U((...m)=>a.handleTab&&a.handleTab(...m),["tab"]))]},null,42,et),[[A,l.searchQuery]]),e("div",tt,[l.isEditing&&l.searchQuery?(n(),d("button",{key:0,onClick:s[12]||(s[12]=(...m)=>a.clearSearch&&a.clearSearch(...m)),type:"button",class:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors"},[c(y,{class:"w-4 h-4"})])):g("",!0),c(C,{class:k(["w-4 h-4 text-slate-400 transition-transform duration-200",{"rotate-180":l.isListVisible}])},null,8,["class"])])]),c(ge,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:L(()=>[l.isListVisible&&a.filteredItems.length>0?(n(),d("div",st,[e("ul",lt,[(n(!0),d(D,null,j(a.filteredItems,(m,p)=>(n(),d("li",{key:a.getItemKey(m,p),onClick:S=>a.selectItem(m),onMouseenter:S=>l.highlightedIndex=p,class:k(["px-3 py-2 cursor-pointer transition-colors",a.getItemClasses(m,p)])},[e("div",rt,[e("div",ot,[e("div",at,i(a.getItemDisplayName(m)),1),m.description?(n(),d("div",dt,i(m.description),1)):g("",!0)]),m.badge?(n(),d("div",nt,[e("span",{class:k(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",a.getBadgeClasses(m.badge)])},i(m.badge),3)])):g("",!0)])],42,it))),128))])])):g("",!0)]),_:1}),l.isListVisible&&a.filteredItems.length===0&&l.searchQuery?(n(),d("div",ct,[e("div",ut,i(r.noResultsText),1)])):g("",!0)])):g("",!0),r.error?(n(),d("div",gt,i(r.error),1)):g("",!0),r.helpText&&!r.error?(n(),d("div",mt,i(r.helpText),1)):g("",!0)],2)}const bt=H(Pe,[["render",ht],["__scopeId","data-v-e4caaf6d"]]),ft={name:"AIClassificationSuggestions",components:{Sparkles:se,Loader2:te,AlertCircle:ee,Check:$,RefreshCw:ye,Clock:W},props:{ticketId:{type:[String,Number],required:!0},currentClassification:{type:Object,default:()=>({})}},emits:["suggestion-applied","classification-updated"],setup(t,{emit:s}){const r=F(!1),u=F(null),l=F(null),a=F({available:!1}),v=async()=>{r.value=!0,u.value=null;try{const _=await(await fetch(`/ai/tickets/${t.ticketId}/suggestions`,{method:"GET",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();if(_.success)l.value=_.data;else throw new Error(_.message||"Failed to get AI suggestions")}catch(b){u.value=b.message,console.error("Error getting AI suggestions:",b)}finally{r.value=!1}},y=async(b,_)=>{try{const M=await(await fetch(`/ai/tickets/${t.ticketId}/apply-classification`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({[`${b}_id`]:_.id,confidence_score:_.confidence,reasoning:`AI suggestion applied for ${b}`})})).json();if(M.success)s("suggestion-applied",{field:b,suggestion:_}),s("classification-updated");else throw new Error(M.message||"Failed to apply suggestion")}catch(E){u.value=E.message,console.error("Error applying suggestion:",E)}},C=async()=>{if(l.value)try{const _=await(await fetch(`/ai/tickets/${t.ticketId}/apply-classification`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({priority_id:l.value.suggestions.priority.id,category_id:l.value.suggestions.category.id,department_id:l.value.suggestions.department.id,type_id:l.value.suggestions.type.id,confidence_score:l.value.overall_confidence,reasoning:"All AI suggestions applied"})})).json();if(_.success)s("classification-updated");else throw new Error(_.message||"Failed to apply all suggestions")}catch(b){u.value=b.message,console.error("Error applying all suggestions:",b)}},m=b=>b>=.8?"text-green-600 dark:text-green-400":b>=.6?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",p=b=>b>=.8?"bg-green-500":b>=.6?"bg-yellow-500":"bg-red-500",S=b=>({urgent:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",high:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",medium:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",low:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"})[b==null?void 0:b.toLowerCase()]||"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300",x=async()=>{try{const _=await(await fetch("/dashboard/ai/status",{method:"GET",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();_.success&&(a.value=_.data)}catch(b){console.error("Error checking AI status:",b)}};me(()=>{x()});const B=computed(()=>l.value&&l.value.reasoning&&(l.value.reasoning.includes("rate limit")||l.value.reasoning.includes("Rate limit")));return{loading:r,error:u,suggestions:l,aiStatus:a,isRateLimited:B,getSuggestions:v,applySuggestion:y,applyAllSuggestions:C,getConfidenceColorClass:m,getConfidenceBarClass:p,getPriorityClass:S}}},kt={class:"ai-suggestions-panel bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-900 border border-blue-200 dark:border-slate-700 rounded-xl p-6 shadow-sm"},xt={class:"flex items-center justify-between mb-6"},_t={class:"flex items-center space-x-3"},pt={class:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg"},yt={class:"text-lg font-semibold text-slate-900 dark:text-white"},vt={class:"text-sm text-slate-600 dark:text-slate-400"},wt={class:"flex items-center space-x-2"},Ct={key:0,class:"flex items-center space-x-1 text-green-600 dark:text-green-400"},It={class:"text-xs font-medium"},St={key:1,class:"flex items-center space-x-1 text-yellow-600 dark:text-yellow-400"},Tt={class:"text-xs font-medium"},At={key:2,class:"flex items-center space-x-1 text-red-600 dark:text-red-400"},Lt={class:"text-xs font-medium"},Et={key:0,class:"flex items-center justify-center py-8"},Vt={class:"flex items-center space-x-3"},Ut={class:"text-slate-600 dark:text-slate-400"},Dt={key:1,class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4"},jt={class:"flex items-center space-x-2"},Mt={class:"text-yellow-700 dark:text-yellow-300 font-medium"},Ft={class:"text-yellow-600 dark:text-yellow-400 text-sm mt-1"},Bt={class:"mt-3 flex items-center space-x-2"},Nt={class:"text-xs text-yellow-600 dark:text-yellow-400"},Rt={key:2,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},Ot={class:"flex items-center space-x-2"},Pt={class:"text-red-700 dark:text-red-300 font-medium"},Yt={class:"text-red-600 dark:text-red-400 text-sm mt-1"},Ht={key:3,class:"space-y-4"},Qt={class:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700"},zt={class:"flex items-center justify-between mb-3"},Kt={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},Xt={class:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2"},qt={key:0,class:"text-xs text-slate-600 dark:text-slate-400 mt-2"},Gt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Zt={class:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700"},Jt={class:"flex items-center justify-between mb-2"},Wt={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},$t={class:"flex items-center space-x-2"},es={class:"text-xs text-slate-500"},ts={class:"flex items-center justify-between"},ss={class:"text-sm text-slate-900 dark:text-white"},ls={class:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700"},is={class:"flex items-center justify-between mb-2"},rs={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},os={class:"flex items-center space-x-2"},as={class:"text-xs px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"},ds={class:"text-xs text-slate-500"},ns={class:"flex items-center justify-between"},cs={class:"text-sm text-slate-900 dark:text-white"},us={class:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700"},gs={class:"flex items-center justify-between mb-2"},ms={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},hs={class:"flex items-center space-x-2"},bs={class:"text-xs px-2 py-1 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"},fs={class:"text-xs text-slate-500"},ks={class:"flex items-center justify-between"},xs={class:"text-sm text-slate-900 dark:text-white"},_s={class:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700"},ps={class:"flex items-center justify-between mb-2"},ys={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},vs={class:"flex items-center space-x-2"},ws={class:"text-xs px-2 py-1 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300"},Cs={class:"text-xs text-slate-500"},Is={class:"flex items-center justify-between"},Ss={class:"text-sm text-slate-900 dark:text-white"},Ts={class:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-700"},As={key:4,class:"text-center py-8"},Ls={class:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"},Es={class:"text-lg font-medium text-slate-900 dark:text-white mb-2"},Vs={class:"text-slate-600 dark:text-slate-400 mb-4"};function Us(t,s,r,u,l,a){const v=h("Sparkles"),y=h("Loader2"),C=h("Clock"),m=h("AlertCircle"),p=h("Check"),S=h("RefreshCw");return n(),d("div",kt,[e("div",xt,[e("div",_t,[e("div",pt,[c(v,{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),e("div",null,[e("h3",yt,i(t.$t("AI Classification Suggestions")),1),e("p",vt,i(t.$t("AI-powered ticket classification with confidence scoring")),1)])]),e("div",wt,[u.aiStatus.available&&!u.isRateLimited?(n(),d("div",Ct,[s[9]||(s[9]=e("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},null,-1)),e("span",It,i(t.$t("AI Active")),1)])):u.isRateLimited?(n(),d("div",St,[s[10]||(s[10]=e("div",{class:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"},null,-1)),e("span",Tt,i(t.$t("Rate Limited")),1)])):(n(),d("div",At,[s[11]||(s[11]=e("div",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1)),e("span",Lt,i(t.$t("AI Offline")),1)]))])]),u.loading?(n(),d("div",Et,[e("div",Vt,[c(y,{class:"w-6 h-6 text-blue-500 animate-spin"}),e("span",Ut,i(t.$t("Analyzing ticket...")),1)])])):u.isRateLimited?(n(),d("div",Dt,[e("div",jt,[c(C,{class:"w-5 h-5 text-yellow-500"}),e("span",Mt,i(t.$t("AI Rate Limited")),1)]),e("p",Ft,i(t.$t("OpenAI rate limits are currently exceeded. AI suggestions will be available again in approximately 1 hour.")),1),e("div",Bt,[e("button",{onClick:s[0]||(s[0]=(...x)=>u.getSuggestions&&u.getSuggestions(...x)),class:"text-sm text-yellow-600 dark:text-yellow-400 hover:text-yellow-700 dark:hover:text-yellow-300 underline"},i(t.$t("Check Again")),1),s[12]||(s[12]=e("span",{class:"text-xs text-yellow-500"},"â€¢",-1)),e("span",Nt,i(t.$t("Default suggestions shown below")),1)])])):u.error?(n(),d("div",Rt,[e("div",Ot,[c(m,{class:"w-5 h-5 text-red-500"}),e("span",Pt,i(t.$t("AI Analysis Failed")),1)]),e("p",Yt,i(u.error),1),e("button",{onClick:s[1]||(s[1]=(...x)=>u.getSuggestions&&u.getSuggestions(...x)),class:"mt-3 text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 underline"},i(t.$t("Try Again")),1)])):u.suggestions?(n(),d("div",Ht,[e("div",Qt,[e("div",zt,[e("span",Kt,i(t.$t("Overall Confidence")),1),e("span",{class:k(["text-sm font-semibold",u.getConfidenceColorClass(u.suggestions.overall_confidence)])},i(Math.round(u.suggestions.overall_confidence*100))+"% ",3)]),e("div",Xt,[e("div",{class:k(["h-2 rounded-full transition-all duration-500",u.getConfidenceBarClass(u.suggestions.overall_confidence)]),style:he({width:u.suggestions.overall_confidence*100+"%"})},null,6)]),u.suggestions.reasoning?(n(),d("p",qt,i(u.suggestions.reasoning),1)):g("",!0)]),e("div",Gt,[e("div",Zt,[e("div",Jt,[e("span",Wt,i(t.$t("Priority")),1),e("div",$t,[e("span",{class:k(["text-xs px-2 py-1 rounded-full",u.getPriorityClass(u.suggestions.suggestions.priority.name)])},i(u.suggestions.suggestions.priority.name),3),e("span",es,i(Math.round(u.suggestions.suggestions.priority.confidence*100))+"%",1)])]),e("button",{onClick:s[2]||(s[2]=x=>u.applySuggestion("priority",u.suggestions.suggestions.priority)),class:"w-full text-left p-2 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors duration-200"},[e("div",ts,[e("span",ss,i(u.suggestions.suggestions.priority.name),1),c(p,{class:"w-4 h-4 text-green-500"})])])]),e("div",ls,[e("div",is,[e("span",rs,i(t.$t("Category")),1),e("div",os,[e("span",as,i(u.suggestions.suggestions.category.name),1),e("span",ds,i(Math.round(u.suggestions.suggestions.category.confidence*100))+"%",1)])]),e("button",{onClick:s[3]||(s[3]=x=>u.applySuggestion("category",u.suggestions.suggestions.category)),class:"w-full text-left p-2 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors duration-200"},[e("div",ns,[e("span",cs,i(u.suggestions.suggestions.category.name),1),c(p,{class:"w-4 h-4 text-green-500"})])])]),e("div",us,[e("div",gs,[e("span",ms,i(t.$t("Department")),1),e("div",hs,[e("span",bs,i(u.suggestions.suggestions.department.name),1),e("span",fs,i(Math.round(u.suggestions.suggestions.department.confidence*100))+"%",1)])]),e("button",{onClick:s[4]||(s[4]=x=>u.applySuggestion("department",u.suggestions.suggestions.department)),class:"w-full text-left p-2 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors duration-200"},[e("div",ks,[e("span",xs,i(u.suggestions.suggestions.department.name),1),c(p,{class:"w-4 h-4 text-green-500"})])])]),e("div",_s,[e("div",ps,[e("span",ys,i(t.$t("Type")),1),e("div",vs,[e("span",ws,i(u.suggestions.suggestions.type.name),1),e("span",Cs,i(Math.round(u.suggestions.suggestions.type.confidence*100))+"%",1)])]),e("button",{onClick:s[5]||(s[5]=x=>u.applySuggestion("type",u.suggestions.suggestions.type)),class:"w-full text-left p-2 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors duration-200"},[e("div",Is,[e("span",Ss,i(u.suggestions.suggestions.type.name),1),c(p,{class:"w-4 h-4 text-green-500"})])])])]),e("div",Ts,[e("button",{onClick:s[6]||(s[6]=(...x)=>u.applyAllSuggestions&&u.applyAllSuggestions(...x)),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors duration-200"},[c(p,{class:"w-4 h-4 mr-2"}),f(" "+i(t.$t("Apply All Suggestions")),1)]),e("button",{onClick:s[7]||(s[7]=(...x)=>u.getSuggestions&&u.getSuggestions(...x)),class:"inline-flex items-center px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300 text-sm font-medium rounded-lg transition-colors duration-200"},[c(S,{class:"w-4 h-4 mr-2"}),f(" "+i(t.$t("Refresh")),1)])])])):(n(),d("div",As,[e("div",Ls,[c(v,{class:"w-8 h-8 text-slate-400"})]),e("h4",Es,i(t.$t("No AI Suggestions Available")),1),e("p",Vs,i(t.$t("Click the button below to get AI-powered classification suggestions")),1),e("button",{onClick:s[8]||(s[8]=(...x)=>u.getSuggestions&&u.getSuggestions(...x)),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors duration-200"},[c(v,{class:"w-4 h-4 mr-2"}),f(" "+i(t.$t("Get AI Suggestions")),1)])]))])}const Ds=H(ft,[["render",Us]]),js={components:{LoadingButton:_e,Link:fe,Head:be,Icon:ke,SelectEditInput:bt,RichEditor:Re,AIClassificationSuggestions:Ds,DeleteConfirmation:Oe,Edit:J,Eye:Be,Trash2:Fe,Upload:Me,Download:je,File:De,X:Z,Copy:Ue,Star:Ve,ChevronRight:Ee,Loader2:te,Check:$,Printer:Le,Calendar:Ae,Globe:Te,TrendingUp:Se,Zap:Ie,Tag:Ce,User:we,Clock:W,AlertTriangle:ve,AlertCircle:ee,Sparkles:se},layout:xe,props:{title:String,ticket:Object,priorities:Array,statuses:Array,types:Array,departments:Array,all_categories:{required:!1},customers:Array,usersExceptCustomers:Array,attachments:Array,comments:Array,auth:Object,entries:Object,hidden_fields:Object},remember:!1,data(){var t,s;return{user:this.$page.props.auth.user,type_status:[],categories:this.all_categories.filter(r=>r.department_id===this.ticket.department_id),sub_categories:this.all_categories.filter(r=>r.parent_id===this.ticket.category_id),enableEditor:!1,user_access:((s=(t=this.$page.props.auth)==null?void 0:t.user)==null?void 0:s.access)||{},tagsInput:"",showDeleteModal:!1,deleteConfig:{title:"Are you sure?",message:"This action cannot be undone.",itemName:"this item",itemType:"item",deleteUrl:"",deleteMethod:"delete",deleteData:{},confirmButtonText:"Delete",cancelButtonText:"Cancel"},form:this.$inertia.form({user_id:this.ticket.user_id,priority_id:this.ticket.priority_id,status_id:this.ticket.status_id,department_id:this.ticket.department_id,category_id:this.ticket.category_id??null,sub_category_id:this.ticket.sub_category_id,assigned_to:this.ticket.assigned_to,type_id:this.ticket.type_id,subject:this.ticket.subject,details:this.ticket.details,resolution:this.ticket.resolution||"",due_date:this.ticket.due_date?P(this.ticket.due_date).format("YYYY-MM-DDTHH:mm"):null,estimated_hours:this.ticket.estimated_hours||"",actual_hours:this.ticket.actual_hours||"",impact_level:this.ticket.impact_level||"",urgency_level:this.ticket.urgency_level||"",source:this.ticket.source||"web",tags:this.ticket.tags||[],files:this.ticket.files,comment:"",removedFiles:[],rating:0,review:""}),autoSaveStatus:"idle",isFavorited:!1,autoSaveTimeout:null,hasUnsavedChanges:!1,activeTab:"basic",localUsers:[...this.usersExceptCustomers],isLoadingUsers:!1}},watch:{"form.department_id":function(t){this.getCategories(t),this.getAssignees(t)}},created(){this.auth&&this.auth.user&&this.auth.user.role&&this.auth.user.role.slug==="customer"&&this.statuses.length?this.type_status=this.statuses.filter(t=>t.id===this.form.status_id||t.name.match(/Close.*/)):this.type_status=this.statuses,this.moment=P,this.tagsInput=this.form.tags.join(", "),this.form.department_id&&this.getAssignees()},computed:{isAdmin(){return this.user&&this.user.role&&["admin","manager","agent"].includes(this.user.role.slug)}},methods:{handleSuggestionApplied(t){console.log("AI suggestion applied:",t),t.field==="priority"?this.form.priority_id=t.suggestion.id:t.field==="category"?this.form.category_id=t.suggestion.id:t.field==="department"?this.form.department_id=t.suggestion.id:t.field==="type"&&(this.form.type_id=t.suggestion.id)},handleClassificationUpdated(){console.log("Classification updated via AI"),this.$inertia.reload({only:["ticket"]})},getCategories(t){const s=t||this.form.department_id;this.ticket.category="N/A",this.form.category_id=null,this.categories=this.all_categories.filter(r=>r.department_id===s)},getAssignees(t){const s=t||this.form.department_id;this.isLoadingUsers=!0,Y.get(this.route("filter.users_except_customer",{department_id:s})).then(r=>{this.localUsers=r.data,this.isLoadingUsers=!1,this.form.assigned_to&&(this.localUsers.find(l=>l.id===this.form.assigned_to)||(this.form.assigned_to=null))}).catch(()=>{this.isLoadingUsers=!1})},getSubCategories(){this.sub_categories=this.all_categories.filter(t=>t.parent_id===this.form.category_id),this.ticket.sub_category="N/A",this.form.sub_category_id=null},doFilter(t){Y.get(this.route("filter.customers",{search:t.target.value})).then(s=>{this.customers.splice(0,this.customers.length,...s.data)})},doFilterUsersExceptCustomer(t){this.isLoadingUsers=!0,Y.get(this.route("filter.users_except_customer",{search:t.target.value,department_id:this.form.department_id})).then(s=>{this.localUsers=s.data,this.isLoadingUsers=!1}).catch(()=>{this.isLoadingUsers=!1})},fileInputChange(t){let s=t.target.files;for(let r=0;r<s.length;r++)this.form.files.push(s[r])},fileRemove(t,s){this.form.files.splice(s,1)},fileBrowse(){this.$refs.file.click()},downloadAttachment(t){const s=document.createElement("a");s.href=window.location.origin+"/files/"+t.path,s.download=t.name,s.click()},removeAttachment(t,s){this.attachments.splice(s,1),this.form.removedFiles.push(t.id)},getFileSize(t){const s=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,s)).toFixed(2)*1+" "+["B","KB","MB","GB","TB"][s]},update(){const t={...this.form.data()},s=this.ticket.due_date?P(this.ticket.due_date).format("YYYY-MM-DDTHH:mm"):null;t.due_date===s&&delete t.due_date,this.$inertia.form(t).post(this.route("tickets.update",this.ticket.id)),this.form.files=[],this.form.comment=""},destroy(){this.showDeleteConfirmation({title:"Delete Ticket",message:"This action cannot be undone.",itemName:`Ticket #${this.ticket.uid}`,itemType:"ticket",deleteUrl:this.route("tickets.destroy",this.ticket.id),deleteMethod:"delete"})},showDeleteConfirmation(t){this.deleteConfig={...this.deleteConfig,...t},this.showDeleteModal=!0},hideDeleteConfirmation(){this.showDeleteModal=!1},confirmDelete(){this.hideDeleteConfirmation()},updateTags(){this.form.tags=this.tagsInput.split(",").map(t=>t.trim()).filter(t=>t.length>0)},removeTag(t){this.form.tags=this.form.tags.filter(s=>s!==t),this.tagsInput=this.form.tags.join(", ")},copyTicketId(){navigator.clipboard.writeText(`#${this.ticket.uid}`)},toggleFavorite(){this.isFavorited=!this.isFavorited},previewChanges(){console.log("Preview changes:",this.form.data())},printTicket(){window.print()},getStatusClass(t){var r;if(!t)return"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300";const s=((r=t.name)==null?void 0:r.toLowerCase())||t.toLowerCase();return s.includes("open")||s.includes("new")?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300":s.includes("pending")||s.includes("waiting")?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":s.includes("closed")||s.includes("resolved")?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":s.includes("cancelled")||s.includes("cancelled")?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"},getPriorityClass(t){if(!t)return"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300";const s=t.toLowerCase();return s.includes("high")||s.includes("urgent")?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300":s.includes("medium")||s.includes("normal")?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":s.includes("low")?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"},getImpactClass(t){return{critical:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",high:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",low:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"}[t]||"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"},getUrgencyClass(t){return{critical:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",high:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",low:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"}[t]||"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"},getStatusDotClass(t){var r;if(!t)return"bg-slate-400";const s=((r=t.name)==null?void 0:r.toLowerCase())||t.toLowerCase();return s.includes("open")||s.includes("new")?"bg-blue-500":s.includes("pending")||s.includes("waiting")?"bg-yellow-500":s.includes("closed")||s.includes("resolved")?"bg-green-500":s.includes("cancelled")||s.includes("cancelled")?"bg-red-500":"bg-slate-400"},getPriorityDotClass(t){if(!t)return"bg-slate-400";const s=t.toLowerCase();return s.includes("high")||s.includes("urgent")?"bg-red-500":s.includes("medium")||s.includes("normal")?"bg-yellow-500":s.includes("low")?"bg-green-500":"bg-slate-400"}}},Ms={class:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",role:"main","aria-label":"Edit Ticket"},Fs={class:"relative overflow-hidden"},Bs={class:"relative bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm border-b border-slate-200/30 dark:border-slate-700/30"},Ns={class:"px-6 py-3"},Rs={class:"flex items-center space-x-2 text-sm"},Os={class:"text-slate-900 dark:text-white font-medium"},Ps={class:"relative bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl border-b border-slate-200/50 dark:border-slate-700/50"},Ys={class:"px-6 py-6"},Hs={class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6"},Qs={class:"flex-1"},zs={class:"flex items-start gap-4 mb-4"},Ks={class:"relative"},Xs={class:"w-14 h-14 bg-gradient-to-br from-orange-500 via-orange-600 to-red-600 rounded-2xl flex items-center justify-center shadow-lg shadow-orange-500/25"},qs={key:0,class:"absolute -top-2 -right-2 w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center shadow-lg animate-pulse"},Gs={key:1,class:"absolute -top-2 -right-2 w-7 h-7 bg-green-500 rounded-full flex items-center justify-center shadow-lg"},Zs={class:"flex-1"},Js={class:"flex items-center gap-3 mb-2"},Ws={class:"text-3xl font-bold bg-gradient-to-r from-slate-900 via-orange-900 to-red-900 dark:from-white dark:via-orange-100 dark:to-red-100 bg-clip-text text-transparent"},$s=["title"],el={class:"text-slate-600 dark:text-slate-400 text-lg leading-relaxed"},tl={class:"flex flex-wrap items-center gap-4 mt-3 text-sm text-slate-500 dark:text-slate-400"},sl={class:"flex items-center gap-1"},ll={key:1,class:"flex items-center gap-1"},il={class:"capitalize"},rl={class:"flex items-center gap-1"},ol={class:"flex flex-wrap gap-3"},al={key:2,class:"inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300"},dl={class:"flex flex-col sm:flex-row gap-3"},nl={class:"flex gap-2"},cl={class:"px-6 py-6"},ul={key:0,class:"mb-6"},gl={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ml={class:"lg:col-span-2 space-y-6"},hl={class:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-lg border border-slate-200/50 dark:border-slate-700/50 overflow-hidden"},bl={class:"px-6 py-4 bg-gradient-to-r from-slate-50 to-slate-100/50 dark:from-slate-700/50 dark:to-slate-800/50 border-b border-slate-200 dark:border-slate-700"},fl={class:"text-xl font-semibold text-slate-900 dark:text-white"},kl={class:"p-6 space-y-6"},xl={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},_l=["disabled"],pl={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},yl={class:"flex items-center justify-between mb-2"},vl={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},wl=["innerHTML"],Cl={key:1},Il={class:"flex justify-end mt-2"},Sl={key:2,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Tl={key:0},Al={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Ll={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},El={class:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-lg border border-slate-200/50 dark:border-slate-700/50 overflow-hidden"},Vl={class:"px-6 py-4 bg-gradient-to-r from-slate-50 to-slate-100/50 dark:from-slate-700/50 dark:to-slate-800/50 border-b border-slate-200 dark:border-slate-700"},Ul={class:"text-xl font-semibold text-slate-900 dark:text-white"},Dl={class:"p-6"},jl={key:0,class:"mb-6"},Ml={key:1,class:"space-y-3"},Fl={class:"flex items-center gap-3"},Bl={class:"text-sm font-medium text-slate-900 dark:text-white"},Nl={class:"text-xs text-slate-500 dark:text-slate-400"},Rl={class:"flex items-center gap-2"},Ol=["onClick"],Pl=["onClick"],Yl={key:2,class:"space-y-3 mt-4"},Hl={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},Ql={class:"flex items-center gap-3"},zl={class:"text-sm font-medium text-slate-900 dark:text-white"},Kl={class:"text-xs text-slate-500 dark:text-slate-400"},Xl=["onClick"],ql={class:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-lg border border-slate-200/50 dark:border-slate-700/50 overflow-hidden"},Gl={class:"px-6 py-4 bg-gradient-to-r from-slate-50 to-slate-100/50 dark:from-slate-700/50 dark:to-slate-800/50 border-b border-slate-200 dark:border-slate-700"},Zl={class:"text-xl font-semibold text-slate-900 dark:text-white"},Jl={class:"p-6"},Wl={key:0,class:"space-y-4 mb-6"},$l={class:"flex-shrink-0"},ei={class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center"},ti={class:"text-white font-medium text-sm"},si={class:"flex-1 min-w-0"},li={class:"flex items-center gap-2 mb-2"},ii={class:"text-sm font-medium text-slate-900 dark:text-white"},ri={class:"text-xs text-slate-500 dark:text-slate-400"},oi=["innerHTML"],ai={key:1},di={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},ni={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ci={class:"space-y-6"},ui={class:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-lg border border-slate-200/50 dark:border-slate-700/50 overflow-hidden"},gi={class:"px-6 py-4 bg-gradient-to-r from-slate-50 to-slate-100/50 dark:from-slate-700/50 dark:to-slate-800/50 border-b border-slate-200 dark:border-slate-700"},mi={class:"text-lg font-semibold text-slate-900 dark:text-white"},hi={class:"p-6 space-y-4"},bi={key:0},fi={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},ki={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},xi={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},_i={key:1},pi={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},yi={key:2},vi={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},wi={key:3},Ci={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Ii={key:4},Si={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Ti={key:5},Ai={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Li={class:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-lg border border-slate-200/50 dark:border-slate-700/50 overflow-hidden"},Ei={class:"px-6 py-4 bg-gradient-to-r from-slate-50 to-slate-100/50 dark:from-slate-700/50 dark:to-slate-800/50 border-b border-slate-200 dark:border-slate-700"},Vi={class:"text-lg font-semibold text-slate-900 dark:text-white"},Ui={class:"p-6 space-y-4"},Di={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},ji=["disabled"],Mi={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Fi=["disabled"],Bi={value:""},Ni={value:"low"},Ri={value:"medium"},Oi={value:"high"},Pi={value:"critical"},Yi={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Hi=["disabled"],Qi={value:""},zi={value:"low"},Ki={value:"medium"},Xi={value:"high"},qi={value:"critical"},Gi={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Zi=["disabled"],Ji={value:"web"},Wi={value:"email"},$i={value:"phone"},er={value:"chat"},tr={value:"api"},sr={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},lr=["placeholder","disabled"],ir={key:0,class:"flex flex-wrap gap-2 mt-2"},rr=["onClick"],or={class:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-lg border border-slate-200/50 dark:border-slate-700/50 overflow-hidden"},ar={class:"px-6 py-4 bg-gradient-to-r from-slate-50 to-slate-100/50 dark:from-slate-700/50 dark:to-slate-800/50 border-b border-slate-200 dark:border-slate-700"},dr={class:"text-lg font-semibold text-slate-900 dark:text-white"},nr={class:"p-6 space-y-4"},cr={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},ur=["disabled"],gr={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},mr=["disabled"],hr={class:"flex justify-end gap-4"};function br(t,s,r,u,l,a){var X,q;const v=h("Head"),y=h("Link"),C=h("ChevronRight"),m=h("Edit",!0),p=h("Loader2"),S=h("Check"),x=h("Copy"),B=h("Calendar"),b=h("Clock"),_=h("Globe"),E=h("User"),M=h("TrendingUp"),le=h("Zap"),ie=h("Tag"),re=h("Star"),Q=h("Eye"),oe=h("Printer"),z=h("Trash2"),ae=h("AIClassificationSuggestions"),N=h("RichEditor"),R=h("X"),de=h("Upload"),K=h("File"),ne=h("Download"),I=h("select-edit-input"),ce=h("loading-button"),ue=h("DeleteConfirmation");return n(),d("div",Ms,[c(v,{title:t.$t(r.title)},null,8,["title"]),e("div",Fs,[s[30]||(s[30]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-600/5 via-purple-600/5 to-indigo-600/5 dark:from-blue-400/10 dark:via-purple-400/10 dark:to-indigo-400/10"},null,-1)),e("div",Bs,[e("div",Ns,[e("nav",Rs,[c(y,{href:t.route("tickets"),class:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-colors"},{default:L(()=>[f(i(t.$t("Tickets")),1)]),_:1},8,["href"]),c(C,{class:"w-4 h-4 text-slate-400"}),c(y,{href:t.route("tickets.show",r.ticket.uid),class:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-colors"},{default:L(()=>[f(" #"+i(r.ticket.uid),1)]),_:1},8,["href"]),c(C,{class:"w-4 h-4 text-slate-400"}),e("span",Os,i(t.$t("Edit")),1)])])]),e("div",Ps,[e("div",Ys,[e("div",Hs,[e("div",Qs,[e("div",zs,[e("div",Ks,[e("div",Xs,[c(m,{class:"w-7 h-7 text-white"})]),l.autoSaveStatus==="saving"?(n(),d("div",qs,[c(p,{class:"w-4 h-4 text-white animate-spin"})])):l.autoSaveStatus==="saved"?(n(),d("div",Gs,[c(S,{class:"w-4 h-4 text-white"})])):g("",!0)]),e("div",Zs,[e("div",Js,[e("h1",Ws,i(t.$t("Edit Ticket"))+" #"+i(r.ticket.uid),1),e("button",{onClick:s[0]||(s[0]=(...o)=>a.copyTicketId&&a.copyTicketId(...o)),class:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:t.$t("Copy Ticket ID")},[c(x,{class:"w-4 h-4"})],8,$s)]),e("p",el,i(r.ticket.subject),1),e("div",tl,[e("div",sl,[c(B,{class:"w-4 h-4"}),e("span",null,i(t.$t("Created"))+" "+i(t.moment(r.ticket.created_at).format("MMM D, YYYY")),1)]),r.ticket.due_date?(n(),d("div",{key:0,class:k(["flex items-center gap-1",r.ticket.is_overdue?"text-red-500":"text-slate-500"])},[c(b,{class:"w-4 h-4"}),e("span",null,i(t.$t("Due"))+" "+i(t.moment(r.ticket.due_date).format("MMM D, YYYY")),1)],2)):g("",!0),r.ticket.source?(n(),d("div",ll,[c(_,{class:"w-4 h-4"}),e("span",il,i(r.ticket.source),1)])):g("",!0),e("div",rl,[c(E,{class:"w-4 h-4"}),e("span",null,i(t.$t("Last modified"))+" "+i(t.moment(r.ticket.updated_at).fromNow()),1)])])])]),e("div",ol,[e("span",{class:k(["inline-flex items-center px-4 py-2 rounded-full text-sm font-medium shadow-sm",a.getStatusClass(r.ticket.status)])},[e("div",{class:k(["w-2 h-2 rounded-full mr-2",a.getStatusDotClass(r.ticket.status)])},null,2),f(" "+i(((X=r.ticket.status)==null?void 0:X.name)||"N/A"),1)],2),e("span",{class:k(["inline-flex items-center px-4 py-2 rounded-full text-sm font-medium shadow-sm",a.getPriorityClass(r.ticket.priority)])},[e("div",{class:k(["w-2 h-2 rounded-full mr-2",a.getPriorityDotClass(r.ticket.priority)])},null,2),f(" "+i(r.ticket.priority||"N/A"),1)],2),r.ticket.impact_level?(n(),d("span",{key:0,class:k(["inline-flex items-center px-4 py-2 rounded-full text-sm font-medium shadow-sm",a.getImpactClass(r.ticket.impact_level)])},[c(M,{class:"w-4 h-4 mr-2"}),f(" "+i(t.$t("Impact"))+": "+i(r.ticket.impact_level),1)],2)):g("",!0),r.ticket.urgency_level?(n(),d("span",{key:1,class:k(["inline-flex items-center px-4 py-2 rounded-full text-sm font-medium shadow-sm",a.getUrgencyClass(r.ticket.urgency_level)])},[c(le,{class:"w-4 h-4 mr-2"}),f(" "+i(t.$t("Urgency"))+": "+i(r.ticket.urgency_level),1)],2)):g("",!0),r.ticket.tags&&r.ticket.tags.length?(n(),d("span",al,[c(ie,{class:"w-4 h-4 mr-2"}),f(" "+i(r.ticket.tags.length)+" "+i(t.$t("tags")),1)])):g("",!0)])]),e("div",dl,[e("div",nl,[e("button",{onClick:s[1]||(s[1]=(...o)=>a.toggleFavorite&&a.toggleFavorite(...o)),class:k(["p-2 rounded-lg transition-colors",l.isFavorited?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-400 dark:hover:bg-slate-600"])},[c(re,{class:k([l.isFavorited?"fill-current":"","w-4 h-4"])},null,8,["class"])],2),e("button",{onClick:s[2]||(s[2]=(...o)=>a.previewChanges&&a.previewChanges(...o)),class:"p-2 rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-400 dark:hover:bg-slate-600 transition-colors"},[c(Q,{class:"w-4 h-4"})]),e("button",{onClick:s[3]||(s[3]=(...o)=>a.printTicket&&a.printTicket(...o)),class:"p-2 rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-400 dark:hover:bg-slate-600 transition-colors"},[c(oe,{class:"w-4 h-4"})])]),c(y,{href:t.route("tickets.show",r.ticket.uid),class:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg font-medium transition-colors duration-200"},{default:L(()=>[c(Q,{class:"w-4 h-4"}),e("span",null,i(t.$t("View Ticket")),1)]),_:1},8,["href"]),l.user_access.ticket.delete?(n(),d("button",{key:0,onClick:s[4]||(s[4]=(...o)=>a.destroy&&a.destroy(...o)),class:"inline-flex items-center gap-2 px-4 py-2 bg-red-100 dark:bg-red-900/20 hover:bg-red-200 dark:hover:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg font-medium transition-colors duration-200"},[c(z,{class:"w-4 h-4"}),e("span",null,i(t.$t("Delete")),1)])):g("",!0)])])])])]),e("div",cl,[e("form",{onSubmit:s[29]||(s[29]=T((...o)=>a.update&&a.update(...o),["prevent"])),class:"space-y-6"},[a.isAdmin?(n(),d("div",ul,[c(ae,{"ticket-id":r.ticket.id,"current-classification":{priority:r.ticket.priority_id,category:r.ticket.category_id,department:r.ticket.department_id,type:r.ticket.type_id},onSuggestionApplied:a.handleSuggestionApplied,onClassificationUpdated:a.handleClassificationUpdated},null,8,["ticket-id","current-classification","onSuggestionApplied","onClassificationUpdated"])])):g("",!0),e("div",gl,[e("div",ml,[e("div",hl,[e("div",bl,[e("h2",fl,i(t.$t("Basic Information")),1)]),e("div",kl,[e("div",null,[e("label",xl,[f(i(t.$t("Subject"))+" ",1),s[31]||(s[31]=e("span",{class:"text-red-500"},"*",-1))]),w(e("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>l.form.subject=o),type:"text",disabled:!l.user_access.ticket.update||r.ticket.closed,class:k(["w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white disabled:bg-slate-100 dark:disabled:bg-slate-800 disabled:cursor-not-allowed",{"border-red-500":l.form.errors.subject}])},null,10,_l),[[A,l.form.subject]]),l.form.errors.subject?(n(),d("p",pl,i(l.form.errors.subject),1)):g("",!0)]),e("div",null,[e("div",yl,[e("label",vl,[f(i(t.$t("Description"))+" ",1),s[32]||(s[32]=e("span",{class:"text-red-500"},"*",-1))]),!l.enableEditor&&l.user_access.ticket.update&&!r.ticket.closed?(n(),d("button",{key:0,type:"button",onClick:s[6]||(s[6]=o=>l.enableEditor=!0),class:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"},[c(m,{class:"w-4 h-4"}),f(" "+i(t.$t("Edit")),1)])):g("",!0)]),l.enableEditor?g("",!0):(n(),d("div",{key:0,class:"prose dark:prose-invert max-w-none p-4 bg-slate-50 dark:bg-slate-700 rounded-lg",innerHTML:r.ticket.details},null,8,wl)),l.enableEditor?(n(),d("div",Cl,[c(N,{modelValue:l.form.details,"onUpdate:modelValue":s[7]||(s[7]=o=>l.form.details=o),class:"min-h-[200px]"},null,8,["modelValue"]),e("div",Il,[e("button",{type:"button",onClick:s[8]||(s[8]=o=>l.enableEditor=!1),class:"inline-flex items-center gap-1 text-sm text-slate-600 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"},[c(R,{class:"w-4 h-4"}),f(" "+i(t.$t("Cancel")),1)])])])):g("",!0),l.form.errors.details?(n(),d("p",Sl,i(l.form.errors.details),1)):g("",!0)]),r.ticket.closed?(n(),d("div",Tl,[e("label",Al,i(t.$t("Resolution")),1),c(N,{modelValue:l.form.resolution,"onUpdate:modelValue":s[9]||(s[9]=o=>l.form.resolution=o),class:"min-h-[150px]"},null,8,["modelValue"]),l.form.errors.resolution?(n(),d("p",Ll,i(l.form.errors.resolution),1)):g("",!0)])):g("",!0)])]),e("div",El,[e("div",Vl,[e("h2",Ul,i(t.$t("Attachments")),1)]),e("div",Dl,[l.user_access.ticket.update&&!r.ticket.closed?(n(),d("div",jl,[e("input",{ref:"file",type:"file",accept:".xlsx,.xls,image/*,.doc,.docx,.ppt,.pptx,.txt,.pdf,.zip",class:"hidden",multiple:"",onChange:s[10]||(s[10]=(...o)=>a.fileInputChange&&a.fileInputChange(...o))},null,544),e("button",{type:"button",onClick:s[11]||(s[11]=(...o)=>a.fileBrowse&&a.fileBrowse(...o)),class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/20 hover:bg-blue-200 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg font-medium transition-colors duration-200"},[c(de,{class:"w-4 h-4"}),f(" "+i(t.$t("Attach Files")),1)])])):g("",!0),r.attachments.length?(n(),d("div",Ml,[(n(!0),d(D,null,j(r.attachments,(o,V)=>(n(),d("div",{key:o.id,class:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg"},[e("div",Fl,[c(K,{class:"w-5 h-5 text-slate-400"}),e("div",null,[e("p",Bl,i(o.name),1),e("p",Nl,i(a.getFileSize(o.size))+" â€¢ "+i(o.user?o.user.first_name+" "+o.user.last_name:"Unknown")+" â€¢ "+i(t.moment(o.created_at).format("MMM D, YYYY")),1)])]),e("div",Rl,[e("button",{type:"button",onClick:G=>a.downloadAttachment(o),class:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"},[c(ne,{class:"w-4 h-4"})],8,Ol),l.user_access.ticket.delete&&!r.ticket.closed?(n(),d("button",{key:0,type:"button",onClick:G=>a.removeAttachment(o,V),class:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},[c(z,{class:"w-4 h-4"})],8,Pl)):g("",!0)])]))),128))])):g("",!0),l.form.files.length?(n(),d("div",Yl,[e("h4",Hl,i(t.$t("New Files")),1),(n(!0),d(D,null,j(l.form.files,(o,V)=>(n(),d("div",{key:V,class:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},[e("div",Ql,[c(K,{class:"w-5 h-5 text-blue-400"}),e("div",null,[e("p",zl,i(o.name),1),e("p",Kl,i(a.getFileSize(o.size)),1)])]),e("button",{type:"button",onClick:G=>a.fileRemove(o,V),class:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},[c(R,{class:"w-4 h-4"})],8,Xl)]))),128))])):g("",!0)])]),e("div",ql,[e("div",Gl,[e("h2",Zl,i(t.$t("Comments")),1)]),e("div",Jl,[r.comments.length?(n(),d("div",Wl,[(n(!0),d(D,null,j(r.comments,o=>(n(),d("div",{key:o.id,class:"flex gap-4"},[e("div",$l,[e("div",ei,[e("span",ti,i(o.user?o.user.first_name.charAt(0):"U"),1)])]),e("div",si,[e("div",li,[e("h4",ii,i(o.user?o.user.first_name+" "+o.user.last_name:"Unknown User"),1),e("span",ri,i(t.moment(o.created_at).fromNow()),1)]),e("div",{class:"prose dark:prose-invert max-w-none text-sm",innerHTML:o.details},null,8,oi)])]))),128))])):g("",!0),l.user_access.ticket.update&&!r.ticket.closed?(n(),d("div",ai,[e("label",di,i(t.$t("Add Comment")),1),c(N,{modelValue:l.form.comment,"onUpdate:modelValue":s[12]||(s[12]=o=>l.form.comment=o),class:"min-h-[100px]"},null,8,["modelValue"]),l.form.errors.comment?(n(),d("p",ni,i(l.form.errors.comment),1)):g("",!0)])):g("",!0)])])]),e("div",ci,[e("div",ui,[e("div",gi,[e("h2",mi,i(t.$t("Properties")),1)]),e("div",hi,[r.auth.user.role.slug!=="customer"?(n(),d("div",bi,[e("label",fi,i(t.$t("Customer")),1),c(I,{placeholder:"Search customer",onInput:a.doFilter,items:r.customers,modelValue:l.form.user_id,"onUpdate:modelValue":s[13]||(s[13]=o=>l.form.user_id=o),error:l.form.errors.user_id,editable:l.user_access.ticket.update&&!r.ticket.closed,value:r.ticket.user,class:"w-full"},null,8,["onInput","items","modelValue","error","editable","value"])])):g("",!0),e("div",null,[e("label",ki,i(t.$t("Priority")),1),c(I,{placeholder:"Search priority",items:r.priorities,modelValue:l.form.priority_id,"onUpdate:modelValue":s[14]||(s[14]=o=>l.form.priority_id=o),error:l.form.errors.priority_id,editable:l.user_access.ticket.update&&!r.ticket.closed,value:r.ticket.priority,class:"w-full"},null,8,["items","modelValue","error","editable","value"])]),e("div",null,[e("label",xi,i(t.$t("Status")),1),c(I,{placeholder:"Select status",items:r.statuses,modelValue:l.form.status_id,"onUpdate:modelValue":s[15]||(s[15]=o=>l.form.status_id=o),error:l.form.errors.status_id,editable:r.auth.user.role.slug!=="customer"&&l.user_access.ticket.update&&!r.ticket.closed,value:((q=r.ticket.status)==null?void 0:q.name)||"N/A",class:"w-full"},null,8,["items","modelValue","error","editable","value"])]),r.auth.user.role.slug!=="customer"&&!(r.hidden_fields&&r.hidden_fields.includes("assigned_to"))?(n(),d("div",_i,[e("label",pi,i(t.$t("Assigned to")),1),c(I,{"is-loading":l.isLoadingUsers,placeholder:"Search user",onInput:a.doFilterUsersExceptCustomer,items:l.localUsers,modelValue:l.form.assigned_to,"onUpdate:modelValue":s[16]||(s[16]=o=>l.form.assigned_to=o),error:l.form.errors.assigned_to,editable:l.user_access.ticket.update&&!r.ticket.closed,value:r.ticket.assigned_user||"Not Assigned",class:"w-full"},null,8,["is-loading","onInput","items","modelValue","error","editable","value"])])):g("",!0),r.hidden_fields&&r.hidden_fields.includes("ticket_type")?g("",!0):(n(),d("div",yi,[e("label",vi,i(t.$t("Type")),1),c(I,{placeholder:"Search type",items:r.types,modelValue:l.form.type_id,"onUpdate:modelValue":s[17]||(s[17]=o=>l.form.type_id=o),error:l.form.errors.type_id,editable:l.user_access.ticket.update&&!r.ticket.closed,value:r.ticket.type,class:"w-full"},null,8,["items","modelValue","error","editable","value"])])),r.hidden_fields&&r.hidden_fields.includes("department")?g("",!0):(n(),d("div",wi,[e("label",Ci,i(t.$t("Department")),1),c(I,{placeholder:"Search department",items:r.departments,modelValue:l.form.department_id,"onUpdate:modelValue":s[18]||(s[18]=o=>l.form.department_id=o),error:l.form.errors.department_id,editable:l.user_access.ticket.update&&!r.ticket.closed,value:r.ticket.department,class:"w-full"},null,8,["items","modelValue","error","editable","value"])])),!(r.hidden_fields&&r.hidden_fields.includes("category"))&&l.form.department_id?(n(),d("div",Ii,[e("label",Si,i(t.$t("Category")),1),c(I,{ref:"category",onChange:a.getSubCategories,placeholder:"Search category",items:l.categories,modelValue:l.form.category_id,"onUpdate:modelValue":s[19]||(s[19]=o=>l.form.category_id=o),error:l.form.errors.category_id,editable:l.user_access.ticket.update&&!r.ticket.closed,value:r.ticket.category,class:"w-full"},null,8,["onChange","items","modelValue","error","editable","value"])])):g("",!0),!(r.hidden_fields&&r.hidden_fields.includes("category"))&&l.form.category_id?(n(),d("div",Ti,[e("label",Ai,i(t.$t("Sub Category")),1),c(I,{ref:"sub_category",placeholder:"Search sub category",items:l.sub_categories,modelValue:l.form.sub_category_id,"onUpdate:modelValue":s[20]||(s[20]=o=>l.form.sub_category_id=o),error:l.form.errors.sub_category_id,editable:l.user_access.ticket.update&&!r.ticket.closed,value:r.ticket.sub_category,class:"w-full"},null,8,["items","modelValue","error","editable","value"])])):g("",!0)])]),e("div",Li,[e("div",Ei,[e("h2",Vi,i(t.$t("Additional Details")),1)]),e("div",Ui,[e("div",null,[e("label",Di,i(t.$t("Due Date")),1),w(e("input",{"onUpdate:modelValue":s[21]||(s[21]=o=>l.form.due_date=o),type:"datetime-local",disabled:!l.user_access.ticket.update||r.ticket.closed,class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white disabled:bg-slate-100 dark:disabled:bg-slate-800 disabled:cursor-not-allowed"},null,8,ji),[[A,l.form.due_date]])]),e("div",null,[e("label",Mi,i(t.$t("Impact Level")),1),w(e("select",{"onUpdate:modelValue":s[22]||(s[22]=o=>l.form.impact_level=o),disabled:!l.user_access.ticket.update||r.ticket.closed,class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white disabled:bg-slate-100 dark:disabled:bg-slate-800 disabled:cursor-not-allowed"},[e("option",Bi,i(t.$t("Select Impact Level")),1),e("option",Ni,i(t.$t("Low")),1),e("option",Ri,i(t.$t("Medium")),1),e("option",Oi,i(t.$t("High")),1),e("option",Pi,i(t.$t("Critical")),1)],8,Fi),[[O,l.form.impact_level]])]),e("div",null,[e("label",Yi,i(t.$t("Urgency Level")),1),w(e("select",{"onUpdate:modelValue":s[23]||(s[23]=o=>l.form.urgency_level=o),disabled:!l.user_access.ticket.update||r.ticket.closed,class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white disabled:bg-slate-100 dark:disabled:bg-slate-800 disabled:cursor-not-allowed"},[e("option",Qi,i(t.$t("Select Urgency Level")),1),e("option",zi,i(t.$t("Low")),1),e("option",Ki,i(t.$t("Medium")),1),e("option",Xi,i(t.$t("High")),1),e("option",qi,i(t.$t("Critical")),1)],8,Hi),[[O,l.form.urgency_level]])]),e("div",null,[e("label",Gi,i(t.$t("Source")),1),w(e("select",{"onUpdate:modelValue":s[24]||(s[24]=o=>l.form.source=o),disabled:!l.user_access.ticket.update||r.ticket.closed,class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white disabled:bg-slate-100 dark:disabled:bg-slate-800 disabled:cursor-not-allowed"},[e("option",Ji,i(t.$t("Web")),1),e("option",Wi,i(t.$t("Email")),1),e("option",$i,i(t.$t("Phone")),1),e("option",er,i(t.$t("Chat")),1),e("option",tr,i(t.$t("API")),1)],8,Zi),[[O,l.form.source]])]),e("div",null,[e("label",sr,i(t.$t("Tags")),1),w(e("input",{"onUpdate:modelValue":s[25]||(s[25]=o=>l.tagsInput=o),type:"text",placeholder:t.$t("Enter tags separated by commas"),disabled:!l.user_access.ticket.update||r.ticket.closed,onBlur:s[26]||(s[26]=(...o)=>a.updateTags&&a.updateTags(...o)),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white disabled:bg-slate-100 dark:disabled:bg-slate-800 disabled:cursor-not-allowed"},null,40,lr),[[A,l.tagsInput]]),l.form.tags&&l.form.tags.length?(n(),d("div",ir,[(n(!0),d(D,null,j(l.form.tags,o=>(n(),d("span",{key:o,class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-full text-xs"},[f(i(o)+" ",1),l.user_access.ticket.update&&!r.ticket.closed?(n(),d("button",{key:0,type:"button",onClick:V=>a.removeTag(o),class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200"},[c(R,{class:"w-3 h-3"})],8,rr)):g("",!0)]))),128))])):g("",!0)])])]),e("div",or,[e("div",ar,[e("h2",dr,i(t.$t("Time Tracking")),1)]),e("div",nr,[e("div",null,[e("label",cr,i(t.$t("Estimated Hours")),1),w(e("input",{"onUpdate:modelValue":s[27]||(s[27]=o=>l.form.estimated_hours=o),type:"number",step:"0.1",min:"0",disabled:!l.user_access.ticket.update||r.ticket.closed,class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white disabled:bg-slate-100 dark:disabled:bg-slate-800 disabled:cursor-not-allowed"},null,8,ur),[[A,l.form.estimated_hours]])]),e("div",null,[e("label",gr,i(t.$t("Actual Hours")),1),w(e("input",{"onUpdate:modelValue":s[28]||(s[28]=o=>l.form.actual_hours=o),type:"number",step:"0.1",min:"0",disabled:!l.user_access.ticket.update||r.ticket.closed,class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white disabled:bg-slate-100 dark:disabled:bg-slate-800 disabled:cursor-not-allowed"},null,8,mr),[[A,l.form.actual_hours]])])])])])]),e("div",hr,[c(y,{href:t.route("tickets.show",r.ticket.uid),class:"px-6 py-3 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 font-medium transition-colors duration-200"},{default:L(()=>[f(i(t.$t("Cancel")),1)]),_:1},8,["href"]),c(ce,{loading:l.form.processing,class:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl"},{default:L(()=>[f(i(t.$t("Save Changes")),1)]),_:1},8,["loading"])])],32)]),c(ue,{show:l.showDeleteModal,title:l.deleteConfig.title,message:l.deleteConfig.message,"item-name":l.deleteConfig.itemName,"item-type":l.deleteConfig.itemType,"delete-url":l.deleteConfig.deleteUrl,"delete-method":l.deleteConfig.deleteMethod,"delete-data":l.deleteConfig.deleteData,"confirm-button-text":l.deleteConfig.confirmButtonText,"cancel-button-text":l.deleteConfig.cancelButtonText,onClose:a.hideDeleteConfirmation,onConfirm:a.confirmDelete},null,8,["show","title","message","item-name","item-type","delete-url","delete-method","delete-data","confirm-button-text","cancel-button-text","onClose","onConfirm"])])}const Ar=H(js,[["render",br]]);export{Ar as default};
