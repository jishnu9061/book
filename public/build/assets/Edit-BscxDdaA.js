import{C as B,X as E,D as a,l as i,u as d,m as l,o as s,z as u,G as c,y as b,J as N,F as p,t as _,A as y}from"./vendor-LkufkiF7.js";import{_ as S}from"./DeleteConfirmation-CLnw7UU1.js";import{L as w}from"./Layout-B-7SKJ8y.js";import{T as A}from"./TextInput-BYPeFz6K.js";import{F as M}from"./FileInput-LaJfiilz.js";import{S as j}from"./SelectInput-BezpKrUW.js";import{L as F}from"./LoadingButton-DNgtCulM.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Eye as H,LucideSave as I,LucideTrash2 as O,ArrowLeft as R}from"./ui-DZ0wy3Ge.js";import"./utils-Cv2kkzzw.js";import"./LogoutButton-C42r2dkh.js";import"./app-DgNNGg9T.js";import"./Logo-CwTRbPbO.js";import"./FlashMessages-Bge5XBye.js";const z={layout:w,components:{FileInput:M,Layout:w,Head:E,Link:B,LoadingButton:F,SelectInput:j,TextInput:A,ArrowLeft:R,Trash2:O,Save:I,Eye:H,DeleteConfirmation:S},props:{auth:Object,countries:Array,user:Object,roles:Array,cities:Array,departments:Array,title:String},remember:"form",data(){var t,r;return{user_access:((r=(t=this.$page.props.auth)==null?void 0:t.user)==null?void 0:r.access)||{},form:this.$inertia.form({_method:"put",first_name:this.user.first_name,last_name:this.user.last_name,email:this.user.email,phone:this.user.phone,city:this.user.city,address:this.user.address,country_id:this.user.country_id,password:"",role:this.user.role,role_id:this.user.role_id,department_id:this.user.department_id,photo:null}),showDeleteModal:!1,deleteConfig:{title:"Are you sure?",message:"This action cannot be undone.",itemName:"this item",itemType:"item",deleteUrl:"",deleteMethod:"delete",deleteData:{},confirmButtonText:"Delete",cancelButtonText:"Cancel"}}},computed:{showDepartment(){if(!this.form.role_id)return this.user.role&&["manager","general"].includes(this.user.role.slug);const t=this.roles.find(r=>r.id===this.form.role_id);return t&&["manager","general"].includes(t.slug)}},watch:{"form.role_id"(t){this.showDepartment||(this.form.department_id=null)}},methods:{setDefaultValue(t,r,n){const h=t.find(e=>e.name.match(new RegExp(n+".*")));h&&(this.form[r]=h.id)},showDeleteConfirmation(t,r=null){Object.assign(this.deleteConfig,t),this.showDeleteModal=!0,r&&(this.deleteConfig.onConfirmCallback=r)},hideDeleteConfirmation(){this.showDeleteModal=!1,this.deleteConfig.onConfirmCallback=null},confirmDelete(){this.deleteConfig.onConfirmCallback&&this.deleteConfig.onConfirmCallback(),this.hideDeleteConfirmation()},update(){this.form.post(this.route("users.update",this.user.id),{onSuccess:()=>this.form.reset("password","photo")})},restore(){confirm("Are you sure you want to restore this user?")&&this.$inertia.put(route("users.restore",this.user.id))},destroy(){this.showDeleteConfirmation({title:"Delete User",message:"This action cannot be undone.",itemName:this.user.name,itemType:"user",deleteUrl:this.route("users.destroy",this.user.id),deleteMethod:"delete"})}}},G={class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 mb-8"},J={class:"px-6 py-6"},X={class:"flex items-center justify-between"},q={class:"text-2xl font-bold text-slate-900 dark:text-white"},K={class:"mt-1 text-sm text-slate-600 dark:text-slate-400"},Q={class:"flex items-center space-x-3"},W={class:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},Y={class:"p-8 space-y-6"},Z={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},$={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ee={value:null},te=["value"],oe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},re={key:0},le={value:null},se=["value"],ne={key:1},ie={value:null},de=["value"],ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ue={key:0,class:"flex items-center justify-start"},me={class:"relative"},fe=["src"],ce={class:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all duration-200 rounded-full flex items-center justify-center"},pe={class:"px-8 py-6 bg-slate-50 dark:bg-slate-700/50 border-t border-slate-200 dark:border-slate-600 flex items-center justify-between"},he={key:1};function ge(t,r,n,h,e,m){const v=a("Head"),C=a("ArrowLeft"),V=a("Link"),f=a("text-input"),g=a("select-input"),k=a("file-input"),D=a("Eye"),U=a("Trash2"),T=a("Save"),x=a("loading-button"),L=a("DeleteConfirmation");return d(),i(p,null,[l("div",null,[s(v,{title:n.title},null,8,["title"]),l("div",G,[l("div",J,[l("div",X,[l("div",null,[l("h1",q,u(t.$t("User Management")),1),l("p",K,u(t.$t("Update user information and permissions")),1)]),l("div",Q,[s(V,{href:t.route("users"),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200"},{default:c(()=>[s(C,{class:"w-4 h-4 mr-2"}),b(" "+u(t.$t("Back to Users")),1)]),_:1},8,["href"])])])])]),l("div",W,[l("form",{onSubmit:r[12]||(r[12]=N((...o)=>m.update&&m.update(...o),["prevent"]))},[l("div",Y,[l("div",Z,[l("div",null,[s(f,{modelValue:e.form.first_name,"onUpdate:modelValue":r[0]||(r[0]=o=>e.form.first_name=o),error:e.form.errors.first_name,label:t.$t("First Name"),placeholder:t.$t("Enter first name"),class:"w-full"},null,8,["modelValue","error","label","placeholder"])]),l("div",null,[s(f,{modelValue:e.form.last_name,"onUpdate:modelValue":r[1]||(r[1]=o=>e.form.last_name=o),error:e.form.errors.last_name,label:t.$t("Last Name"),placeholder:t.$t("Enter last name"),class:"w-full"},null,8,["modelValue","error","label","placeholder"])]),l("div",null,[s(f,{modelValue:e.form.email,"onUpdate:modelValue":r[2]||(r[2]=o=>e.form.email=o),error:e.form.errors.email,label:t.$t("Email Address"),placeholder:t.$t("Enter email address"),type:"email",class:"w-full"},null,8,["modelValue","error","label","placeholder"])])]),l("div",$,[l("div",null,[s(f,{modelValue:e.form.phone,"onUpdate:modelValue":r[3]||(r[3]=o=>e.form.phone=o),error:e.form.errors.phone,label:t.$t("Phone Number"),placeholder:t.$t("Enter phone number"),class:"w-full"},null,8,["modelValue","error","label","placeholder"])]),l("div",null,[s(f,{modelValue:e.form.city,"onUpdate:modelValue":r[4]||(r[4]=o=>e.form.city=o),error:e.form.errors.city,label:t.$t("City"),placeholder:t.$t("Enter city"),class:"w-full"},null,8,["modelValue","error","label","placeholder"])]),l("div",null,[s(g,{modelValue:e.form.country_id,"onUpdate:modelValue":r[5]||(r[5]=o=>e.form.country_id=o),error:e.form.errors.country_id,label:t.$t("Country"),class:"w-full"},{default:c(()=>[l("option",ee,u(t.$t("Select country")),1),(d(!0),i(p,null,_(n.countries,o=>(d(),i("option",{key:o.id,value:o.id},u(o.name),9,te))),128))]),_:1},8,["modelValue","error","label"])])]),l("div",null,[s(f,{modelValue:e.form.address,"onUpdate:modelValue":r[6]||(r[6]=o=>e.form.address=o),error:e.form.errors.address,label:t.$t("Address"),placeholder:t.$t("Enter full address"),class:"w-full"},null,8,["modelValue","error","label","placeholder"])]),l("div",oe,[l("div",null,[s(f,{modelValue:e.form.password,"onUpdate:modelValue":r[7]||(r[7]=o=>e.form.password=o),error:e.form.errors.password,type:"password",autocomplete:"new-password",label:t.$t("New Password"),placeholder:t.$t("Leave blank to keep current password"),class:"w-full"},null,8,["modelValue","error","label","placeholder"])]),n.user.id!==n.auth.user.id?(d(),i("div",re,[s(g,{modelValue:e.form.role_id,"onUpdate:modelValue":r[8]||(r[8]=o=>e.form.role_id=o),error:e.form.errors.role,label:t.$t("User Role"),class:"w-full"},{default:c(()=>[l("option",le,u(t.$t("Select role")),1),(d(!0),i(p,null,_(n.roles,o=>(d(),i("option",{key:o.id,value:o.id},u(o.name),9,se))),128))]),_:1},8,["modelValue","error","label"])])):y("",!0),m.showDepartment?(d(),i("div",ne,[s(g,{modelValue:e.form.department_id,"onUpdate:modelValue":r[9]||(r[9]=o=>e.form.department_id=o),error:e.form.errors.department_id,label:t.$t("Department"),class:"w-full"},{default:c(()=>[l("option",ie,u(t.$t("Select department")),1),(d(!0),i(p,null,_(n.departments,o=>(d(),i("option",{key:o.id,value:o.id},u(o.name),9,de))),128))]),_:1},8,["modelValue","error","label"])])):y("",!0)]),l("div",ae,[l("div",null,[s(k,{modelValue:e.form.photo,"onUpdate:modelValue":r[10]||(r[10]=o=>e.form.photo=o),error:e.form.errors.photo,type:"file",accept:"image/*",label:t.$t("Profile Photo"),class:"w-full"},null,8,["modelValue","error","label"])]),n.user.photo_path?(d(),i("div",ue,[l("div",me,[l("img",{src:n.user.photo_path,class:"w-24 h-24 object-cover rounded-full border-2 border-slate-200 dark:border-slate-600"},null,8,fe),l("div",ce,[s(D,{class:"w-6 h-6 text-white opacity-0 hover:opacity-100 transition-opacity duration-200"})])])])):y("",!0)])]),l("div",pe,[n.user.id!==n.auth.user.id&&e.user_access.user.delete?(d(),i("button",{key:0,type:"button",onClick:r[11]||(r[11]=(...o)=>m.destroy&&m.destroy(...o)),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200"},[s(U,{class:"w-4 h-4 mr-2"}),b(" "+u(t.$t("Delete User")),1)])):(d(),i("div",he)),s(x,{loading:e.form.processing,class:"inline-flex items-center px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",type:"submit"},{default:c(()=>[s(T,{class:"w-4 h-4 mr-2"}),b(" "+u(t.$t("Update User")),1)]),_:1},8,["loading"])])],32)])]),s(L,{show:e.showDeleteModal,title:e.deleteConfig.title,message:e.deleteConfig.message,itemName:e.deleteConfig.itemName,itemType:e.deleteConfig.itemType,deleteUrl:e.deleteConfig.deleteUrl,deleteMethod:e.deleteConfig.deleteMethod,deleteData:e.deleteConfig.deleteData,confirmButtonText:e.deleteConfig.confirmButtonText,cancelButtonText:e.deleteConfig.cancelButtonText,onClose:m.hideDeleteConfirmation,onConfirm:m.confirmDelete},null,8,["show","title","message","itemName","itemType","deleteUrl","deleteMethod","deleteData","confirmButtonText","cancelButtonText","onClose","onConfirm"])],64)}const Ee=P(z,[["render",ge]]);export{Ee as default};
