import{L as b}from"./Layout-DdwsTprQ.js";import{T as U}from"./TextInput-BYPeFz6K.js";import{L as N}from"./LoadingButton-DNgtCulM.js";import{X as M,C as A,D as d,l as a,u as n,o as i,m as o,z as l,G as u,y as p,J as E,K as y,A as h,P as x,F as C,t as k,p as j}from"./vendor-LkufkiF7.js";import{_ as P}from"./DeleteConfirmation-CLnw7UU1.js";import{S as H}from"./SelectInput-BezpKrUW.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Info as F,LucideSave as O,LucideTrash2 as q,LucideTag as G,ArrowLeft as J}from"./ui-DZ0wy3Ge.js";import"./LogoutButton-CfMbGx4V.js";import"./app-BMhdMQxL.js";import"./utils-Cv2kkzzw.js";import"./Logo-CwTRbPbO.js";import"./FlashMessages-Bge5XBye.js";const K={layout:b,metaInfo(){return{title:this.form.name||"Edit Category"}},components:{Layout:b,SelectInput:H,LoadingButton:N,TextInput:U,Link:A,Head:M,DeleteConfirmation:P,ArrowLeft:J,Tag:G,Trash2:q,Save:O,Info:F},props:{title:String,category:Object,categories:{type:Array,default:()=>[]},departments:{type:Array,default:()=>[]}},remember:"form",data(){var e,r,c,f,t;return{form:this.$inertia.form({name:((e=this.category)==null?void 0:e.name)||"",description:((r=this.category)==null?void 0:r.description)||"",color:((c=this.category)==null?void 0:c.color)||"#6366f1",department_id:((f=this.category)==null?void 0:f.department_id)||null,parent_id:((t=this.category)==null?void 0:t.parent_id)||null}),showDeleteModal:!1,deleteConfig:{title:"Are you sure?",message:"This action cannot be undone.",itemName:"this item",itemType:"item",deleteUrl:"",deleteMethod:"delete",deleteData:{},confirmButtonText:"Delete",cancelButtonText:"Cancel"}}},computed:{availableParentCategories(){return this.categories?this.categories.filter(e=>{var r;return e.id!==((r=this.category)==null?void 0:r.id)&&!e.parent_id&&e.department_id===this.form.department_id}):[]}},methods:{update(){this.form.put(this.route("categories.update",this.category.id),{onSuccess:()=>{},onError:e=>{console.error("Update error:",e)}})},showDeleteConfirmation(e,r=null){Object.assign(this.deleteConfig,e),this.showDeleteModal=!0,r&&(this.deleteConfig.onConfirmCallback=r)},hideDeleteConfirmation(){this.showDeleteModal=!1,this.deleteConfig.onConfirmCallback=null},confirmDelete(){this.deleteConfig.onConfirmCallback&&this.deleteConfig.onConfirmCallback(),this.hideDeleteConfirmation()},destroy(){this.showDeleteConfirmation({title:this.$t("Delete Category"),message:this.$t("This action cannot be undone. This will also delete all subcategories and reassign their tickets."),itemName:this.category.name,itemType:"category",deleteUrl:this.route("categories.destroy",this.category.id),deleteMethod:"delete",onConfirmCallback:()=>{this.$inertia.delete(this.route("categories.destroy",this.category.id),{onSuccess:()=>{this.$inertia.visit(this.route("categories"))},onError:e=>{console.error("Delete error:",e)}})}})},restore(){confirm(this.$t("Are you sure you want to restore this category?"))&&this.$inertia.put(this.route("categories.restore",this.category.id))}}},X={class:"min-h-screen bg-slate-50 dark:bg-slate-900"},Q={class:"bg-white dark:bg-slate-800 shadow-sm border-b border-slate-200 dark:border-slate-700"},R={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},W={class:"py-6"},Y={class:"flex items-center justify-between"},Z={class:"text-2xl font-bold text-slate-900 dark:text-white"},$={class:"mt-1 text-sm text-slate-500 dark:text-slate-400"},ee={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},te={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},oe={class:"p-8 space-y-6"},re={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},se=["placeholder"],le={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ae={key:0},ne={value:null},de=["value"],me={key:1},ce={value:null},ue=["value"],pe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3"},he={class:"flex items-center gap-4"},fe={class:"flex-1"},ge={class:"mt-1 text-xs text-slate-500 dark:text-slate-400"},_e={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},be={class:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4"},ye={class:"flex items-start gap-3"},xe={class:"text-sm font-medium text-slate-900 dark:text-white mb-1"},Ce={class:"text-sm text-slate-600 dark:text-slate-400"},ke={key:0},ve={key:1},we={key:2},Te={class:"px-8 py-4 bg-slate-50 dark:bg-slate-700/50 border-t border-slate-200 dark:border-slate-600 flex items-center justify-between"},De={class:"flex items-center gap-3"};function Le(e,r,c,f,t,m){const v=d("Head"),w=d("ArrowLeft"),g=d("Link"),T=d("TextInput"),_=d("SelectInput"),D=d("Tag"),L=d("Info"),S=d("Trash2"),V=d("Save"),I=d("LoadingButton"),B=d("DeleteConfirmation");return n(),a("div",X,[i(v,{title:e.$t(c.title)},null,8,["title"]),o("div",Q,[o("div",R,[o("div",W,[o("div",Y,[o("div",null,[o("h1",Z,l(e.$t("Edit Category")),1),o("p",$,l(e.$t("Update category details and settings")),1)]),i(g,{href:e.route("categories"),class:"inline-flex items-center gap-2 px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors duration-200"},{default:u(()=>[i(w,{class:"w-4 h-4"}),p(" "+l(e.$t("Back to Categories")),1)]),_:1},8,["href"])])])])]),o("div",ee,[o("div",te,[o("form",{onSubmit:r[6]||(r[6]=E((...s)=>m.update&&m.update(...s),["prevent"]))},[o("div",oe,[o("div",null,[i(T,{modelValue:t.form.name,"onUpdate:modelValue":r[0]||(r[0]=s=>t.form.name=s),error:t.form.errors.name,label:e.$t("Category Name"),placeholder:e.$t("Enter category name"),required:"",class:"w-full"},null,8,["modelValue","error","label","placeholder"])]),o("div",null,[o("label",re,l(e.$t("Description")),1),y(o("textarea",{"onUpdate:modelValue":r[1]||(r[1]=s=>t.form.description=s),placeholder:e.$t("Enter category description (optional)"),rows:"3",class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white dark:placeholder-slate-400"},null,8,se),[[x,t.form.description]]),t.form.errors.description?(n(),a("p",le,l(t.form.errors.description),1)):h("",!0)]),o("div",ie,[t.form.parent_id?h("",!0):(n(),a("div",ae,[i(_,{modelValue:t.form.department_id,"onUpdate:modelValue":r[2]||(r[2]=s=>t.form.department_id=s),error:t.form.errors.department_id,label:e.$t("Department"),placeholder:e.$t("Select department"),class:"w-full"},{default:u(()=>[o("option",ne,l(e.$t("No Department")),1),(n(!0),a(C,null,k(c.departments,s=>(n(),a("option",{key:s.id,value:s.id},l(s.name),9,de))),128))]),_:1},8,["modelValue","error","label","placeholder"])])),t.form.department_id?h("",!0):(n(),a("div",me,[i(_,{modelValue:t.form.parent_id,"onUpdate:modelValue":r[3]||(r[3]=s=>t.form.parent_id=s),error:t.form.errors.parent_id,label:e.$t("Parent Category"),placeholder:e.$t("Select parent category"),class:"w-full"},{default:u(()=>[o("option",ce,l(e.$t("No Parent")),1),(n(!0),a(C,null,k(m.availableParentCategories,s=>(n(),a("option",{key:s.id,value:s.id},l(s.name),9,ue))),128))]),_:1},8,["modelValue","error","label","placeholder"])]))]),o("div",null,[o("label",pe,l(e.$t("Category Color")),1),o("div",he,[o("div",{class:"w-12 h-12 rounded-lg border-2 border-slate-300 dark:border-slate-600 flex items-center justify-center",style:j({backgroundColor:t.form.color||"#6366f1"})},[i(D,{class:"w-6 h-6 text-white"})],4),o("div",fe,[y(o("input",{"onUpdate:modelValue":r[4]||(r[4]=s=>t.form.color=s),type:"color",class:"w-full h-12 rounded-lg border border-slate-300 dark:border-slate-600 cursor-pointer"},null,512),[[x,t.form.color]]),o("p",ge,l(e.$t("Choose a color to represent this category")),1)])]),t.form.errors.color?(n(),a("p",_e,l(t.form.errors.color),1)):h("",!0)]),o("div",be,[o("div",ye,[i(L,{class:"w-5 h-5 text-blue-500 mt-0.5"}),o("div",null,[o("h4",xe,l(e.$t("Category Type")),1),o("p",Ce,[t.form.parent_id?(n(),a("span",ke,l(e.$t("This is a subcategory. It will be grouped under its parent category.")),1)):t.form.department_id?(n(),a("span",ve,l(e.$t("This is a department-specific category. It will only be available for the selected department.")),1)):(n(),a("span",we,l(e.$t("This is a general category. It will be available for all departments.")),1))])])])])]),o("div",Te,[o("button",{type:"button",onClick:r[5]||(r[5]=(...s)=>m.destroy&&m.destroy(...s)),class:"inline-flex items-center gap-2 px-4 py-2 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200 font-medium"},[i(S,{class:"w-4 h-4"}),p(" "+l(e.$t("Delete Category")),1)]),o("div",De,[i(g,{href:e.route("categories"),class:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors duration-200 font-medium"},{default:u(()=>[p(l(e.$t("Cancel")),1)]),_:1},8,["href"]),i(I,{loading:t.form.processing,type:"submit",class:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200 font-medium shadow-sm hover:shadow-md"},{default:u(()=>[i(V,{class:"w-4 h-4"}),p(" "+l(e.$t("Update Category")),1)]),_:1},8,["loading"])])])],32)])]),i(B,{show:t.showDeleteModal,title:t.deleteConfig.title,message:t.deleteConfig.message,"item-name":t.deleteConfig.itemName,"item-type":t.deleteConfig.itemType,"delete-url":t.deleteConfig.deleteUrl,"delete-method":t.deleteConfig.deleteMethod,"delete-data":t.deleteConfig.deleteData,"confirm-button-text":t.deleteConfig.confirmButtonText,"cancel-button-text":t.deleteConfig.cancelButtonText,onClose:m.hideDeleteConfirmation,onConfirm:m.confirmDelete},null,8,["show","title","message","item-name","item-type","delete-url","delete-method","delete-data","confirm-button-text","cancel-button-text","onClose","onConfirm"])])}const Fe=z(K,[["render",Le]]);export{Fe as default};
