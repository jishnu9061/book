import{D as ie,l as i,u as n,A as k,m as t,z as d,o as v,E as W,F as Z,t as G,M as ke,N as st,p as rt,f as p,e as q,S as at,k as De,T as J,H as ot,U as de,s as lt,G as ze,V as s,X as nt,K as Ne,P as Re,y as pe,J as Ie,C as it,W as Oe,Y as dt}from"./vendor-LkufkiF7.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as ct}from"./Layout-yhAyU3q9.js";import{P as ut}from"./Pagination-BB47_pKn.js";import{a as Ae,h as ht}from"./utils-Cv2kkzzw.js";import{FileAudio as Ve,FilePlay as He,FileImage as Xe,Archive as Pe,LucideMusic as gt,LucideVideo as vt,FileText as qe,Image as mt,File as Ke,LucideX as _e,LucideUpload as ft,LucideZap as Je,LucideStar as We,Clock as ce,Flag as Ze,LucideThumbsUp as Ge,Heart as Ye,LucideSmile as Ue,LucideUser as xe,Camera as bt,EllipsisVertical as Qe,LucideSearch as pt,LucideMessageCircle as ne,LucidePin as xt,LucidePlus as kt,LucideTrash2 as et,LucideReply as _t,Copy as yt,Edit as wt,CheckCheck as Ct,Check as St,LucidePaperclip as Mt,LucideSend as jt}from"./ui-DZ0wy3Ge.js";import{p as tt}from"./pickBy-Z3jOt4S7.js";import{t as Et}from"./throttle-DDfrdyG6.js";import"./LogoutButton-oKW2oLhJ.js";import"./app-BC8evlMS.js";import"./Logo-CwTRbPbO.js";import"./FlashMessages-Bge5XBye.js";const Ft={name:"AttachmentUpload",components:{Upload:ft,X:_e,File:Ke,Image:mt,FileText:qe,Video:vt,Music:gt,Archive:Pe,FileImage:Xe,FileVideo:He,FileAudio:Ve},props:{showAttachmentMenu:{type:Boolean,default:!1},conversationId:{type:[String,Number],required:!0}},emits:["close","files-uploaded"],setup(h,{emit:c}){const f=p(null),r=p(null),S=p(!1),E=p([]),M=p(!1),m=p(0),x=()=>{c("close"),E.value=[],S.value=!1,M.value=!1,m.value=0},_=()=>{r.value.click()},g=()=>{const u=document.createElement("input");u.type="file",u.accept="image/*",u.multiple=!0,u.onchange=j=>y(j),u.click()},y=u=>{const j=Array.from(u.target.files);K(j)},T=u=>{u.preventDefault(),S.value=!1;const j=Array.from(u.dataTransfer.files);K(j)},I=u=>{u.preventDefault()},z=u=>{u.preventDefault(),S.value=!0},N=u=>{u.preventDefault(),f.value.contains(u.relatedTarget)||(S.value=!1)},K=u=>{const j=u.filter(P=>P.size>10485760?(alert(`File ${P.name} is too large. Maximum size is 10MB.`),!1):!0);E.value=[...E.value,...j]};return{dropZone:f,fileInput:r,isDragOver:S,selectedFiles:E,uploading:M,uploadProgress:m,closeMenu:x,triggerFileInput:_,triggerImageInput:g,handleFileSelect:y,handleDrop:T,handleDragOver:I,handleDragEnter:z,handleDragLeave:N,removeFile:u=>{E.value.splice(u,1)},getFileIcon:u=>u.startsWith("image/")?Xe:u.startsWith("video/")?He:u.startsWith("audio/")?Ve:u.includes("pdf")?qe:u.includes("zip")||u.includes("rar")?Pe:Ke,formatFileSize:u=>{if(u===0)return"0 Bytes";const j=1024,P=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(u)/Math.log(j));return parseFloat((u/Math.pow(j,L)).toFixed(2))+" "+P[L]},uploadFiles:async()=>{if(E.value.length!==0){M.value=!0,m.value=0;try{const u=new FormData;u.append("conversation_id",h.conversationId),u.append("_token",document.querySelector('meta[name="csrf-token"]').getAttribute("content")),E.value.forEach((P,L)=>{u.append(`files[${L}]`,P)});const j=await Ae.post("/chat/upload-attachments",u,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:P=>{m.value=Math.round(P.loaded*100/P.total)}});if(j.data.success)c("files-uploaded",j.data.attachments),x();else throw new Error(j.data.message||"Upload failed")}catch(u){console.error("Upload error:",u),alert("Failed to upload files. Please try again.")}finally{M.value=!1,m.value=0}}}}}},$t={class:"relative"},Tt={key:0,class:"absolute bottom-full left-0 mb-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50"},It={class:"px-4 py-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50"},Dt={class:"flex items-center justify-between"},At={class:"text-sm font-semibold text-slate-900 dark:text-white"},Pt={class:"p-4"},Ut={class:"space-y-3"},Lt={class:"w-12 h-12 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto"},Bt={class:"text-sm font-medium text-slate-900 dark:text-white"},zt={class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},Nt={class:"mt-4 grid grid-cols-2 gap-2"},Rt={class:"text-sm text-slate-700 dark:text-slate-300"},Ot={class:"text-sm text-slate-700 dark:text-slate-300"},Vt={key:0,class:"mt-4 space-y-2"},Ht={class:"text-sm font-medium text-slate-900 dark:text-white"},Xt={class:"space-y-2 max-h-32 overflow-y-auto"},qt={class:"w-8 h-8 bg-slate-200 dark:bg-slate-600 rounded flex items-center justify-center flex-shrink-0"},Kt={class:"flex-1 min-w-0"},Jt={class:"text-sm font-medium text-slate-900 dark:text-white truncate"},Wt={class:"text-xs text-slate-500 dark:text-slate-400"},Zt=["onClick"],Gt={key:1,class:"mt-4"},Yt={class:"flex items-center gap-2 mb-2"},Qt={class:"text-sm text-slate-700 dark:text-slate-300"},es={class:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2"},ts={class:"mt-4 flex gap-2"},ss=["disabled"];function as(h,c,f,r,S,E){const M=ie("X"),m=ie("Upload"),x=ie("File"),_=ie("Image");return n(),i("div",$t,[f.showAttachmentMenu?(n(),i("div",Tt,[t("div",It,[t("div",Dt,[t("h3",At,d(h.$t("Attach File")),1),t("button",{onClick:c[0]||(c[0]=(...g)=>r.closeMenu&&r.closeMenu(...g)),class:"p-1 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors duration-200"},[v(M,{class:"w-4 h-4"})])])]),t("div",Pt,[t("div",{ref:"dropZone",onDrop:c[1]||(c[1]=(...g)=>r.handleDrop&&r.handleDrop(...g)),onDragover:c[2]||(c[2]=(...g)=>r.handleDragOver&&r.handleDragOver(...g)),onDragenter:c[3]||(c[3]=(...g)=>r.handleDragEnter&&r.handleDragEnter(...g)),onDragleave:c[4]||(c[4]=(...g)=>r.handleDragLeave&&r.handleDragLeave(...g)),class:W(["border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 cursor-pointer",r.isDragOver?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"]),onClick:c[5]||(c[5]=(...g)=>r.triggerFileInput&&r.triggerFileInput(...g))},[t("div",Ut,[t("div",Lt,[v(m,{class:"w-6 h-6 text-slate-500 dark:text-slate-400"})]),t("div",null,[t("p",Bt,d(r.isDragOver?h.$t("Drop files here"):h.$t("Click to upload or drag & drop")),1),t("p",zt,d(h.$t("Images, documents, videos up to 10MB")),1)])])],34),t("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/*,video/*,.pdf,.doc,.docx,.txt,.zip,.rar",onChange:c[6]||(c[6]=(...g)=>r.handleFileSelect&&r.handleFileSelect(...g)),class:"hidden"},null,544),t("div",Nt,[t("button",{onClick:c[7]||(c[7]=(...g)=>r.triggerFileInput&&r.triggerFileInput(...g)),class:"flex items-center gap-2 p-3 text-left bg-slate-50 dark:bg-slate-700 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors duration-200"},[v(x,{class:"w-4 h-4 text-slate-500 dark:text-slate-400"}),t("span",Rt,d(h.$t("Files")),1)]),t("button",{onClick:c[8]||(c[8]=(...g)=>r.triggerImageInput&&r.triggerImageInput(...g)),class:"flex items-center gap-2 p-3 text-left bg-slate-50 dark:bg-slate-700 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors duration-200"},[v(_,{class:"w-4 h-4 text-slate-500 dark:text-slate-400"}),t("span",Ot,d(h.$t("Images")),1)])]),r.selectedFiles.length>0?(n(),i("div",Vt,[t("h4",Ht,d(h.$t("Selected Files")),1),t("div",Xt,[(n(!0),i(Z,null,G(r.selectedFiles,(g,y)=>(n(),i("div",{key:y,class:"flex items-center gap-3 p-2 bg-slate-50 dark:bg-slate-700 rounded-lg"},[t("div",qt,[(n(),ke(st(r.getFileIcon(g.type)),{class:"w-4 h-4 text-slate-500 dark:text-slate-400"}))]),t("div",Kt,[t("p",Jt,d(g.name),1),t("p",Wt,d(r.formatFileSize(g.size)),1)]),t("button",{onClick:T=>r.removeFile(y),class:"p-1 text-slate-400 hover:text-red-500 transition-colors duration-200"},[v(M,{class:"w-4 h-4"})],8,Zt)]))),128))])])):k("",!0),r.uploading?(n(),i("div",Gt,[t("div",Yt,[c[12]||(c[12]=t("div",{class:"w-4 h-4 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"},null,-1)),t("span",Qt,d(h.$t("Uploading...")),1)]),t("div",es,[t("div",{class:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:rt({width:r.uploadProgress+"%"})},null,4)])])):k("",!0),t("div",ts,[t("button",{onClick:c[9]||(c[9]=(...g)=>r.closeMenu&&r.closeMenu(...g)),class:"flex-1 px-4 py-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors duration-200"},d(h.$t("Cancel")),1),t("button",{onClick:c[10]||(c[10]=(...g)=>r.uploadFiles&&r.uploadFiles(...g)),disabled:r.selectedFiles.length===0||r.uploading,class:"flex-1 px-4 py-2 bg-primary-600 text-white text-sm rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},d(h.$t("Attach"))+" ("+d(r.selectedFiles.length)+") ",9,ss)])])])):k("",!0),f.showAttachmentMenu?(n(),i("div",{key:1,onClick:c[11]||(c[11]=(...g)=>r.closeMenu&&r.closeMenu(...g)),class:"fixed inset-0 z-40"})):k("",!0)])}const os=Le(Ft,[["render",as],["__scopeId","data-v-57707a82"]]),ls={name:"EmojiPicker",components:{X:_e,Smile:Ue,Heart:Ye,ThumbsUp:Ge,Flag:Ze,Clock:ce,Star:We,Zap:Je},props:{showEmojiPicker:Boolean},emits:["close","emoji-selected"],setup(h,{emit:c}){const f=p("smileys"),r=[{name:"smileys",icon:Ue,emojis:["ðŸ˜€","ðŸ˜ƒ","ðŸ˜„","ðŸ˜","ðŸ˜†","ðŸ˜…","ðŸ¤£","ðŸ˜‚","ðŸ™‚","ðŸ™ƒ","ðŸ˜‰","ðŸ˜Š","ðŸ˜‡","ðŸ¥°","ðŸ˜","ðŸ¤©","ðŸ˜˜","ðŸ˜—","ðŸ˜š","ðŸ˜™","ðŸ˜‹","ðŸ˜›","ðŸ˜œ","ðŸ¤ª","ðŸ˜","ðŸ¤‘","ðŸ¤—","ðŸ¤­","ðŸ¤«","ðŸ¤”","ðŸ¤","ðŸ¤¨","ðŸ˜","ðŸ˜‘","ðŸ˜¶","ðŸ˜","ðŸ˜’","ðŸ™„","ðŸ˜¬","ðŸ¤¥","ðŸ˜”","ðŸ˜ª","ðŸ¤¤","ðŸ˜´","ðŸ˜·","ðŸ¤’","ðŸ¤•","ðŸ¤¢","ðŸ¤®","ðŸ¤§","ðŸ¥µ","ðŸ¥¶","ðŸ¥´","ðŸ˜µ","ðŸ¤¯","ðŸ¤ ","ðŸ¥³","ðŸ˜Ž","ðŸ¤“","ðŸ§","ðŸ˜•","ðŸ˜Ÿ","ðŸ™","â˜¹ï¸","ðŸ˜®","ðŸ˜¯","ðŸ˜²","ðŸ˜³","ðŸ¥º","ðŸ˜¦","ðŸ˜§","ðŸ˜¨","ðŸ˜°","ðŸ˜¥","ðŸ˜¢","ðŸ˜­","ðŸ˜±","ðŸ˜–","ðŸ˜£","ðŸ˜ž","ðŸ˜“","ðŸ˜©","ðŸ˜«","ðŸ¥±","ðŸ˜¤","ðŸ˜¡","ðŸ˜ ","ðŸ¤¬","ðŸ˜ˆ","ðŸ‘¿","ðŸ’€","â˜ ï¸","ðŸ’©","ðŸ¤¡","ðŸ‘¹","ðŸ‘º","ðŸ‘»","ðŸ‘½","ðŸ‘¾","ðŸ¤–","ðŸ˜º","ðŸ˜¸","ðŸ˜¹","ðŸ˜»","ðŸ˜¼","ðŸ˜½","ðŸ™€","ðŸ˜¿","ðŸ˜¾"]},{name:"hearts",icon:Ye,emojis:["â¤ï¸","ðŸ§¡","ðŸ’›","ðŸ’š","ðŸ’™","ðŸ’œ","ðŸ–¤","ðŸ¤","ðŸ¤Ž","ðŸ’”","â£ï¸","ðŸ’•","ðŸ’ž","ðŸ’“","ðŸ’—","ðŸ’–","ðŸ’˜","ðŸ’","ðŸ’Ÿ","â˜®ï¸","âœï¸","â˜ªï¸","ðŸ•‰ï¸","â˜¸ï¸","âœ¡ï¸","ðŸ”¯","ðŸ•Ž","â˜¯ï¸","â˜¦ï¸","ðŸ›","â›Ž","â™ˆ","â™‰","â™Š","â™‹","â™Œ","â™","â™Ž","â™","â™","â™‘","â™’","â™“","ðŸ†”","âš›ï¸","ðŸ‰‘","â˜¢ï¸","â˜£ï¸","ðŸ“´","ðŸ“³","ðŸˆ¶","ðŸˆš","ðŸˆ¸","ðŸˆº","ðŸˆ·ï¸","âœ´ï¸","ðŸ†š","ðŸ’®","ðŸ‰","ãŠ™ï¸","ãŠ—ï¸","ðŸˆ´","ðŸˆµ","ðŸˆ¹","ðŸˆ²","ðŸ…°ï¸","ðŸ…±ï¸","ðŸ†Ž","ðŸ†‘","ðŸ…¾ï¸","ðŸ†˜","âŒ","â­•","ðŸ›‘","â›”","ðŸ“›","ðŸš«","ðŸ’¯","ðŸ’¢","â™¨ï¸","ðŸš·","ðŸš¯","ðŸš³","ðŸš±","ðŸ”ž","ðŸ“µ","ðŸš­"]},{name:"gestures",icon:Ge,emojis:["ðŸ‘","ðŸ‘Ž","ðŸ‘Œ","âœŒï¸","ðŸ¤ž","ðŸ¤Ÿ","ðŸ¤˜","ðŸ¤™","ðŸ‘ˆ","ðŸ‘‰","ðŸ‘†","ðŸ–•","ðŸ‘‡","â˜ï¸","ðŸ‘‹","ðŸ¤š","ðŸ–ï¸","âœ‹","ðŸ––","ðŸ‘","ðŸ™Œ","ðŸ‘","ðŸ¤²","ðŸ¤","ðŸ™","âœï¸","ðŸ’…","ðŸ¤³","ðŸ’ª","ðŸ¦¾","ðŸ¦¿","ðŸ¦µ","ðŸ¦¶","ðŸ‘‚","ðŸ¦»","ðŸ‘ƒ","ðŸ§ ","ðŸ¦·","ðŸ¦´","ðŸ‘€","ðŸ‘ï¸","ðŸ‘…","ðŸ‘„","ðŸ’‹","ðŸ©¸"]},{name:"flags",icon:Ze,emojis:["ðŸ","ðŸš©","ðŸŽŒ","ðŸ´","ðŸ³ï¸","ðŸ³ï¸â€ðŸŒˆ","ðŸ³ï¸â€âš§ï¸","ðŸ´â€â˜ ï¸","ðŸ‡¦ðŸ‡¨","ðŸ‡¦ðŸ‡©","ðŸ‡¦ðŸ‡ª","ðŸ‡¦ðŸ‡«","ðŸ‡¦ðŸ‡¬","ðŸ‡¦ðŸ‡®","ðŸ‡¦ðŸ‡±","ðŸ‡¦ðŸ‡²","ðŸ‡¦ðŸ‡´","ðŸ‡¦ðŸ‡¶","ðŸ‡¦ðŸ‡·","ðŸ‡¦ðŸ‡¸","ðŸ‡¦ðŸ‡¹","ðŸ‡¦ðŸ‡º","ðŸ‡¦ðŸ‡¼","ðŸ‡¦ðŸ‡½","ðŸ‡¦ðŸ‡¿","ðŸ‡§ðŸ‡¦","ðŸ‡§ðŸ‡§","ðŸ‡§ðŸ‡©","ðŸ‡§ðŸ‡ª","ðŸ‡§ðŸ‡«","ðŸ‡§ðŸ‡¬","ðŸ‡§ðŸ‡­","ðŸ‡§ðŸ‡®","ðŸ‡§ðŸ‡¯","ðŸ‡§ðŸ‡±","ðŸ‡§ðŸ‡²","ðŸ‡§ðŸ‡³","ðŸ‡§ðŸ‡´","ðŸ‡§ðŸ‡¶","ðŸ‡§ðŸ‡·","ðŸ‡§ðŸ‡¸","ðŸ‡§ðŸ‡¹","ðŸ‡§ðŸ‡»","ðŸ‡§ðŸ‡¼","ðŸ‡§ðŸ‡¾","ðŸ‡§ðŸ‡¿","ðŸ‡¨ðŸ‡¦","ðŸ‡¨ðŸ‡¨","ðŸ‡¨ðŸ‡©","ðŸ‡¨ðŸ‡«","ðŸ‡¨ðŸ‡¬","ðŸ‡¨ðŸ‡­","ðŸ‡¨ðŸ‡®","ðŸ‡¨ðŸ‡°","ðŸ‡¨ðŸ‡±","ðŸ‡¨ðŸ‡²","ðŸ‡¨ðŸ‡³","ðŸ‡¨ðŸ‡´","ðŸ‡¨ðŸ‡µ","ðŸ‡¨ðŸ‡·","ðŸ‡¨ðŸ‡º","ðŸ‡¨ðŸ‡»","ðŸ‡¨ðŸ‡¼","ðŸ‡¨ðŸ‡½","ðŸ‡¨ðŸ‡¾","ðŸ‡¨ðŸ‡¿","ðŸ‡©ðŸ‡ª","ðŸ‡©ðŸ‡¬","ðŸ‡©ðŸ‡¯","ðŸ‡©ðŸ‡°","ðŸ‡©ðŸ‡²","ðŸ‡©ðŸ‡´","ðŸ‡©ðŸ‡¿","ðŸ‡ªðŸ‡¦","ðŸ‡ªðŸ‡¨","ðŸ‡ªðŸ‡ª","ðŸ‡ªðŸ‡¬","ðŸ‡ªðŸ‡­","ðŸ‡ªðŸ‡·","ðŸ‡ªðŸ‡¸","ðŸ‡ªðŸ‡¹","ðŸ‡ªðŸ‡º","ðŸ‡«ðŸ‡®","ðŸ‡«ðŸ‡¯","ðŸ‡«ðŸ‡°","ðŸ‡«ðŸ‡²","ðŸ‡«ðŸ‡´","ðŸ‡«ðŸ‡·","ðŸ‡¬ðŸ‡¦","ðŸ‡¬ðŸ‡§","ðŸ‡¬ðŸ‡©","ðŸ‡¬ðŸ‡ª","ðŸ‡¬ðŸ‡«","ðŸ‡¬ðŸ‡¬","ðŸ‡¬ðŸ‡­","ðŸ‡¬ðŸ‡®","ðŸ‡¬ðŸ‡±","ðŸ‡¬ðŸ‡²","ðŸ‡¬ðŸ‡³","ðŸ‡¬ðŸ‡µ","ðŸ‡¬ðŸ‡¶","ðŸ‡¬ðŸ‡·","ðŸ‡¬ðŸ‡¸","ðŸ‡¬ðŸ‡¹","ðŸ‡¬ðŸ‡º","ðŸ‡¬ðŸ‡¼","ðŸ‡¬ðŸ‡¾","ðŸ‡­ðŸ‡°","ðŸ‡­ðŸ‡²","ðŸ‡­ðŸ‡³","ðŸ‡­ðŸ‡·","ðŸ‡­ðŸ‡¹","ðŸ‡­ðŸ‡º","ðŸ‡®ðŸ‡¨","ðŸ‡®ðŸ‡©","ðŸ‡®ðŸ‡ª","ðŸ‡®ðŸ‡±","ðŸ‡®ðŸ‡²","ðŸ‡®ðŸ‡³","ðŸ‡®ðŸ‡´","ðŸ‡®ðŸ‡¶","ðŸ‡®ðŸ‡·","ðŸ‡®ðŸ‡¸","ðŸ‡®ðŸ‡¹","ðŸ‡¯ðŸ‡ª","ðŸ‡¯ðŸ‡²","ðŸ‡¯ðŸ‡´","ðŸ‡¯ðŸ‡µ","ðŸ‡°ðŸ‡ª","ðŸ‡°ðŸ‡¬","ðŸ‡°ðŸ‡­","ðŸ‡°ðŸ‡®","ðŸ‡°ðŸ‡²","ðŸ‡°ðŸ‡³","ðŸ‡°ðŸ‡µ","ðŸ‡°ðŸ‡·","ðŸ‡°ðŸ‡¼","ðŸ‡°ðŸ‡¾","ðŸ‡°ðŸ‡¿","ðŸ‡±ðŸ‡¦","ðŸ‡±ðŸ‡§","ðŸ‡±ðŸ‡¨","ðŸ‡±ðŸ‡®","ðŸ‡±ðŸ‡°","ðŸ‡±ðŸ‡·","ðŸ‡±ðŸ‡¸","ðŸ‡±ðŸ‡¹","ðŸ‡±ðŸ‡º","ðŸ‡±ðŸ‡»","ðŸ‡±ðŸ‡¾","ðŸ‡²ðŸ‡¦","ðŸ‡²ðŸ‡¨","ðŸ‡²ðŸ‡©","ðŸ‡²ðŸ‡ª","ðŸ‡²ðŸ‡«","ðŸ‡²ðŸ‡¬","ðŸ‡²ðŸ‡­","ðŸ‡²ðŸ‡°","ðŸ‡²ðŸ‡±","ðŸ‡²ðŸ‡²","ðŸ‡²ðŸ‡³","ðŸ‡²ðŸ‡´","ðŸ‡²ðŸ‡µ","ðŸ‡²ðŸ‡¶","ðŸ‡²ðŸ‡·","ðŸ‡²ðŸ‡¸","ðŸ‡²ðŸ‡¹","ðŸ‡²ðŸ‡º","ðŸ‡²ðŸ‡»","ðŸ‡²ðŸ‡¼","ðŸ‡²ðŸ‡½","ðŸ‡²ðŸ‡¾","ðŸ‡²ðŸ‡¿","ðŸ‡³ðŸ‡¦","ðŸ‡³ðŸ‡¨","ðŸ‡³ðŸ‡ª","ðŸ‡³ðŸ‡«","ðŸ‡³ðŸ‡¬","ðŸ‡³ðŸ‡®","ðŸ‡³ðŸ‡±","ðŸ‡³ðŸ‡´","ðŸ‡³ðŸ‡µ","ðŸ‡³ðŸ‡·","ðŸ‡³ðŸ‡º","ðŸ‡³ðŸ‡¿","ðŸ‡´ðŸ‡²","ðŸ‡µðŸ‡¦","ðŸ‡µðŸ‡ª","ðŸ‡µðŸ‡«","ðŸ‡µðŸ‡¬","ðŸ‡µðŸ‡­","ðŸ‡µðŸ‡°","ðŸ‡µðŸ‡±","ðŸ‡µðŸ‡²","ðŸ‡µðŸ‡³","ðŸ‡µðŸ‡·","ðŸ‡µðŸ‡¸","ðŸ‡µðŸ‡¹","ðŸ‡µðŸ‡¼","ðŸ‡µðŸ‡¾","ðŸ‡¶ðŸ‡¦","ðŸ‡·ðŸ‡ª","ðŸ‡·ðŸ‡´","ðŸ‡·ðŸ‡¸","ðŸ‡·ðŸ‡º","ðŸ‡·ðŸ‡¼","ðŸ‡¸ðŸ‡¦","ðŸ‡¸ðŸ‡§","ðŸ‡¸ðŸ‡¨","ðŸ‡¸ðŸ‡©","ðŸ‡¸ðŸ‡ª","ðŸ‡¸ðŸ‡¬","ðŸ‡¸ðŸ‡­","ðŸ‡¸ðŸ‡®","ðŸ‡¸ðŸ‡¯","ðŸ‡¸ðŸ‡°","ðŸ‡¸ðŸ‡±","ðŸ‡¸ðŸ‡²","ðŸ‡¸ðŸ‡³","ðŸ‡¸ðŸ‡´","ðŸ‡¸ðŸ‡·","ðŸ‡¸ðŸ‡¸","ðŸ‡¸ðŸ‡¹","ðŸ‡¸ðŸ‡»","ðŸ‡¸ðŸ‡½","ðŸ‡¸ðŸ‡¾","ðŸ‡¸ðŸ‡¿","ðŸ‡¹ðŸ‡¦","ðŸ‡¹ðŸ‡¨","ðŸ‡¹ðŸ‡©","ðŸ‡¹ðŸ‡«","ðŸ‡¹ðŸ‡¬","ðŸ‡¹ðŸ‡­","ðŸ‡¹ðŸ‡¯","ðŸ‡¹ðŸ‡°","ðŸ‡¹ðŸ‡±","ðŸ‡¹ðŸ‡²","ðŸ‡¹ðŸ‡³","ðŸ‡¹ðŸ‡´","ðŸ‡¹ðŸ‡·","ðŸ‡¹ðŸ‡¹","ðŸ‡¹ðŸ‡»","ðŸ‡¹ðŸ‡¼","ðŸ‡¹ðŸ‡¿","ðŸ‡ºðŸ‡¦","ðŸ‡ºðŸ‡¬","ðŸ‡ºðŸ‡²","ðŸ‡ºðŸ‡³","ðŸ‡ºðŸ‡¸","ðŸ‡ºðŸ‡¾","ðŸ‡ºðŸ‡¿","ðŸ‡»ðŸ‡¦","ðŸ‡»ðŸ‡¨","ðŸ‡»ðŸ‡ª","ðŸ‡»ðŸ‡¬","ðŸ‡»ðŸ‡®","ðŸ‡»ðŸ‡³","ðŸ‡»ðŸ‡º","ðŸ‡¼ðŸ‡«","ðŸ‡¼ðŸ‡¸","ðŸ‡½ðŸ‡°","ðŸ‡¾ðŸ‡ª","ðŸ‡¾ðŸ‡¹","ðŸ‡¿ðŸ‡¦","ðŸ‡¿ðŸ‡²","ðŸ‡¿ðŸ‡¼"]},{name:"time",icon:ce,emojis:["ðŸ•","ðŸ•‘","ðŸ•’","ðŸ•“","ðŸ•”","ðŸ••","ðŸ•–","ðŸ•—","ðŸ•˜","ðŸ•™","ðŸ•š","ðŸ•›","ðŸ•œ","ðŸ•","ðŸ•ž","ðŸ•Ÿ","ðŸ• ","ðŸ•¡","ðŸ•¢","ðŸ•£","ðŸ•¤","ðŸ•¥","ðŸ•¦","ðŸ•§","âŒš","âŒ›","â°","â±ï¸","â²ï¸","â³","ðŸ•°ï¸","ðŸŒ¡ï¸","â›±ï¸","ðŸ§¨","ðŸŽˆ","ðŸŽ‰","ðŸŽŠ","ðŸŽ‹","ðŸŽ","ðŸŽŽ","ðŸŽ","ðŸŽ","ðŸŽ‘","ðŸ§§","ðŸŽ€","ðŸŽ","ðŸŽ—ï¸","ðŸŽŸï¸","ðŸŽ«","ðŸŽ–ï¸","ðŸ†","ðŸ…","ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰","âš½","âš¾","ðŸ¥Ž","ðŸ€","ðŸ","ðŸˆ","ðŸ‰","ðŸŽ¾","ðŸ¥","ðŸŽ³","ðŸ","ðŸ‘","ðŸ’","ðŸ¥","ðŸ“","ðŸ¸","ðŸ¥Š","ðŸ¥‹","ðŸ¥…","â›³","â›¸ï¸","ðŸŽ£","ðŸ¤¿","ðŸŽ½","ðŸŽ¿","ðŸ›·","ðŸ¥Œ","ðŸŽ¯","ðŸª","ðŸŽª","ðŸ¤¹","ðŸ¤¹â€â™€ï¸","ðŸ¤¹â€â™‚ï¸","ðŸŽ­","ðŸ©°","ðŸŽ¨","ðŸŽ¬","ðŸŽ¤","ðŸŽ§","ðŸŽ¼","ðŸŽµ","ðŸŽ¶","ðŸª˜","ðŸ¥","ðŸª—","ðŸŽ¸","ðŸª•","ðŸŽº","ðŸŽ·","ðŸª—","ðŸŽ»","ðŸªˆ","ðŸŽ²","â™ ï¸","â™¥ï¸","â™¦ï¸","â™£ï¸","â™Ÿï¸","ðŸƒ","ðŸ€„","ðŸŽ´","ðŸŽ­","ðŸ–¼ï¸","ðŸŽ¨","ðŸ§©","ðŸª†","â™ ï¸","â™¥ï¸","â™¦ï¸","â™£ï¸","â™Ÿï¸","ðŸƒ","ðŸ€„","ðŸŽ´","ðŸŽ­","ðŸ–¼ï¸","ðŸŽ¨","ðŸ§©","ðŸª†"]},{name:"stars",icon:We,emojis:["â­","ðŸŒŸ","ðŸ’«","âœ¨","âš¡","â˜„ï¸","ðŸ’¥","ðŸ”¥","ðŸ’¢","ðŸ’¨","ðŸ’¦","ðŸ’§","ðŸŒŠ","â˜”","â˜‚ï¸","ðŸŒ¤ï¸","â›…","â›ˆï¸","ðŸŒ©ï¸","ðŸŒ¨ï¸","â„ï¸","â˜ƒï¸","â›„","ðŸŒ¬ï¸","ðŸ’¨","ðŸŒªï¸","ðŸŒ«ï¸","ðŸŒˆ","â˜€ï¸","ðŸŒž","ðŸŒ","ðŸŒ›","ðŸŒœ","ðŸŒš","ðŸŒ•","ðŸŒ–","ðŸŒ—","ðŸŒ˜","ðŸŒ‘","ðŸŒ’","ðŸŒ“","ðŸŒ”","ðŸŒ™","ðŸª","ðŸŒ","ðŸŒŽ","ðŸŒ","ðŸŒ‹","ðŸŒŒ","â›°ï¸","ðŸ”ï¸","ðŸ—»","ðŸ•ï¸","ðŸ–ï¸","ðŸœï¸","ðŸï¸","ðŸžï¸","ðŸŸï¸","ðŸ›ï¸","ðŸ—ï¸","ðŸ§±","ðŸ˜ï¸","ðŸšï¸","ðŸ ","ðŸ¡","ðŸ¢","ðŸ£","ðŸ¤","ðŸ¥","ðŸ¦","ðŸ§","ðŸ¨","ðŸ©","ðŸª","ðŸ«","ðŸ¬","ðŸ­","ðŸ®","ðŸ¯","ðŸ°","ðŸ’’","ðŸ—¼","ðŸ—½","â›ª","ðŸ•Œ","ðŸ›•","ðŸ•","â›©ï¸","ðŸ•‹","â›²","â›º","ðŸŒ‰","ðŸŒ","ðŸš","ðŸš‚","ðŸšƒ","ðŸš„","ðŸš…","ðŸš†","ðŸš‡","ðŸšˆ","ðŸš‰","ðŸšŠ","ðŸš","ðŸšž","ðŸš‹","ðŸšŒ","ðŸš","ðŸšŽ","ðŸš","ðŸš‘","ðŸš’","ðŸš“","ðŸš”","ðŸš•","ðŸš–","ðŸš—","ðŸš˜","ðŸš™","ðŸšš","ðŸš›","ðŸšœ","ðŸŽï¸","ðŸï¸","ðŸ›µ","ðŸš²","ðŸ›´","ðŸ›¹","ðŸ›¼","ðŸš","ðŸ›¸","âœˆï¸","ðŸ›©ï¸","ðŸ›«","ðŸ›¬","ðŸª‚","ðŸ’º","ðŸš€","ðŸ›°ï¸","ðŸš‰","ðŸšŠ","ðŸš","ðŸšž","ðŸš‹","ðŸšŒ","ðŸš","ðŸšŽ","ðŸš","ðŸš‘","ðŸš’","ðŸš“","ðŸš”","ðŸš•","ðŸš–","ðŸš—","ðŸš˜","ðŸš™","ðŸšš","ðŸš›","ðŸšœ","ðŸŽï¸","ðŸï¸","ðŸ›µ","ðŸš²","ðŸ›´","ðŸ›¹","ðŸ›¼","ðŸš","ðŸ›¸","âœˆï¸","ðŸ›©ï¸","ðŸ›«","ðŸ›¬","ðŸª‚","ðŸ’º","ðŸš€","ðŸ›°ï¸"]},{name:"symbols",icon:Je,emojis:["âš¡","ðŸ”¥","ðŸ’¥","ðŸ’¢","ðŸ’¨","ðŸ’¦","ðŸ’§","ðŸŒŠ","â˜”","â˜‚ï¸","ðŸŒ¤ï¸","â›…","â›ˆï¸","ðŸŒ©ï¸","ðŸŒ¨ï¸","â„ï¸","â˜ƒï¸","â›„","ðŸŒ¬ï¸","ðŸ’¨","ðŸŒªï¸","ðŸŒ«ï¸","ðŸŒˆ","â˜€ï¸","ðŸŒž","ðŸŒ","ðŸŒ›","ðŸŒœ","ðŸŒš","ðŸŒ•","ðŸŒ–","ðŸŒ—","ðŸŒ˜","ðŸŒ‘","ðŸŒ’","ðŸŒ“","ðŸŒ”","ðŸŒ™","ðŸª","ðŸŒ","ðŸŒŽ","ðŸŒ","ðŸŒ‹","ðŸŒŒ","â›°ï¸","ðŸ”ï¸","ðŸ—»","ðŸ•ï¸","ðŸ–ï¸","ðŸœï¸","ðŸï¸","ðŸžï¸","ðŸŸï¸","ðŸ›ï¸","ðŸ—ï¸","ðŸ§±","ðŸ˜ï¸","ðŸšï¸","ðŸ ","ðŸ¡","ðŸ¢","ðŸ£","ðŸ¤","ðŸ¥","ðŸ¦","ðŸ§","ðŸ¨","ðŸ©","ðŸª","ðŸ«","ðŸ¬","ðŸ­","ðŸ®","ðŸ¯","ðŸ°","ðŸ’’","ðŸ—¼","ðŸ—½","â›ª","ðŸ•Œ","ðŸ›•","ðŸ•","â›©ï¸","ðŸ•‹","â›²","â›º","ðŸŒ‰","ðŸŒ","ðŸš","ðŸš‚","ðŸšƒ","ðŸš„","ðŸš…","ðŸš†","ðŸš‡","ðŸšˆ","ðŸš‰","ðŸšŠ","ðŸš","ðŸšž","ðŸš‹","ðŸšŒ","ðŸš","ðŸšŽ","ðŸš","ðŸš‘","ðŸš’","ðŸš“","ðŸš”","ðŸš•","ðŸš–","ðŸš—","ðŸš˜","ðŸš™","ðŸšš","ðŸš›","ðŸšœ","ðŸŽï¸","ðŸï¸","ðŸ›µ","ðŸš²","ðŸ›´","ðŸ›¹","ðŸ›¼","ðŸš","ðŸ›¸","âœˆï¸","ðŸ›©ï¸","ðŸ›«","ðŸ›¬","ðŸª‚","ðŸ’º","ðŸš€","ðŸ›°ï¸"]}],S=q(()=>{const m=r.find(x=>x.name===f.value);return m?m.emojis:[]}),E=m=>{c("emoji-selected",m),M()},M=()=>{c("close")};return{activeCategory:f,categories:r,currentEmojis:S,selectEmoji:E,closePicker:M}}},rs={class:"relative"},ns={key:0,class:"absolute bottom-full right-0 mb-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50"},is={class:"px-4 py-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50"},ds={class:"flex items-center justify-between"},cs={class:"text-sm font-semibold text-slate-900 dark:text-white"},us={class:"px-4 py-2 border-b border-slate-200 dark:border-slate-700"},hs={class:"flex gap-1"},gs=["onClick"],vs={class:"p-4 max-h-64 overflow-y-auto"},ms={class:"grid grid-cols-8 gap-2"},fs=["onClick","title"];function bs(h,c,f,r,S,E){const M=ie("X");return n(),i("div",rs,[f.showEmojiPicker?(n(),i("div",ns,[t("div",is,[t("div",ds,[t("h3",cs,d(h.$t("Choose Emoji")),1),t("button",{onClick:c[0]||(c[0]=(...m)=>r.closePicker&&r.closePicker(...m)),class:"p-1 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300"},[v(M,{class:"w-4 h-4"})])])]),t("div",us,[t("div",hs,[(n(!0),i(Z,null,G(r.categories,m=>(n(),i("button",{key:m.name,onClick:x=>r.activeCategory=m.name,class:W(["p-2 rounded-lg transition-colors duration-200",r.activeCategory===m.name?"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"])},[(n(),ke(st(m.icon),{class:"w-4 h-4"}))],10,gs))),128))])]),t("div",vs,[t("div",ms,[(n(!0),i(Z,null,G(r.currentEmojis,m=>(n(),i("button",{key:m,onClick:x=>r.selectEmoji(m),class:"p-2 text-lg hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors duration-200",title:m},d(m),9,fs))),128))])])])):k("",!0),f.showEmojiPicker?(n(),i("div",{key:1,onClick:c[1]||(c[1]=(...m)=>r.closePicker&&r.closePicker(...m)),class:"fixed inset-0 z-40"})):k("",!0)])}const ps=Le(ls,[["render",bs],["__scopeId","data-v-87038add"]]);function xs(h){var le;const c=at(),f=p(""),r=p(!1),S=p(!1),E=p("all"),M=p(!1),m=p(!1),x=p(!1),_=p(!1),g=p(!1),y=p(null),T=p(null),I=p(null),z=p(null),N=p("connected"),K=p(0),U=p({search:((le=h.filters)==null?void 0:le.search)||""}),R=p(null),F=p(null),O=q(()=>{var e;return((e=c.props.auth)==null?void 0:e.user)||null}),u=q(()=>{var e,l;return((l=(e=c.props.auth)==null?void 0:e.user)==null?void 0:l.access)||{}}),j=q(()=>[{value:"all",label:"All",activeClass:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"},{value:"unread",label:"Unread",activeClass:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"},{value:"archived",label:"Archived",activeClass:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"}]),P=e=>e.replace(/(<([^>]+)>)/ig,""),L=()=>{U.value={search:""}},ye=async()=>{var C,b,D,H;if(!f.value.trim()||r.value||!h.chat)return;r.value=!0;const e={message:f.value,user_id:(C=O.value)==null?void 0:C.id,_token:c.props.csrf_token,conversation_id:h.chat.id},l=f.value;f.value="",S.value=!1;try{const A=await Ae.post(route("chat.message"),e);if(A.data&&A.data.success)V();else throw new Error(((b=A.data)==null?void 0:b.message)||"Failed to send message")}catch(A){if(console.error("Admin Chat: Error sending message:",A),f.value=l,((D=A.response)==null?void 0:D.status)===422){const be=A.response.data.errors,re=Object.values(be)[0];alert(re?re[0]:"Please check your message and try again.")}else((H=A.response)==null?void 0:H.status)===500?alert("Server error. Please try again later."):A.code==="NETWORK_ERROR"?alert("Network error. Please check your connection."):alert("Failed to send message. Please try again.")}finally{r.value=!1}},ue=e=>{window.location.href=route("chat.current",e)},he=(e,l)=>{l&&typeof l=="function"?l(()=>{J.delete(route("chat.destroy",e),{onSuccess:()=>{setTimeout(()=>{L()},4e3)}})}):confirm("Are you sure you want to delete this conversation?")&&J.delete(route("chat.destroy",e),{onSuccess:()=>{setTimeout(()=>{L()},4e3)}})},ge=(e,l)=>{l&&typeof l=="function"?l(()=>{J.put(route("chat.restore",e))}):confirm("Are you sure you want to restore this conversation?")&&J.put(route("chat.restore",e))},V=()=>{de(()=>{R.value&&(R.value.scrollTop=R.value.scrollHeight)})},Y=e=>e?ht(e).fromNow():"",Q=e=>e?typeof e=="object"?e.text?e.text:e.content?e.content:e.message?e.message:JSON.stringify(e):String(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):"",ee=()=>{M.value=!M.value},we=()=>{m.value=!m.value},Ce=()=>{x.value=!x.value},Se=()=>{_.value=!_.value,_.value&&(g.value=!1)},ve=()=>{g.value=!g.value,g.value&&(_.value=!1)},w=e=>{if(F.value){const l=F.value.selectionStart,C=F.value.selectionEnd,b=f.value;f.value=b.substring(0,l)+e+b.substring(C),de(()=>{F.value.selectionStart=F.value.selectionEnd=l+e.length,F.value.focus()})}},Me=e=>{_.value=!1,V()},je=e=>{y.value=y.value===e?null:e},Ee=e=>{E.value=e},Fe=()=>{U.value.search="",L()},$e=()=>{clearTimeout(z.value),z.value=setTimeout(()=>{J.get(route("chat.index"),tt(U.value),{preserveState:!0})},300)},Te=()=>{S.value=!0,I.value=Date.now(),T.value&&clearTimeout(T.value),T.value=setTimeout(()=>{S.value=!1},1e3)},me=()=>{},te=()=>{S.value=!1},fe=e=>{},se=()=>{F.value&&(F.value.style.height="auto",F.value.style.height=Math.min(F.value.scrollHeight,120)+"px")},a=()=>{h.conversations&&h.conversations.data&&(K.value=h.conversations.data.reduce((e,l)=>e+(l.total_entry||0),0))},o=()=>{const e=()=>{if(window.Echo){if(N.value="connected",h.chat&&h.chat.id){const l=`chat.${h.chat.id}`,C=window.Echo.channel(l);C.subscription.bind("pusher:subscription_succeeded",()=>{}),C.subscription.bind("pusher:subscription_error",b=>{console.log("âŒ Admin Chat: Channel subscription error:",b)}),C.listen("TypingIndicator",b=>{oe(b)}),C.subscription.bind("pusher:subscription_succeeded",()=>{}),C.subscription.bind("pusher:subscription_error",b=>{console.log("âŒ Admin Chat: Channel subscription error:",b)}),C.subscription.bind("pusher:subscription_succeeded",()=>{C.subscription.bind("pusher:subscription_error",b=>{console.log("âŒ Admin Chat: Channel subscription error:",b)})}),window.Echo.connector.pusher.bind_global((b,D)=>{b==="NewChatMessage"&&(D&&D.chatMessage&&typeof D.chatMessage=="object"?$(D.chatMessage):console.warn("Admin Chat: Invalid message structure from global listener:",D))})}}else console.warn("Admin Chat: Echo not ready, retrying..."),setTimeout(e,500)};e()},$=e=>{var D;const l=B(e);console.log(l);const C=parseInt(l.conversation_id||0);let b=h.conversations.data.find(H=>H.id===C);typeof b=="object"?(b.title=l.message,b.total_entry=b.total_entry+1,b.updated_at=l.created_at,h.chat&&h.chat.id===C&&(h.chat.messages.find(A=>A.id===l.id)||(h.chat.messages||(h.chat.messages=[]),h.chat.messages.push(l),b.total_entry=0,V(),l.user_id!==((D=O.value)==null?void 0:D.id)&&ae(l.id,C)))):h.conversations.data.unshift({id:C,total_entry:1,title:l.message,creator:l.contact||l.user,updated_at:l.created_at,status:"active"})},B=e=>{if(!e||typeof e!="object")return{id:Date.now(),message:"Invalid message",conversation_id:0,user_id:null,contact_id:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),user:null,contact:null};let l=e.message;return typeof l=="object"&&(l.text?l=l.text:l.content?l=l.content:l.message?l=l.message:l=JSON.stringify(l)),typeof l!="string"&&(l=String(l||"")),l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"),{id:e.id||Date.now(),message:l,conversation_id:e.conversation_id||0,user_id:e.user_id||null,contact_id:e.contact_id||null,created_at:e.created_at||new Date().toISOString(),updated_at:e.updated_at||new Date().toISOString(),user:e.user||null,contact:e.contact||null,is_read:e.is_read||!1,message_type:e.message_type||"text"}},ae=async(e,l)=>{const C=document.head.querySelector('meta[name="csrf-token"]');try{await Ae.post(route("chat.mark-read"),{message_id:e,conversation_id:l,_token:C.content})}catch(b){console.error("Admin Chat: Error marking message as read:",b)}},oe=e=>{var l;e&&e.user_id&&e.user_id!==((l=O.value)==null?void 0:l.id)&&(S.value=e.is_typing||!1,e.user||e.user_id,S.value?(T.value&&clearTimeout(T.value),T.value=setTimeout(()=>{S.value=!1},3e3)):(S.value=!1,T.value&&clearTimeout(T.value)))};return De(U,Et(()=>{J.get(route("chat"),tt(U.value),{preserveState:!0})},150),{deep:!0}),ot(()=>{o(),V(),de(()=>{F.value&&F.value.addEventListener("input",se)}),a()}),lt(()=>{T.value&&clearTimeout(T.value),z.value&&clearTimeout(z.value),window.Echo&&h.chat&&window.Echo.leaveChannel(`chat.${h.chat.id}`)}),{messageText:f,isSending:r,isTyping:S,currentFilter:E,showUserMenu:M,showChatInfo:m,showChatSettings:x,showAttachmentMenu:_,showEmojiPicker:g,showConversationMenu:y,searchForm:U,unreadCount:K,connectionStatus:N,messagesContainer:R,messageInput:F,user:O,userAccess:u,filterOptions:j,textOnly:P,reset:L,sendMessage:ye,navigateTo:ue,destroy:he,restore:ge,scrollToBottom:V,formatTime:Y,formatMessage:Q,toggleUserMenu:ee,toggleChatInfo:we,toggleChatSettings:Ce,toggleAttachmentMenu:Se,toggleEmojiPicker:ve,insertEmoji:w,handleFilesUploaded:Me,toggleConversationMenu:je,setFilter:Ee,clearSearch:Fe,handleSearch:$e,handleTyping:Te,handleFocus:me,handleBlur:te,broadcastTypingIndicator:fe,autoResizeTextarea:se,calculateUnreadCount:a,setupEcho:o,pushMessage:$,sanitizeMessage:B,markMessageAsRead:ae,handleTypingIndicator:oe}}const ks={class:"bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"},_s={class:"flex max-h-[calc(100vh-215px)]"},ys={class:"w-1/3 bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 flex flex-col shadow-lg"},ws={class:"p-4 border-b border-slate-200/50 dark:border-slate-700/50 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 dark:from-slate-700/50 dark:to-slate-600/50"},Cs={class:"flex items-center gap-3"},Ss={class:"relative group"},Ms=["src"],js={key:1,class:"w-12 h-12 bg-gradient-to-br from-slate-400 to-slate-600 rounded-full flex items-center justify-center ring-2 ring-white dark:ring-slate-700 shadow-lg"},Es={class:"absolute inset-0 rounded-full bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center"},Fs={class:"flex-1 min-w-0"},$s={class:"font-semibold text-slate-900 dark:text-white truncate"},Ts={class:"text-sm text-slate-500 dark:text-slate-400"},Is={class:"p-4 border-b border-slate-200/50 dark:border-slate-700/50"},Ds={class:"space-y-3"},As={class:"relative"},Ps=["placeholder"],Us={class:"flex gap-2"},Ls=["onClick"],Bs={class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent"},zs={key:0,class:"p-8 text-center"},Ns={class:"w-16 h-16 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-full flex items-center justify-center mx-auto mb-4"},Rs={class:"text-slate-500 dark:text-slate-400 font-medium"},Os={class:"text-sm text-slate-400 dark:text-slate-500 mt-1"},Vs={key:1,class:"space-y-1 p-2"},Hs=["onClick"],Xs={class:"relative"},qs={class:"w-12 h-12 bg-gradient-to-br from-slate-400 to-slate-600 rounded-full flex items-center justify-center shadow-lg"},Ks={key:0,class:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold animate-pulse shadow-lg"},Js={class:"flex-1 min-w-0"},Ws={class:"flex items-center justify-between mb-1"},Zs={class:"font-semibold text-slate-900 dark:text-white truncate"},Gs={class:"text-xs text-slate-400 dark:text-slate-500 flex items-center gap-1"},Ys={class:"flex items-center justify-between"},Qs={class:"text-sm text-slate-500 dark:text-slate-400 truncate flex items-center gap-2"},ea={key:0,class:"text-xs text-yellow-600 dark:text-yellow-400 flex items-center gap-1"},ta={key:0,class:"text-xs text-slate-400 dark:text-slate-500 truncate mt-1"},sa={class:"flex flex-col items-end gap-1"},aa=["onClick"],oa={key:0,class:"text-yellow-500"},la={key:0,class:"p-4 border-t border-slate-200 dark:border-slate-700"},ra={class:"flex-1 flex flex-col bg-white/50 dark:bg-slate-800/50"},na={key:0,class:"flex-1 flex items-center justify-center"},ia={class:"text-center max-w-md mx-auto px-6"},da={class:"text-xl font-semibold text-slate-900 dark:text-white mb-3"},ca={class:"text-slate-500 dark:text-slate-400"},ua={key:1,class:"flex-1 flex items-center justify-center"},ha={class:"text-center max-w-md mx-auto px-6"},ga={class:"w-20 h-20 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-full flex items-center justify-center mx-auto mb-6"},va={class:"text-xl font-semibold text-slate-900 dark:text-white mb-3"},ma={class:"text-slate-500 dark:text-slate-400 mb-6"},fa={key:2,class:"flex-1 flex flex-col"},ba={class:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl border-b border-slate-200/50 dark:border-slate-700/50 p-4 shadow-sm"},pa={class:"flex items-center justify-between"},xa={class:"flex items-center gap-3"},ka={class:"relative"},_a={class:"w-12 h-12 bg-gradient-to-br from-slate-400 to-slate-600 rounded-full flex items-center justify-center shadow-lg"},ya={class:"font-semibold text-slate-900 dark:text-white"},wa={class:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-1"},Ca={class:"flex items-center gap-2"},Sa={class:"flex items-center gap-1"},Ma=["title"],ja={key:0,class:"text-center py-12"},Ea={class:"w-16 h-16 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-full flex items-center justify-center mx-auto mb-6"},Fa={class:"text-slate-500 dark:text-slate-400 font-medium"},$a={class:"text-sm text-slate-400 dark:text-slate-500 mt-1"},Ta={key:1,class:"space-y-4"},Ia={key:0,class:"w-10 h-10 bg-gradient-to-br from-slate-400 to-slate-600 rounded-full flex items-center justify-center flex-shrink-0 shadow-lg"},Da={class:"flex flex-col max-w-xs lg:max-w-md"},Aa=["innerHTML"],Pa={class:"absolute -right-2 -top-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"},Ua={class:"flex gap-1 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-600 p-1"},La=["onClick","title"],Ba=["onClick","title"],za=["onClick","title"],Na=["onClick","title"],Ra={class:"flex items-center justify-between mt-2"},Oa={key:0,class:"text-xs opacity-75"},Va={key:0,class:"flex items-center gap-1"},Ha={key:0,class:"w-3 h-3 text-blue-200"},Xa={key:1,class:"w-3 h-3 text-blue-200"},qa={key:2,class:"w-3 h-3 text-blue-200"},Ka={key:0,class:"mt-2 ml-4 p-2 bg-slate-50 dark:bg-slate-800 rounded-lg border-l-2 border-blue-500"},Ja={class:"text-xs text-slate-500 dark:text-slate-400 mb-1"},Wa={class:"text-sm text-slate-700 dark:text-slate-300 truncate"},Za={key:1,class:"mt-2 flex flex-wrap gap-1"},Ga=["onClick"],Ya={key:1,class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0 shadow-lg"},Qa={key:2,class:"absolute bottom-4 right-4 z-10"},eo=["title"],to={class:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl border-t border-slate-200/50 dark:border-slate-700/50 p-4 shadow-lg"},so={class:"space-y-3"},ao={key:0,class:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg border-l-4 border-blue-500"},oo={class:"flex-1"},lo={class:"text-xs text-slate-500 dark:text-slate-400 mb-1"},ro={class:"text-sm text-slate-700 dark:text-slate-300 truncate"},no={class:"flex gap-3"},io=["title"],co={class:"flex-1 relative"},uo=["onKeydown","placeholder"],ho=["title"],go=["disabled"],vo={key:0,class:"flex items-center gap-2"},mo={class:"hidden sm:inline"},fo={key:1,class:"flex items-center gap-2"},bo={class:"hidden sm:inline"},po={class:"flex justify-between items-center text-xs text-slate-400 dark:text-slate-500 px-2"},xo={class:"flex items-center gap-4"},ko={key:0,class:"text-yellow-500"},_o={class:"flex items-center gap-2"},yo={__name:"Index",props:{filters:Object,conversations:Object,chat:Object,title:String},setup(h){const c=h,{messageText:f,isSending:r,currentFilter:S,showAttachmentMenu:E,showEmojiPicker:M,searchForm:m,replyingTo:x,messagesContainer:_,messageInput:g,user:y,filterOptions:T,chat:I,sendMessage:z,navigateTo:N,destroy:K,formatTime:U,formatMessage:R,toggleUserMenu:F,toggleAttachmentMenu:O,toggleEmojiPicker:u,insertEmoji:j,handleFilesUploaded:P,toggleConversationMenu:L,setFilter:ye,clearSearch:ue,handleSearch:he,handleFocus:ge,handleBlur:V,replyToMessage:Y,cancelReply:Q,deleteMessage:ee,toggleReaction:we}=xs(c),Ce=at(),Se=q(()=>Ce.url),ve=q(()=>{const o=Se.value.match(/\/chat\/(\d+)/);return o?parseInt(o[1]):null}),w=q(()=>{try{return I&&I.value||c.chat}catch(a){return console.warn("Error accessing chat from composable:",a),c.chat}}),Me=q(()=>{try{return ve.value&&!w.value}catch(a){return console.warn("Error in isLoadingChat:",a),!1}});De([ve,()=>c.chat],([a,o],[$,B])=>{a&&!o&&a!==$&&(console.log("Auto-navigating to chat:",a),N&&typeof N=="function"?N(a):(console.warn("navigateTo function not available, trying direct navigation"),J.visit(`/dashboard/chat/${a}`,{method:"get",preserveState:!0,preserveScroll:!0})))},{immediate:!0});const je=a=>{if(navigator.clipboard)navigator.clipboard.writeText(a.message).then(()=>{console.log("Message copied to clipboard")}).catch(o=>{console.error("Failed to copy message: ",o)});else{const o=document.createElement("textarea");o.value=a.message,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),console.log("Message copied to clipboard (fallback)")}},Ee=a=>{f.value=a.message,g.value&&g.value.focus(),console.log("Editing message:",a.id)},Fe=a=>{if(confirm("Are you sure you want to delete this message?"))try{if(a.isDeleting=!0,ee&&typeof ee=="function")ee(a.id);else if(I.value&&I.value.messages){const o=I.value.messages.findIndex($=>$.id===a.id);o!==-1&&setTimeout(()=>{I.value.messages.splice(o,1),console.log("Message deleted from UI:",a.id)},300)}}catch(o){if(console.error("Error deleting message:",o),a.isDeleting=!1,I.value&&I.value.messages){const $=I.value.messages.findIndex(B=>B.id===a.id);$!==-1&&I.value.messages.splice($,1)}}},$e=a=>{try{Y&&typeof Y=="function"?Y(a):x.value={id:a.id,message:a.message,user:a.user||{name:"Unknown User"},user_id:a.user_id},setTimeout(()=>{g.value&&(g.value.focus(),g.value.scrollIntoView({behavior:"smooth",block:"center"}))},100),console.log("Replying to message:",a.id)}catch(o){console.error("Error setting reply context:",o),x.value={id:a.id,message:a.message,user:{name:"Unknown User"},user_id:a.user_id}}},Te=()=>{try{Q&&typeof Q=="function"?Q():x.value=null,console.log("Reply cancelled")}catch(a){console.error("Error cancelling reply:",a),x.value=null}},me=()=>{try{if(!f.value.trim())return;z&&typeof z=="function"?z():(console.log("Sending message:",f.value),x.value&&console.log("Replying to:",x.value.id),f.value="",x.value&&(x.value=null))}catch(a){console.error("Error sending message:",a)}},te=p(!1),fe=()=>{try{_.value&&(_.value.scrollTop=_.value.scrollHeight,te.value=!1)}catch(a){console.warn("Error scrolling to bottom:",a)}},se=()=>{try{if(_.value){const{scrollTop:a,scrollHeight:o,clientHeight:$}=_.value,B=o-a-$<100;te.value=!B}}catch(a){console.warn("Error checking scroll position:",a)}};return De(()=>{var a;return(a=w==null?void 0:w.messages)==null?void 0:a.length},()=>{de(()=>{if(_.value){const{scrollTop:a,scrollHeight:o,clientHeight:$}=_.value;o-a-$<50&&fe()}})},{deep:!0}),ot(()=>{de(()=>{_.value&&_.value.addEventListener("scroll",se)})}),lt(()=>{_.value&&_.value.removeEventListener("scroll",se)}),(a,o)=>(n(),ke(ct,null,{default:ze(()=>{var $,B,ae,oe,le;return[t("div",ks,[v(s(nt),{title:a.$t(h.title)},null,8,["title"]),t("div",_s,[t("div",ys,[t("div",ws,[t("div",Cs,[t("div",Ss,[($=s(y))!=null&&$.photo?(n(),i("img",{key:0,src:s(y).photo,alt:"",class:"w-12 h-12 rounded-full object-cover ring-2 ring-white dark:ring-slate-700 shadow-lg"},null,8,Ms)):(n(),i("div",js,[v(s(xe),{class:"w-6 h-6 text-white"})])),o[13]||(o[13]=t("div",{class:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white dark:border-slate-800 rounded-full shadow-sm"},[t("div",{class:"w-full h-full bg-green-400 rounded-full animate-pulse"})],-1)),t("div",Es,[v(s(bt),{class:"w-4 h-4 text-white"})])]),t("div",Fs,[t("div",$s,d((B=s(y))==null?void 0:B.first_name)+" "+d((ae=s(y))==null?void 0:ae.last_name),1),t("div",Ts,d(a.$t(((le=(oe=s(y))==null?void 0:oe.role)==null?void 0:le.name)||"User")),1)]),t("button",{onClick:o[0]||(o[0]=(...e)=>s(F)&&s(F)(...e)),class:"p-1 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors duration-200"},[v(s(Qe),{class:"w-4 h-4"})])])]),t("div",Is,[t("div",Ds,[t("div",As,[v(s(pt),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),Ne(t("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s(m).search=e),type:"text",placeholder:a.$t("Search conversations..."),class:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-all duration-200",onInput:o[2]||(o[2]=(...e)=>s(he)&&s(he)(...e))},null,40,Ps),[[Re,s(m).search]]),s(m).search?(n(),i("button",{key:0,onClick:o[3]||(o[3]=(...e)=>s(ue)&&s(ue)(...e)),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"},[v(s(_e),{class:"w-4 h-4"})])):k("",!0)]),t("div",Us,[(n(!0),i(Z,null,G(s(T),e=>(n(),i("button",{key:e.value,onClick:l=>s(ye)(e.value),class:W(["px-3 py-1 text-xs rounded-full transition-all duration-200",s(S)===e.value?e.activeClass:"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"])},d(a.$t(e.label)),11,Ls))),128))])])]),t("div",Bs,[h.conversations.data.length===0?(n(),i("div",zs,[t("div",Ns,[v(s(ne),{class:"w-8 h-8 text-slate-400 dark:text-slate-500"})]),t("p",Rs,d(a.$t("No conversations yet")),1),t("p",Os,d(a.$t("Start a new conversation")),1)])):(n(),i("div",Vs,[(n(!0),i(Z,null,G(h.conversations.data,e=>(n(),i("div",{key:e.id,onClick:l=>s(N)(e.id),class:W(["group flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all duration-300 transform hover:scale-[1.02]",w.value&&w.value.id===e.id?"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-700 shadow-md":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:shadow-sm"])},[t("div",Xs,[t("div",qs,[v(s(ne),{class:"w-6 h-6 text-white"})]),e.total_entry>0?(n(),i("div",Ks,d(e.total_entry>99?"99+":e.total_entry),1)):k("",!0)]),t("div",Js,[t("div",Ws,[t("div",Zs,d(e.title||"New Conversation"),1),t("div",Gs,[v(s(ce),{class:"w-3 h-3"}),pe(" "+d(s(U)?s(U)(e.updated_at):e.updated_at),1)])]),t("div",Ys,[t("div",Qs,[v(s(xe),{class:"w-3 h-3"}),pe(" "+d(e.creator||"Unknown"),1)]),e.is_archived?(n(),i("div",ea,[v(s(Pe),{class:"w-3 h-3"}),pe(" "+d(a.$t("Archived")),1)])):k("",!0)]),e.last_message?(n(),i("div",ta,d(e.last_message),1)):k("",!0)]),t("div",sa,[t("button",{onClick:Ie(l=>s(L)(e.id),["stop"]),class:"p-1 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 opacity-0 group-hover:opacity-100 transition-all duration-200"},[v(s(Qe),{class:"w-4 h-4"})],8,aa),e.is_pinned?(n(),i("div",oa,[v(s(xt),{class:"w-3 h-3"})])):k("",!0)])],10,Hs))),128))]))]),h.conversations.links?(n(),i("div",la,[v(ut,{class:"mt-4",links:h.conversations.links},null,8,["links"])])):k("",!0)]),t("div",ra,[Me.value?(n(),i("div",na,[t("div",ia,[o[14]||(o[14]=t("div",{class:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-700 dark:to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6"},[t("div",{class:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})],-1)),t("h3",da,d(a.$t("Loading conversation...")),1),t("p",ca,d(a.$t("Please wait while we load the chat")),1)])])):w.value?(n(),i("div",fa,[t("div",ba,[t("div",pa,[t("div",xa,[t("div",ka,[t("div",_a,[v(s(ne),{class:"w-6 h-6 text-white"})]),o[15]||(o[15]=t("div",{class:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white dark:border-slate-800 rounded-full"},[t("div",{class:"w-full h-full bg-green-400 rounded-full animate-pulse"})],-1))]),t("div",null,[t("h3",ya,d(w.value&&w.value.title||"New Conversation"),1),t("div",wa,[o[16]||(o[16]=t("div",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),t("span",null,d(a.$t("Active now")),1)])])]),t("div",Ca,[t("div",Sa,[t("button",{onClick:o[4]||(o[4]=e=>w.value&&s(K)(w.value.id)),class:"p-2 text-slate-400 hover:text-red-500 transition-colors duration-200 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700",title:a.$t("Delete conversation")},[v(s(et),{class:"w-4 h-4"})],8,Ma)])])])]),t("div",{ref_key:"messagesContainer",ref:_,class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent messages-container relative",style:{"max-height":"calc(100vh - 300px)"}},[w.value&&w.value.messages&&w.value.messages.length===0?(n(),i("div",ja,[t("div",Ea,[v(s(ne),{class:"w-8 h-8 text-slate-400 dark:text-slate-500"})]),t("p",Fa,d(a.$t("No messages yet")),1),t("p",$a,d(a.$t("Start the conversation")),1)])):(n(),i("div",Ta,[(n(!0),i(Z,null,G(w.value&&w.value.messages?w.value.messages:[],(e,l)=>{var C,b,D,H,A,be,re,Be;return n(),i("div",{key:e.id,class:W(["flex gap-3 group message-item",e.user_id===((C=s(y))==null?void 0:C.id)?"justify-end":"justify-start",e.isDeleting?"deleting":""])},[e.user_id!==((b=s(y))==null?void 0:b.id)?(n(),i("div",Ia,[v(s(xe),{class:"w-5 h-5 text-white"})])):k("",!0),t("div",Da,[t("div",{class:W(["px-4 py-3 rounded-2xl shadow-sm transition-all duration-200 group-hover:shadow-md relative",e.user_id===((D=s(y))==null?void 0:D.id)?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-white dark:bg-slate-700 text-slate-900 dark:text-white border border-slate-200 dark:border-slate-600"])},[t("div",{class:"text-sm leading-relaxed message-content",innerHTML:s(R)?s(R)(e.message):e.message},null,8,Aa),t("div",Pa,[t("div",Ua,[t("button",{onClick:X=>$e(e),class:"p-1.5 text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:a.$t("Reply")},[v(s(_t),{class:"w-3 h-3"})],8,La),t("button",{onClick:X=>je(e),class:"p-1.5 text-slate-400 hover:text-green-600 dark:hover:text-green-400 transition-colors duration-200",title:a.$t("Copy")},[v(s(yt),{class:"w-3 h-3"})],8,Ba),e.user_id===((H=s(y))==null?void 0:H.id)?(n(),i("button",{key:0,onClick:X=>Ee(e),class:"p-1.5 text-slate-400 hover:text-yellow-600 dark:hover:text-yellow-400 transition-colors duration-200",title:a.$t("Edit")},[v(s(wt),{class:"w-3 h-3"})],8,za)):k("",!0),e.user_id===((A=s(y))==null?void 0:A.id)?(n(),i("button",{key:1,onClick:X=>Fe(e),class:"p-1.5 text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:a.$t("Delete")},[v(s(et),{class:"w-3 h-3"})],8,Na)):k("",!0)])]),t("div",Ra,[t("div",{class:W(["text-xs flex items-center gap-1",e.user_id===((be=s(y))==null?void 0:be.id)?"text-blue-100":"text-slate-400 dark:text-slate-500"])},[v(s(ce),{class:"w-3 h-3"}),pe(" "+d(s(U)?s(U)(e.created_at):e.created_at)+" ",1),e.edited_at?(n(),i("span",Oa,"("+d(a.$t("edited"))+")",1)):k("",!0)],2),e.user_id===((re=s(y))==null?void 0:re.id)?(n(),i("div",Va,[e.is_read?(n(),i("div",Ha,[v(s(Ct),{class:"w-3 h-3"})])):e.is_delivered?(n(),i("div",Xa,[v(s(St),{class:"w-3 h-3"})])):(n(),i("div",qa,[v(s(ce),{class:"w-3 h-3"})]))])):k("",!0)])],2),e.reply_to?(n(),i("div",Ka,[t("div",Ja,d(a.$t("Replying to")),1),t("div",Wa,d(e.reply_to.message),1)])):k("",!0),e.reactions&&e.reactions.length>0?(n(),i("div",Za,[(n(!0),i(Z,null,G(e.reactions,X=>(n(),i("button",{key:X.emoji,onClick:wo=>s(we)(e,X.emoji),class:"px-2 py-1 text-xs bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors duration-200"},d(X.emoji)+" "+d(X.count),9,Ga))),128))])):k("",!0)]),e.user_id===((Be=s(y))==null?void 0:Be.id)?(n(),i("div",Ya,[v(s(xe),{class:"w-5 h-5 text-white"})])):k("",!0)],2)}),128))])),te.value?(n(),i("div",Qa,[t("button",{onClick:fe,class:"p-3 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",title:a.$t("Scroll to bottom")},[...o[17]||(o[17]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1)])],8,eo)])):k("",!0)],512),t("div",to,[t("div",so,[s(x)?(n(),i("div",ao,[t("div",oo,[t("div",lo,d(a.$t("Replying to")),1),t("div",ro,d(s(x).message),1)]),t("button",{onClick:Te,class:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors duration-200"},[v(s(_e),{class:"w-4 h-4"})])])):k("",!0),t("div",no,[t("button",{onClick:o[5]||(o[5]=(...e)=>s(O)&&s(O)(...e)),class:"p-3 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors duration-200 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700",title:a.$t("Attach file")},[v(s(Mt),{class:"w-5 h-5"})],8,io),t("div",co,[Ne(t("textarea",{"onUpdate:modelValue":o[6]||(o[6]=e=>dt(f)?f.value=e:null),onKeydown:[Oe(Ie(me,["prevent"]),["enter"]),o[7]||(o[7]=Oe(Ie(e=>f.value+=`
`,["shift","exact"]),["enter"]))],onFocus:o[8]||(o[8]=(...e)=>s(ge)&&s(ge)(...e)),onBlur:o[9]||(o[9]=(...e)=>s(V)&&s(V)(...e)),placeholder:s(x)?a.$t("Type a reply..."):a.$t("Type a message..."),class:"w-full px-4 py-3 pr-12 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-xl text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-all duration-200 resize-none shadow-sm",rows:"1",ref_key:"messageInput",ref:g},null,40,uo),[[Re,s(f)]]),t("button",{onClick:o[10]||(o[10]=(...e)=>s(u)&&s(u)(...e)),class:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors duration-200",title:a.$t("Add emoji")},[v(s(Ue),{class:"w-4 h-4"})],8,ho)]),t("button",{onClick:me,disabled:!s(f).trim()||s(r),class:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none"},[s(r)?(n(),i("div",vo,[o[18]||(o[18]=t("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)),t("span",mo,d(a.$t("Sending...")),1)])):(n(),i("div",fo,[v(s(jt),{class:"w-4 h-4"}),t("span",bo,d(a.$t("Send")),1)]))],8,go)]),t("div",po,[t("div",xo,[t("span",null,d(s(f).length)+"/1000",1),s(f).length>800?(n(),i("span",ko,d(a.$t("Message getting long")),1)):k("",!0)]),t("div",_o,[o[19]||(o[19]=t("kbd",{class:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded text-xs"},"Enter",-1)),t("span",null,d(a.$t("to send")),1),o[20]||(o[20]=t("kbd",{class:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded text-xs"},"Shift+Enter",-1)),t("span",null,d(a.$t("for new line")),1)])])])]),w.value?(n(),ke(os,{key:0,"show-attachment-menu":s(E),"conversation-id":w.value&&w.value.id,onClose:o[11]||(o[11]=e=>E.value=!1),onFilesUploaded:s(P)},null,8,["show-attachment-menu","conversation-id","onFilesUploaded"])):k("",!0),v(ps,{"show-emoji-picker":s(M),onClose:o[12]||(o[12]=e=>M.value=!1),onEmojiSelected:s(j)},null,8,["show-emoji-picker","onEmojiSelected"])])):(n(),i("div",ua,[t("div",ha,[t("div",ga,[v(s(ne),{class:"w-10 h-10 text-slate-400 dark:text-slate-500"})]),t("h3",va,d(a.$t("Select a conversation")),1),t("p",ma,d(a.$t("Choose a conversation from the sidebar to start chatting")),1),v(s(it),{href:a.route("chat.create"),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"},{default:ze(()=>[v(s(kt),{class:"w-5 h-5"}),t("span",null,d(a.$t("Start New Chat")),1)]),_:1},8,["href"])])]))])])])]}),_:1}))}},Uo=Le(yo,[["__scopeId","data-v-548ace57"]]);export{Uo as default};
