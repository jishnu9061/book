import{X as T,C as L,D as c,l,u as d,o as r,m as e,z as s,G as f,y as p,A as _,F as M,t as N}from"./vendor-LkufkiF7.js";import{_ as P}from"./DeleteConfirmation-CLnw7UU1.js";import{L as b}from"./Layout-yhAyU3q9.js";import{S}from"./SearchInput-BRu-pwEM.js";import{P as I}from"./Pagination-BB47_pKn.js";import{h as V}from"./utils-Cv2kkzzw.js";import{p as B}from"./pickBy-Z3jOt4S7.js";import{t as E}from"./throttle-DDfrdyG6.js";import{m as j}from"./mapValues-DhmwvAeE.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{LucideTrash2 as F,Edit as U,LucideTag as Y,LucidePlus as H}from"./ui-DZ0wy3Ge.js";import"./LogoutButton-oKW2oLhJ.js";import"./app-BC8evlMS.js";import"./Logo-CwTRbPbO.js";import"./FlashMessages-Bge5XBye.js";const O={metaInfo:{title:"Categories"},layout:b,components:{Link:L,Layout:b,Head:T,SearchInput:S,Pagination:I,Plus:H,Tag:Y,Edit:U,Trash2:F,DeleteConfirmation:P},props:{filters:Object,categories:Object,title:String},data(){var t;return{form:{search:((t=this.filters)==null?void 0:t.search)||""},isLoading:!1,showDeleteModal:!1,deleteConfig:{title:"Are you sure?",message:"This action cannot be undone.",itemName:"this item",itemType:"item",deleteUrl:"",deleteMethod:"delete",deleteData:{},confirmButtonText:"Delete",cancelButtonText:"Cancel"}}},computed:{processedCategories(){var m;if(!((m=this.categories)!=null&&m.data))return[];const o=[...this.categories.data.filter(h=>!h.parent)];return this.categories.data.forEach(h=>{if(h.parent){const a=o.findIndex(n=>n.id===h.parent.id);a>-1&&o.splice(a+1,0,h)}}),o}},watch:{form:{deep:!0,handler:E(function(){this.isLoading=!0,this.$inertia.get(this.route("categories"),B(this.form),{preserveState:!0,replace:!0,onFinish:()=>{this.isLoading=!1}})},150)}},methods:{showDeleteConfirmation(t,o=null){Object.assign(this.deleteConfig,t),this.showDeleteModal=!0,o&&(this.deleteConfig.onConfirmCallback=o)},hideDeleteConfirmation(){this.showDeleteModal=!1,this.deleteConfig.onConfirmCallback=null},confirmDelete(){this.deleteConfig.onConfirmCallback&&this.deleteConfig.onConfirmCallback(),this.hideDeleteConfirmation()},reset(){this.form=j(this.form,()=>null)},deleteCategory(t){this.showDeleteConfirmation({title:this.$t("Delete Category"),message:this.$t("This action cannot be undone. This will also delete all subcategories and reassign their tickets."),itemName:t.name,itemType:"category",deleteUrl:route("categories.destroy",t.id),deleteMethod:"delete",onConfirmCallback:()=>{this.isLoading=!0,this.$inertia.delete(route("categories.destroy",t.id),{onFinish:()=>{this.isLoading=!1},onError:o=>{console.error("Delete error:",o),this.isLoading=!1}})}})},formatDate(t){if(!t)return"N/A";const o=V(t);return o.isValid()?o.format("MMM DD, YYYY"):(console.warn("Invalid date format:",t),"Invalid Date")}}},G={class:"min-h-screen bg-slate-50 dark:bg-slate-900"},R={class:"bg-white dark:bg-slate-800 shadow-sm border-b border-slate-200 dark:border-slate-700"},$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},q={class:"py-6"},z={class:"flex items-center justify-between"},X={class:"text-2xl font-bold text-slate-900 dark:text-white"},J={class:"mt-1 text-sm text-slate-500 dark:text-slate-400"},K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Q={class:"mb-6"},W={class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-4"},Z={class:"flex flex-col sm:flex-row gap-4"},ee={class:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400"},te={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},se={class:"overflow-x-auto"},oe={class:"w-full"},ae={class:"bg-slate-50 dark:bg-slate-700/50"},ie={class:"px-6 py-4 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider"},re={class:"px-6 py-4 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider"},ne={class:"px-6 py-4 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider"},le={class:"px-6 py-4 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider"},de={class:"px-6 py-4 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider"},ce={class:"divide-y divide-slate-200 dark:divide-slate-700"},me={key:0},he={colspan:"5",class:"px-6 py-12 text-center"},pe={class:"flex flex-col items-center"},ue={class:"text-slate-500 dark:text-slate-400"},fe={class:"px-6 py-4 whitespace-nowrap"},xe={class:"flex items-center"},ge={class:"w-8 h-8 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mr-3"},_e={class:"text-sm font-medium text-slate-900 dark:text-white"},be={key:0,class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},ke={class:"px-6 py-4 whitespace-nowrap"},Ce={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"},we={key:1,class:"text-slate-400 dark:text-slate-500"},ve={class:"px-6 py-4 whitespace-nowrap"},ye={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"},De={key:1,class:"text-slate-400 dark:text-slate-500"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400"},Le={class:"px-6 py-4 text-right"},Me={class:"flex items-center justify-end gap-2"},Ne=["onClick"],Pe={key:2},Se={colspan:"5",class:"px-6 py-12 text-center"},Ie={class:"flex flex-col items-center"},Ve={class:"text-lg font-medium text-slate-900 dark:text-white mb-2"},Be={class:"text-slate-500 dark:text-slate-400 mb-4"},Ee={class:"mt-8"};function je(t,o,m,h,a,n){const k=c("Head"),x=c("Plus"),u=c("Link"),C=c("SearchInput"),g=c("Tag"),w=c("Edit"),v=c("Trash2"),y=c("Pagination"),D=c("DeleteConfirmation");return d(),l("div",G,[r(k,{title:t.$t(m.title)},null,8,["title"]),e("div",R,[e("div",$,[e("div",q,[e("div",z,[e("div",null,[e("h1",X,s(t.$t("Categories Management")),1),e("p",J,s(t.$t("Manage ticket categories and subcategories")),1)]),r(u,{href:t.route("categories.create"),class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 shadow-sm hover:shadow-md"},{default:f(()=>[r(x,{class:"w-4 h-4"}),p(" "+s(t.$t("Create Category")),1)]),_:1},8,["href"])])])])]),e("div",K,[e("div",Q,[e("div",W,[e("div",Z,[r(C,{modelValue:a.form.search,"onUpdate:modelValue":o[0]||(o[0]=i=>a.form.search=i),placeholder:t.$t("Search categories..."),onReset:n.reset,class:"w-full sm:max-w-md"},null,8,["modelValue","placeholder","onReset"]),e("div",ee,[e("span",null,s(t.$t("Total"))+": "+s(m.categories.total||0),1),o[1]||(o[1]=e("span",{class:"text-slate-300 dark:text-slate-600"},"•",-1)),e("span",null,s(t.$t("Showing"))+": "+s(m.categories.data.length),1)])])])]),e("div",te,[e("div",se,[e("table",oe,[e("thead",ae,[e("tr",null,[e("th",ie,s(t.$t("Name")),1),e("th",re,s(t.$t("Department")),1),e("th",ne,s(t.$t("Parent")),1),e("th",le,s(t.$t("Created")),1),e("th",de,s(t.$t("Actions")),1)])]),e("tbody",ce,[a.isLoading?(d(),l("tr",me,[e("td",he,[e("div",pe,[o[2]||(o[2]=e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"},null,-1)),e("p",ue,s(t.$t("Loading categories...")),1)])])])):n.processedCategories.length>0?(d(!0),l(M,{key:1},N(n.processedCategories,i=>(d(),l("tr",{key:i.id,class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors duration-150"},[e("td",fe,[e("div",xe,[e("div",ge,[r(g,{class:"w-4 h-4 text-purple-600 dark:text-purple-400"})]),e("div",null,[e("div",_e,s(i.parent?"— ":"")+s(i.name),1),i.description?(d(),l("div",be,s(i.description),1)):_("",!0)])])]),e("td",ke,[i.department?(d(),l("span",Ce,s(i.department.name),1)):(d(),l("span",we,"-"))]),e("td",ve,[i.parent?(d(),l("span",ye,s(i.parent.name),1)):(d(),l("span",De,"-"))]),e("td",Te,s(n.formatDate(i.created_at)),1),e("td",Le,[e("div",Me,[r(u,{href:t.route("categories.edit",i.id),class:"inline-flex items-center gap-1 px-3 py-1.5 text-sm text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-150"},{default:f(()=>[r(w,{class:"w-4 h-4"}),p(" "+s(t.$t("Edit")),1)]),_:1},8,["href"]),e("button",{onClick:Ae=>n.deleteCategory(i),class:"inline-flex items-center gap-1 px-3 py-1.5 text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-150"},[r(v,{class:"w-4 h-4"}),p(" "+s(t.$t("Delete")),1)],8,Ne)])])]))),128)):!a.isLoading&&n.processedCategories.length===0?(d(),l("tr",Pe,[e("td",Se,[e("div",Ie,[r(g,{class:"w-12 h-12 text-slate-400 dark:text-slate-500 mb-4"}),e("h3",Ve,s(t.$t("No categories found")),1),e("p",Be,s(t.$t("Get started by creating your first category")),1),r(u,{href:t.route("categories.create"),class:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors duration-200 font-medium"},{default:f(()=>[r(x,{class:"w-4 h-4"}),p(" "+s(t.$t("Create Category")),1)]),_:1},8,["href"])])])])):_("",!0)])])])]),e("div",Ee,[r(y,{links:m.categories.links},null,8,["links"])])]),r(D,{show:a.showDeleteModal,title:a.deleteConfig.title,message:a.deleteConfig.message,"item-name":a.deleteConfig.itemName,"item-type":a.deleteConfig.itemType,"delete-url":a.deleteConfig.deleteUrl,"delete-method":a.deleteConfig.deleteMethod,"delete-data":a.deleteConfig.deleteData,"confirm-button-text":a.deleteConfig.confirmButtonText,"cancel-button-text":a.deleteConfig.cancelButtonText,onClose:n.hideDeleteConfirmation,onConfirm:n.confirmDelete},null,8,["show","title","message","item-name","item-type","delete-url","delete-method","delete-data","confirm-button-text","cancel-button-text","onClose","onConfirm"])])}const Ze=A(O,[["render",je]]);export{Ze as default};
