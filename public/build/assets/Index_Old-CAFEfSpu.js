import{X as I,C as T,D as c,l as i,u as r,o as a,m as s,J as N,G as v,F as m,t as f,z as n,A as w,K as _,L as p,O as B,y as j}from"./vendor-LkufkiF7.js";import{I as A}from"./LogoutButton-CfMbGx4V.js";import{L as O}from"./Layout-DdwsTprQ.js";import{P}from"./Pagination-BB47_pKn.js";import{T as z}from"./TextInput-BYPeFz6K.js";import{T as D}from"./TextareaInput-CS5Mn-lq.js";import{S as G}from"./SelectInput-BezpKrUW.js";import{L as M}from"./LoadingButton-DNgtCulM.js";import{F as R}from"./FileInput-LaJfiilz.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{LucideMonitor as x,LucideWrench as V,FileText as q,LucideToggleLeft as L,LucidePalette as S,Globe as U,Info as W,LucideSave as J,Check as K,LucideSettings as Q}from"./ui-DZ0wy3Ge.js";import"./utils-Cv2kkzzw.js";import"./app-BMhdMQxL.js";import"./Logo-CwTRbPbO.js";import"./FlashMessages-Bge5XBye.js";const X={metaInfo:{title:"Global Settings"},components:{Icon:A,Link:T,Head:I,FileInput:R,Pagination:P,TextInput:z,TextareaInput:D,SelectInput:G,LoadingButton:M,Settings:Q,Check:K,Save:J,Info:W,Globe:U,Palette:S,ToggleLeft:L,FileText:q,Wrench:V,Monitor:x},layout:O,props:{title:String,site_key:String,settings:Object,languages:Array,users:Array,pusher:Boolean},remember:"form",data(){return{activeTab:"general",tabs:[{id:"general",name:"General",icon:U},{id:"branding",name:"Branding",icon:S},{id:"features",name:"Features",icon:L},{id:"ticket-fields",name:"Ticket Fields",icon:q},{id:"customization",name:"Customization",icon:x},{id:"system",name:"System",icon:V}],form:this.$inertia.form({app_name:this.settings.app_name.value,logo:null,site_key:this.site_key,default_recipient:this.settings.default_recipient?this.settings.default_recipient.value:1,logo_white:null,favicon:null,main_logo:"/images/logo.png",main_logo_white:"/images/logo_white.png",main_favicon:"/favicon.png",default_language:this.settings.default_language.value,footer_text:this.settings.footer_text.value,custom_css:typeof this.settings.custom_css<"u"&&this.settings.custom_css?this.settings.custom_css.value:null,email_notifications:this.settings.email_notifications.value.map(l=>({name:l.name,slug:l.slug,value:!!l.value})),enable_options:this.settings.enable_options.value.map(l=>({name:l.name,slug:l.slug,value:!!l.value})),hide_ticket_fields:this.settings.hide_ticket_fields&&this.settings.hide_ticket_fields.value?this.settings.hide_ticket_fields.value:[],required_ticket_fields:this.settings.required_ticket_fields&&this.settings.required_ticket_fields.value?this.settings.required_ticket_fields.value:[]}),hide_ticket_fields:["department","category","sub_category","ticket_type","assigned_to"],required_ticket_fields:["department","category","sub_category","ticket_type","assigned_to"]}},created(){},methods:{checkRequiredFields(l){l.target.checked&&["category","sub_category"].includes(l.target.value)&&(this.form.required_ticket_fields.includes("category")||this.form.required_ticket_fields.push("category"),this.form.required_ticket_fields.includes("department")||this.form.required_ticket_fields.push("department")),!l.target.checked&&["department"].includes(l.target.value)&&(this.form.required_ticket_fields.includes("category")&&this.removeElement(this.form.required_ticket_fields,"category"),this.form.required_ticket_fields.includes("sub_category")&&this.removeElement(this.form.required_ticket_fields,"sub_category")),!l.target.checked&&["category"].includes(l.target.value)&&this.form.required_ticket_fields.includes("sub_category")&&this.removeElement(this.form.required_ticket_fields,"sub_category")},removeElement(l,o){const u=l.indexOf(o);l.splice(u,1)},update(){const l=this;if(this.form.enable_options.find(u=>u.slug="chat").value&&!this.pusher){alert("Please setup the pusher configuration to enable chat.");return}this.form.post(this.route("global.update"),{onSuccess:()=>{const u=l.$page.props.flash.success;this.form.logo=null,this.form.logo_white=null,u&&window.location.reload()}})}}},Y={class:"bg-white rounded-md shadow overflow-hidden mr-2"},Z={class:"p-8 -mr-6 -mb-8 flex flex-wrap"},$=["value"],ee={class:"pb-8 pr-6 w-full flex lg:w-1/3"},te={class:"w-full lg:w-1/5 flex items-end justify-center"},se=["src"],le={class:"pb-8 pr-6 w-full flex lg:w-1/3"},oe={class:"w-full lg:w-1/5 flex items-end justify-center"},ie=["src"],re={class:"pb-8 pr-6 w-full flex lg:w-1/3"},ne={class:"w-full lg:w-1/5 flex items-end justify-center"},ae=["src"],ue={class:"assigned_user pr-6 pb-8 w-full lg:w-full flex flex-col"},de={class:"font-bold text-sm mb-1"},ce=["for"],me={class:"flex items-center mb-3"},fe=["id","onUpdate:modelValue"],_e={class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},pe={class:"assigned_user pr-6 pb-8 w-full lg:w-full flex flex-col"},ge={class:"font-bold text-sm mb-1"},he=["for"],be={class:"flex items-center mb-3"},ve=["id","onUpdate:modelValue"],we={class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},ke={class:"flex w-full"},ye=["value"],xe={class:"pr-6 pb-1 w-full lg:w-full flex flex-col"},Ve={class:"font-bold text-sm mb-1"},qe={class:"flex flex-wrap w-full pb-8"},Le=["for"],Se=["id","value"],Ue={class:"text-sm"},Ce={class:"pr-6 pb-1 w-full lg:w-full flex flex-col"},Ee={class:"font-bold text-sm mb-1"},Fe={class:"flex flex-wrap w-full pb-8"},Ie=["for"],Te=["id","value"],Ne={class:"text-sm"},Be={class:"assigned_user pr-6 pb-8 w-full lg:w-full flex flex-col"},je={class:"font-bold text-sm mb-1"},Ae={class:"px-8 py-4 bg-gray-50 border-t border-gray-100 flex items-center"};function Oe(l,o,u,Pe,t,g){const C=c("Head"),k=c("text-input"),y=c("select-input"),h=c("file-input"),E=c("textarea-input"),F=c("loading-button");return r(),i("div",null,[a(C,{title:u.title},null,8,["title"]),s("div",Y,[s("form",{onSubmit:o[11]||(o[11]=N((...e)=>g.update&&g.update(...e),["prevent"]))},[s("div",Z,[a(k,{modelValue:t.form.app_name,"onUpdate:modelValue":o[0]||(o[0]=e=>t.form.app_name=e),error:t.form.errors.app_name,class:"pr-6 pb-8 w-full lg:w-1/3",label:l.$t("App Name")},null,8,["modelValue","error","label"]),a(k,{modelValue:t.form.site_key,"onUpdate:modelValue":o[1]||(o[1]=e=>t.form.site_key=e),error:t.form.errors.site_key,class:"pr-6 pb-8 w-full lg:w-1/3",label:l.$t("Google ReCaptcha Site Key")},null,8,["modelValue","error","label"]),a(y,{modelValue:t.form.default_language,"onUpdate:modelValue":o[2]||(o[2]=e=>t.form.default_language=e),error:t.form.errors.default_language,class:"pr-6 pb-8 w-full lg:w-1/3",label:l.$t("Default Language")},{default:v(()=>[(r(!0),i(m,null,f(u.languages,e=>(r(),i("option",{key:e.id,value:e.code},n(e.name),9,$))),128))]),_:1},8,["modelValue","error","label"]),s("div",ee,[a(h,{modelValue:t.form.logo,"onUpdate:modelValue":o[3]||(o[3]=e=>t.form.logo=e),error:t.form.errors.logo,class:"pr-2 w-full lg:w-4/5",type:"file",accept:"image/png",label:"Logo"},null,8,["modelValue","error"]),s("div",te,[t.form.main_logo?(r(),i("img",{key:0,class:"block mb-2",src:t.form.main_logo},null,8,se)):w("",!0)])]),s("div",le,[a(h,{modelValue:t.form.logo_white,"onUpdate:modelValue":o[4]||(o[4]=e=>t.form.logo_white=e),error:t.form.errors.logo_white,class:"pr-2 w-full lg:w-4/5",type:"file",accept:"image/png",label:"Logo White"},null,8,["modelValue","error"]),s("div",oe,[t.form.main_logo_white?(r(),i("img",{key:0,class:"block mb-2 rounded bg-dark",src:t.form.main_logo_white},null,8,ie)):w("",!0)])]),s("div",re,[a(h,{modelValue:t.form.favicon,"onUpdate:modelValue":o[5]||(o[5]=e=>t.form.favicon=e),error:t.form.errors.favicon,class:"pr-2 w-full lg:w-4/5",type:"file",accept:"image/png",label:"Favicon"},null,8,["modelValue","error"]),s("div",ne,[t.form.main_favicon?(r(),i("img",{key:0,class:"block mb-2",src:t.form.main_favicon},null,8,ae)):w("",!0)])]),s("div",ue,[s("div",de,n(l.$t("Enable Options")),1)]),(r(!0),i(m,null,f(t.form.enable_options,(e,d)=>(r(),i("div",{class:"flex items-center justify-start pr-6 pb-8 w-full lg:w-1/3",key:d},[s("label",{for:e.slug,class:"flex toggle_swtich items-center cursor-pointer"},[s("div",me,[_(s("input",{id:e.slug,type:"checkbox","onUpdate:modelValue":b=>e.value=b,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600"},null,8,fe),[[p,e.value]]),s("div",_e,n(e.name),1)])],8,ce)]))),128)),s("div",pe,[s("div",ge,n(l.$t("Email Notifications")),1)]),(r(!0),i(m,null,f(t.form.email_notifications,(e,d)=>(r(),i("div",{class:"flex items-center justify-start pr-6 pb-8 w-full lg:w-1/3",key:d},[s("label",{for:e.slug,class:"flex toggle_swtich items-center cursor-pointer"},[s("div",be,[_(s("input",{id:e.slug,type:"checkbox","onUpdate:modelValue":b=>e.value=b,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600"},null,8,ve),[[p,e.value]]),s("div",we,n(e.name),1)])],8,he)]))),128)),s("div",ke,[a(y,{modelValue:t.form.default_recipient,"onUpdate:modelValue":o[6]||(o[6]=e=>t.form.default_recipient=e),error:t.form.errors.default_recipient,class:"pr-6 pb-8 w-full lg:w-1/3",label:l.$t("Default Email Recipient for customer ticket")},{default:v(()=>[(r(!0),i(m,null,f(u.users,e=>(r(),i("option",{key:e.id,value:e.id},n(e.name),9,ye))),128))]),_:1},8,["modelValue","error","label"])]),s("div",xe,[s("div",Ve,n(l.$t("Hide ticket fields")),1)]),s("div",qe,[(r(!0),i(m,null,f(t.hide_ticket_fields,e=>(r(),i("label",{class:"select-none flex items-center pr-8 capitalize",for:"htf_"+e},[_(s("input",{id:"htf_"+e,"onUpdate:modelValue":o[7]||(o[7]=d=>t.form.hide_ticket_fields=d),class:"mr-1",value:e,type:"checkbox"},null,8,Se),[[p,t.form.hide_ticket_fields]]),s("span",Ue,n(e.replace(/_/g," ")),1)],8,Le))),256))]),s("div",Ce,[s("div",Ee,n(l.$t("Required fields to submit ticket")),1)]),s("div",Fe,[(r(!0),i(m,null,f(t.required_ticket_fields,e=>(r(),i("label",{class:"select-none flex items-center pr-8 capitalize",for:"rtf_"+e},[_(s("input",{onChange:o[8]||(o[8]=d=>g.checkRequiredFields(d)),id:"rtf_"+e,"onUpdate:modelValue":o[9]||(o[9]=d=>t.form.required_ticket_fields=d),class:"mr-1",value:e,type:"checkbox"},null,40,Te),[[p,t.form.required_ticket_fields]]),s("span",Ne,n(e.replace(/_/g," ")),1)],8,Ie))),256))]),s("div",Be,[s("div",je,n(l.$t("Cron Job Instruction")),1),o[12]||(o[12]=B('<p class="mt-2 font-light">If you would like to send mail without delaying you need to set a cron job for that with once every 3 minute.</p><code class="mt-5 mb-5 prose block whitespace-pre mt-1 text-sm">*/2 * * * * /usr/bin/php artisan queue:work --queue=high,default --stop-when-empty</code><p class="mt-3 font-light">For the shared hosting like cPanel or any panel server you can call url as like this</p><code class="mt-5 mb-5 prose block whitespace-pre mt-1 text-sm">*/2 * * * * wget -q -O - https://website.com/cron/queue_work &gt;/dev/null 2&gt;&amp;1</code><p class="mt-3">After adding one of these above option, you need to enable Queue with add <code>QUEUE_ENABLE=true</code> on the .env file </p>',5))]),a(E,{modelValue:t.form.custom_css,"onUpdate:modelValue":o[10]||(o[10]=e=>t.form.custom_css=e),error:t.form.errors.custom_css,rows:15,class:"pb-6 w-full",placeholder:"your custom css here..",label:l.$t("Custom CSS")},null,8,["modelValue","error","label"])]),s("div",Ae,[a(F,{loading:t.form.processing,class:"btn-indigo ml-auto",type:"submit"},{default:v(()=>[j(n(l.$t("Save")),1)]),_:1},8,["loading"])])],32)])])}const tt=H(X,[["render",Oe]]);export{tt as default};
