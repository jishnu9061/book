import{D as c,l as d,u as n,m as e,o as a,A as p,y as x,K as _,P as C,E as h,z as v,f as g,i as S,k as L}from"./vendor-2qHTh_Dj.js";import{i as V,h as A}from"./InstallerApi-Dj1wJ3Su.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{ArrowRight as I,ArrowLeft as P,Info as N,LucideX as D,Check as R,LucideShield as j}from"./ui-ChkuEbnX.js";import"./utils-11VKenW5.js";const B={name:"InstallerLicense",components:{Shield:j,Check:R,X:D,Info:N,ArrowLeft:P,ArrowRight:I},props:{form:{type:Object,required:!0}},emits:["next","back","update:form"],setup(i,{emit:t}){const s=g(""),r=g(""),u=S({}),b=()=>{Object.keys(u).forEach(o=>delete u[o]),r.value=""},m=async()=>{if(!i.form.purchaseCode){u.purchaseCode="Purchase code is required";return}s.value="verifying",b();try{const o=await V("/install/verify-license",{body:JSON.stringify({purchase_code:i.form.purchaseCode})}),f=await A(o);f.success?(s.value="verified",t("update:form",{...i.form,verified:!0})):(s.value="failed",r.value=f.message||"Invalid purchase code")}catch(o){s.value="failed",r.value="Network error. Please try again.",console.error("License verification error:",o)}};return L(()=>i.form.purchaseCode,o=>{t("update:form",{...i.form,purchaseCode:o})}),{verificationStatus:s,verificationError:r,errors:u,clearErrors:b,verifyLicense:m}}},X={class:"animate-fade-in-up"},Y={class:"text-center mb-8"},q={class:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-6"},F={class:"max-w-2xl mx-auto"},O={class:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-6 mb-6"},T={class:"space-y-4"},z={class:"relative"},H={key:0,class:"absolute right-3 top-3"},G={key:1,class:"absolute right-3 top-3"},J={key:2,class:"absolute right-3 top-3"},K={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},M={key:1,class:"mt-1 text-sm text-slate-500 dark:text-slate-400"},U={key:0,class:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4"},Q={class:"flex items-center"},W={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},Z={class:"flex items-center"},$={class:"text-sm text-red-700 dark:text-red-300 mt-1"},ee={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6 mb-6"},te={class:"flex items-start"},re={class:"flex justify-between items-center mt-8 pt-6 border-t border-slate-200 dark:border-slate-700"},se={class:"flex space-x-3"},oe=["disabled"],ae=["disabled"];function ie(i,t,s,r,u,b){const m=c("Shield"),o=c("Check"),f=c("X"),k=c("Info"),y=c("ArrowLeft"),w=c("ArrowRight");return n(),d("div",X,[e("div",Y,[e("div",q,[a(m,{class:"w-10 h-10 text-white"})]),t[5]||(t[5]=e("h2",{class:"text-3xl font-bold text-slate-900 dark:text-white mb-4"}," License Verification ",-1)),t[6]||(t[6]=e("p",{class:"text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto"}," Please enter your CodeCanyon purchase code to verify your license and continue with the installation. ",-1))]),e("div",F,[e("div",O,[e("div",T,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[x(" Purchase Code "),e("span",{class:"text-red-500"},"*")],-1)),e("div",z,[_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.form.purchaseCode=l),type:"text",placeholder:"Enter your CodeCanyon purchase code",class:h(["w-full px-4 py-3 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-all duration-200",{"border-red-500 dark:border-red-400 focus:ring-red-500 focus:border-red-500":r.errors.purchaseCode}]),onInput:t[1]||(t[1]=(...l)=>r.clearErrors&&r.clearErrors(...l))},null,34),[[C,s.form.purchaseCode]]),r.verificationStatus==="verifying"?(n(),d("div",H,[...t[7]||(t[7]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"},null,-1)])])):r.verificationStatus==="verified"?(n(),d("div",G,[a(o,{class:"w-5 h-5 text-green-600 dark:text-green-400"})])):r.verificationStatus==="failed"?(n(),d("div",J,[a(f,{class:"w-5 h-5 text-red-600 dark:text-red-400"})])):p("",!0)]),r.errors.purchaseCode?(n(),d("p",K,v(r.errors.purchaseCode),1)):(n(),d("p",M,' You can find your purchase code in your CodeCanyon account under "Downloads" '))]),r.verificationStatus==="verified"?(n(),d("div",U,[e("div",Q,[a(o,{class:"w-5 h-5 text-green-600 dark:text-green-400 mr-3"}),t[9]||(t[9]=e("div",null,[e("h4",{class:"text-sm font-medium text-green-800 dark:text-green-200"},"License Verified Successfully"),e("p",{class:"text-sm text-green-700 dark:text-green-300 mt-1"}," Your purchase code is valid and you can proceed with the installation. ")],-1))])])):r.verificationStatus==="failed"?(n(),d("div",W,[e("div",Z,[a(f,{class:"w-5 h-5 text-red-600 dark:text-red-400 mr-3"}),e("div",null,[t[10]||(t[10]=e("h4",{class:"text-sm font-medium text-red-800 dark:text-red-200"},"License Verification Failed",-1)),e("p",$,v(r.verificationError||"Please check your purchase code and try again."),1)])])])):p("",!0)])]),e("div",ee,[e("div",te,[a(k,{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),t[11]||(t[11]=e("div",null,[e("h4",{class:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2"},"Need Help Finding Your Purchase Code?"),e("ul",{class:"text-sm text-blue-700 dark:text-blue-300 space-y-1"},[e("li",null,"• Log in to your CodeCanyon account"),e("li",null,'• Go to "Downloads" section'),e("li",null,"• Find your HelpDesk purchase"),e("li",null,"• Copy the purchase code from the license details")])],-1))])]),t[12]||(t[12]=e("div",{class:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-6"},[e("h4",{class:"text-sm font-medium text-slate-900 dark:text-white mb-3"},"License Information"),e("div",{class:"space-y-2 text-sm text-slate-600 dark:text-slate-400"},[e("p",null,"• This is a single-use license for one domain"),e("p",null,"• You can use this code for development and production"),e("p",null,"• Support and updates are included for 6 months"),e("p",null,"• Please keep your purchase code secure and private")])],-1))]),e("div",re,[e("button",{onClick:t[2]||(t[2]=l=>i.$emit("back")),class:"px-6 py-3 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors"},[a(y,{class:"w-4 h-4 mr-2 inline"}),t[13]||(t[13]=x(" Back ",-1))]),e("div",se,[e("button",{onClick:t[3]||(t[3]=(...l)=>r.verifyLicense&&r.verifyLicense(...l)),disabled:!s.form.purchaseCode||r.verificationStatus==="verifying",class:h(["px-6 py-3 rounded-lg font-medium transition-all duration-200",s.form.purchaseCode&&r.verificationStatus!=="verifying"?"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600":"bg-slate-100 dark:bg-slate-800 text-slate-400 dark:text-slate-500 cursor-not-allowed"])},[a(m,{class:"w-4 h-4 mr-2 inline"}),x(" "+v(r.verificationStatus==="verifying"?"Verifying...":"Verify License"),1)],10,oe),e("button",{onClick:t[4]||(t[4]=l=>i.$emit("next")),disabled:r.verificationStatus!=="verified",class:h(["px-8 py-3 rounded-lg font-semibold transition-all duration-200 transform",r.verificationStatus==="verified"?"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white hover:scale-105 shadow-lg hover:shadow-xl":"bg-slate-300 dark:bg-slate-600 text-slate-500 dark:text-slate-400 cursor-not-allowed"])},[t[14]||(t[14]=x(" Continue ",-1)),a(w,{class:"w-4 h-4 ml-2 inline"})],10,ae)])])])}const fe=E(B,[["render",ie]]);export{fe as default};
