import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{AlertCircle as S,LucideX as v,LucideSearch as p}from"./ui-DZ0wy3Ge.js";import{v as w}from"./utils-Cv2kkzzw.js";import{D as g,l as i,u as o,A as n,m as a,z as u,o as d,v as _,F as C,t as F,E as f}from"./vendor-LkufkiF7.js";const B={inheritAttrs:!1,components:{Search:p,X:v,AlertCircle:S},props:{id:{type:String,default(){return`search-input-${w()}`}},modelValue:String,label:String,placeholder:String,helperText:String,error:String,disabled:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},disableReset:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},size:{type:String,default:"md",validator:e=>["sm","md","lg"].includes(e)},showResultsCount:{type:Boolean,default:!1},resultsCount:{type:Number,default:null},showSuggestions:{type:Boolean,default:!1},suggestions:{type:Array,default:()=>[]},debounceMs:{type:Number,default:300}},emits:["update:modelValue","reset","focus","blur","keydown","enter","search","suggestion-select"],data(){return{isFocused:!1,selectedSuggestion:-1,debounceTimer:null}},watch:{modelValue(e){this.debounceMs>0?(clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.$emit("search",e)},this.debounceMs)):this.$emit("search",e)}},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside),this.debounceTimer&&clearTimeout(this.debounceTimer)},methods:{onInput(e){this.$emit("update:modelValue",e.target.value),this.selectedSuggestion=-1},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},onBlur(e){setTimeout(()=>{this.isFocused=!1,this.selectedSuggestion=-1,this.$emit("blur",e)},150)},onKeydown(e){this.$emit("keydown",e),e.key==="Enter"?this.selectedSuggestion>=0&&this.suggestions[this.selectedSuggestion]?this.selectSuggestion(this.suggestions[this.selectedSuggestion]):this.$emit("enter",e):e.key==="ArrowDown"?(e.preventDefault(),this.selectedSuggestion=Math.min(this.selectedSuggestion+1,this.suggestions.length-1)):e.key==="ArrowUp"?(e.preventDefault(),this.selectedSuggestion=Math.max(this.selectedSuggestion-1,-1)):e.key==="Escape"&&(this.isFocused=!1,this.selectedSuggestion=-1,this.$refs.input.blur())},clearSearch(){this.$emit("update:modelValue",""),this.$emit("reset"),this.selectedSuggestion=-1,this.focus()},selectSuggestion(e){this.$emit("update:modelValue",e),this.$emit("suggestion-select",e),this.isFocused=!1,this.selectedSuggestion=-1},handleClickOutside(e){this.$el.contains(e.target)||(this.isFocused=!1,this.selectedSuggestion=-1)},focus(){this.$refs.input.focus()},blur(){this.$refs.input.blur()},select(){this.$refs.input.select()}}},T=["for"],A={class:"relative"},V={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},L=["id","placeholder","value","disabled","autocomplete"],M={key:1,class:"absolute inset-y-0 right-3 flex items-center"},z={key:2,class:"absolute inset-y-0 right-3 flex items-center"},E={class:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-600 px-2 py-1 rounded-full"},D={key:1,class:"mt-2 text-sm text-slate-500 dark:text-slate-400"},I={key:2,class:"mt-2 flex items-center gap-2 text-sm text-red-600 dark:text-red-400"},N={key:3,class:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto"},K={class:"py-1"},R=["onClick","onMouseenter"];function X(e,s,t,O,c,r){const m=g("Search"),b=g("X"),k=g("AlertCircle");return o(),i("div",{class:f(["relative",e.$attrs.class])},[t.label?(o(),i("label",{key:0,for:t.id,class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},u(t.label),9,T)):n("",!0),a("div",A,[a("div",V,[d(m,{class:"w-4 h-4 text-slate-400 dark:text-slate-500"})]),a("input",_({id:t.id,ref:"input"},{...e.$attrs,class:null},{class:["w-full pl-10 pr-10 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-all duration-200",t.error?"border-red-500 dark:border-red-400 focus:ring-red-500 focus:border-red-500":"",t.disabled?"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 cursor-not-allowed":"",t.size==="sm"?"pl-8 pr-8 py-2 text-xs":"",t.size==="lg"?"pl-12 pr-12 py-4 text-base":""],type:"text",name:"search",placeholder:t.placeholder||e.$t("Search..."),value:t.modelValue,disabled:t.disabled,autocomplete:t.autocomplete,onInput:s[0]||(s[0]=(...l)=>r.onInput&&r.onInput(...l)),onFocus:s[1]||(s[1]=(...l)=>r.onFocus&&r.onFocus(...l)),onBlur:s[2]||(s[2]=(...l)=>r.onBlur&&r.onBlur(...l)),onKeydown:s[3]||(s[3]=(...l)=>r.onKeydown&&r.onKeydown(...l))}),null,16,L),!t.disableReset&&t.modelValue&&!t.disabled?(o(),i("button",{key:0,type:"button",onClick:s[4]||(s[4]=(...l)=>r.clearSearch&&r.clearSearch(...l)),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors duration-200 group"},[d(b,{class:"w-4 h-4 group-hover:scale-110 transition-transform duration-200"})])):n("",!0),t.isLoading?(o(),i("div",M,[...s[5]||(s[5]=[a("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-slate-300 border-t-blue-600"},null,-1)])])):n("",!0),t.showResultsCount&&t.resultsCount!==null?(o(),i("div",z,[a("span",E,u(t.resultsCount),1)])):n("",!0)]),t.helperText&&!t.error?(o(),i("div",D,u(t.helperText),1)):n("",!0),t.error?(o(),i("div",I,[d(k,{class:"w-4 h-4 flex-shrink-0"}),a("span",null,u(t.error),1)])):n("",!0),t.showSuggestions&&t.suggestions.length>0&&c.isFocused?(o(),i("div",N,[a("div",K,[(o(!0),i(C,null,F(t.suggestions,(l,h)=>(o(),i("div",{key:h,class:f(["px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center gap-3",c.selectedSuggestion===h?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-600"]),onClick:x=>r.selectSuggestion(l),onMouseenter:x=>c.selectedSuggestion=h},[d(m,{class:"w-4 h-4 text-slate-400"}),a("span",null,u(l),1)],42,R))),128))])])):n("",!0)],2)}const G=y(B,[["render",X]]);export{G as S};
