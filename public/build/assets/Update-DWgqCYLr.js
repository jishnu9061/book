import{X as y,D as d,l as n,u as l,o,m as e,z as s,y as b,E as C,J as U,A as c,F as A,t as F,G as M}from"./vendor-LkufkiF7.js";import{L as f}from"./Layout-yhAyU3q9.js";import{L as $}from"./LoadingButton-DNgtCulM.js";import{a as D}from"./utils-Cv2kkzzw.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{AlertTriangle as S,CheckCircle as j,AlertCircle as T,LucideRefreshCw as V,Download as B,LucidePackage as N}from"./ui-DZ0wy3Ge.js";import"./LogoutButton-oKW2oLhJ.js";import"./app-BC8evlMS.js";import"./Logo-CwTRbPbO.js";import"./FlashMessages-Bge5XBye.js";const R={metaInfo:{title:"System Updates"},components:{Head:y,Layout:f,LoadingButton:$,Package:N,Download:B,RefreshCw:V,AlertCircle:T,CheckCircle:j,AlertTriangle:S},layout:f,props:{title:String,demo:Boolean,current_version:{type:String,required:!1}},remember:"form",data(){return{changedFiles:[],latest_version:"",errorMessage:"",successMessage:"",hasCheckedForUpdates:!1,lastCheckedAt:null,form:this.$inertia.form({processing:!1})}},methods:{checkForUpdates(){this.clearMessages(),this.form.processing=!0,this.hasCheckedForUpdates=!1,D.post(this.route("settings.update.check"),{}).then(t=>{const a=t.data;a.files&&Array.isArray(a.files)&&(this.changedFiles=a.files),a.version?(this.latest_version=a.version,this.successMessage=this.$t("Update check completed successfully. A new version is available.")):(this.latest_version="",this.successMessage=this.$t("Update check completed. You are running the latest version.")),this.hasCheckedForUpdates=!0,this.lastCheckedAt=new Date().toLocaleString()}).catch(t=>{console.error("Update check error:",t),this.errorMessage=this.$t("Failed to check for updates. Please try again later."),this.hasCheckedForUpdates=!0}).finally(()=>{this.form.processing=!1})},refreshUpdateInfo(){this.clearMessages(),this.latest_version="",this.changedFiles=[],this.hasCheckedForUpdates=!1,this.lastCheckedAt=null},clearMessages(){this.errorMessage="",this.successMessage=""},formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}},created(){!this.demo&&this.current_version&&setTimeout(()=>{this.checkForUpdates()},1e3)}},I={class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 mb-8"},P={class:"px-6 py-6"},Y={class:"flex items-center justify-between"},H={class:"text-2xl font-bold text-slate-900 dark:text-white"},z={class:"mt-1 text-sm text-slate-600 dark:text-slate-400"},E={class:"flex items-center space-x-3"},q=["disabled"],G={class:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},J={class:"p-8"},X={class:"mb-8"},K={class:"flex items-center space-x-3 mb-4"},O={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center"},Q={class:"text-lg font-semibold text-slate-900 dark:text-white"},W={class:"text-sm text-slate-600 dark:text-slate-400"},Z={class:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4 border border-slate-200 dark:border-slate-600"},ee={class:"flex items-center justify-between"},te={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},se={class:"text-lg font-bold text-slate-900 dark:text-white"},re={class:"mb-8"},oe={class:"flex items-center space-x-3 mb-4"},ae={class:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center"},ne={class:"text-lg font-semibold text-slate-900 dark:text-white"},le={class:"text-sm text-slate-600 dark:text-slate-400"},de={key:0,class:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},ie={class:"flex items-center"},ce={class:"text-sm font-medium text-red-800 dark:text-red-200"},he={class:"text-sm text-red-700 dark:text-red-300 mt-1"},ge={key:1,class:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg"},me={class:"flex items-center"},ue={class:"text-sm font-medium text-green-800 dark:text-green-200"},_e={class:"text-sm text-green-700 dark:text-green-300 mt-1"},be={key:0,class:"mb-8"},fe={class:"flex items-center space-x-3 mb-4"},pe={class:"w-12 h-12 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center"},xe={class:"text-lg font-semibold text-slate-900 dark:text-white"},ke={class:"text-sm text-slate-600 dark:text-slate-400"},ve={class:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-6 border border-orange-200 dark:border-orange-800"},we={class:"flex items-center justify-between mb-4"},ye={class:"text-sm font-medium text-orange-700 dark:text-orange-300"},Ce={class:"text-xl font-bold text-orange-900 dark:text-orange-100"},Ue={class:"space-y-4"},Ae={class:"font-semibold text-orange-900 dark:text-orange-100 mb-2"},Fe={class:"space-y-2 text-sm text-orange-800 dark:text-orange-200"},Me={key:0,class:"mt-4"},$e={class:"font-medium text-orange-900 dark:text-orange-100 mb-2"},De={class:"bg-white dark:bg-slate-800 rounded border border-orange-200 dark:border-orange-700 max-h-40 overflow-y-auto"},Le={key:1,class:"mb-8"},Se={class:"flex items-center space-x-3 mb-4"},je={class:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center"},Te={class:"text-lg font-semibold text-slate-900 dark:text-white"},Ve={class:"text-sm text-slate-600 dark:text-slate-400"},Be={class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800"},Ne={class:"flex items-center"},Re={class:"font-medium text-green-900 dark:text-green-100"},Ie={class:"text-sm text-green-700 dark:text-green-300 mt-1"},Pe={key:2,class:"mb-8"},Ye={class:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800"},He={class:"flex items-center"},ze={class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"},Ee={class:"text-sm text-yellow-700 dark:text-yellow-300 mt-1"},qe={class:"px-8 py-6 bg-slate-50 dark:bg-slate-700/50 border-t border-slate-200 dark:border-slate-600 flex items-center justify-between"},Ge={class:"text-sm text-slate-600 dark:text-slate-400"},Je={class:"flex items-center space-x-3"};function Xe(t,a,g,Ke,r,h){const p=d("Head"),x=d("RefreshCw"),k=d("Package"),u=d("Download"),v=d("AlertCircle"),m=d("CheckCircle"),_=d("AlertTriangle"),w=d("loading-button");return l(),n("div",null,[o(p,{title:g.title},null,8,["title"]),e("div",I,[e("div",P,[e("div",Y,[e("div",null,[e("h1",H,s(t.$t("System Updates")),1),e("p",z,s(t.$t("Check for the latest version and update your system")),1)]),e("div",E,[e("button",{type:"button",onClick:a[0]||(a[0]=(...i)=>h.refreshUpdateInfo&&h.refreshUpdateInfo(...i)),disabled:r.form.processing,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[o(x,{class:C([{"animate-spin":r.form.processing},"w-4 h-4 mr-2"])},null,8,["class"]),b(" "+s(t.$t("Refresh")),1)],8,q)])])])]),e("div",G,[e("form",{onSubmit:a[1]||(a[1]=U((...i)=>h.checkForUpdates&&h.checkForUpdates(...i),["prevent"]))},[e("div",J,[e("div",X,[e("div",K,[e("div",O,[o(k,{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),e("div",null,[e("h3",Q,s(t.$t("Current Version")),1),e("p",W,s(t.$t("Your system is currently running")),1)])]),e("div",Z,[e("div",ee,[e("span",te,s(t.$t("Version")),1),e("span",se,s(g.current_version||"Unknown"),1)])])]),e("div",re,[e("div",oe,[e("div",ae,[o(u,{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),e("div",null,[e("h3",ne,s(t.$t("Check for Updates")),1),e("p",le,s(t.$t("Click the button below to check for available updates")),1)])]),r.errorMessage?(l(),n("div",de,[e("div",ie,[o(v,{class:"w-5 h-5 text-red-600 dark:text-red-400 mr-3"}),e("div",null,[e("h4",ce,s(t.$t("Update Check Failed")),1),e("p",he,s(r.errorMessage),1)])])])):c("",!0),r.successMessage?(l(),n("div",ge,[e("div",me,[o(m,{class:"w-5 h-5 text-green-600 dark:text-green-400 mr-3"}),e("div",null,[e("h4",ue,s(t.$t("Update Check Complete")),1),e("p",_e,s(r.successMessage),1)])])])):c("",!0)]),r.latest_version?(l(),n("div",be,[e("div",fe,[e("div",pe,[o(_,{class:"w-6 h-6 text-orange-600 dark:text-orange-400"})]),e("div",null,[e("h3",xe,s(t.$t("Update Available")),1),e("p",ke,s(t.$t("A new version is available for download")),1)])]),e("div",ve,[e("div",we,[e("span",ye,s(t.$t("Latest Version")),1),e("span",Ce,s(r.latest_version),1)]),e("div",Ue,[e("div",null,[e("h4",Ae,s(t.$t("Manual Update Instructions")),1),e("div",Fe,[e("p",null,"1. "+s(t.$t("Download the latest files from CodeCanyon")),1),e("p",null,"2. "+s(t.$t("Replace the changed files with the downloaded files")),1),e("p",null,"3. "+s(t.$t("Update the version number in your .env file")),1),e("p",null,"4. "+s(t.$t("Clear your application cache")),1)])]),r.changedFiles&&r.changedFiles.length>0?(l(),n("div",Me,[e("h5",$e,s(t.$t("Changed Files")),1),e("div",De,[(l(!0),n(A,null,F(r.changedFiles,i=>(l(),n("div",{key:i,class:"px-3 py-2 text-xs font-mono text-slate-700 dark:text-slate-300 border-b border-orange-100 dark:border-orange-800 last:border-b-0"},s(i),1))),128))])])):c("",!0)])])])):!r.form.processing&&r.hasCheckedForUpdates?(l(),n("div",Le,[e("div",Se,[e("div",je,[o(m,{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),e("div",null,[e("h3",Te,s(t.$t("System Up to Date")),1),e("p",Ve,s(t.$t("You are running the latest version")),1)])]),e("div",Be,[e("div",Ne,[o(m,{class:"w-6 h-6 text-green-600 dark:text-green-400 mr-3"}),e("div",null,[e("h4",Re,s(t.$t("No Updates Available")),1),e("p",Ie,s(t.$t("Your system is already running the latest version")),1)])])])])):c("",!0),g.demo?(l(),n("div",Pe,[e("div",Ye,[e("div",He,[o(_,{class:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-3"}),e("div",null,[e("h4",ze,s(t.$t("Demo Mode")),1),e("p",Ee,s(t.$t("This is a demo environment. Update functionality is limited.")),1)])])])])):c("",!0)]),e("div",qe,[e("div",Ge,s(t.$t("Last checked:"))+" "+s(r.lastCheckedAt||t.$t("Never")),1),e("div",Je,[o(w,{loading:r.form.processing,class:"inline-flex items-center px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",type:"submit"},{default:M(()=>[o(u,{class:"w-4 h-4 mr-2"}),b(" "+s(t.$t("Check for Updates")),1)]),_:1},8,["loading"])])])],32)])])}const nt=L(R,[["render",Xe]]);export{nt as default};
